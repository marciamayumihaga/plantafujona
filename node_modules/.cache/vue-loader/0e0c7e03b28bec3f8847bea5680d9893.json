{"remainingRequest":"/Users/andreruz/Desktop/Marcia/Escapista/EscapeVirtual/cadastrosala/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!/Users/andreruz/Desktop/Marcia/Escapista/EscapeVirtual/cadastrosala/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/andreruz/Desktop/Marcia/Escapista/EscapeVirtual/cadastrosala/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/andreruz/Desktop/Marcia/Escapista/EscapeVirtual/cadastrosala/src/components/CadastroCenario.vue?vue&type=template&id=2b0a6c2c&scoped=true&","dependencies":[{"path":"/Users/andreruz/Desktop/Marcia/Escapista/EscapeVirtual/cadastrosala/src/components/CadastroCenario.vue","mtime":1595546651000},{"path":"/Users/andreruz/Desktop/Marcia/Escapista/EscapeVirtual/cadastrosala/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/andreruz/Desktop/Marcia/Escapista/EscapeVirtual/cadastrosala/node_modules/vue-loader/lib/loaders/templateLoader.js","mtime":499162500000},{"path":"/Users/andreruz/Desktop/Marcia/Escapista/EscapeVirtual/cadastrosala/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/andreruz/Desktop/Marcia/Escapista/EscapeVirtual/cadastrosala/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIHJlbmRlciA9IGZ1bmN0aW9uKCkgewogIHZhciBfdm0gPSB0aGlzCiAgdmFyIF9oID0gX3ZtLiRjcmVhdGVFbGVtZW50CiAgdmFyIF9jID0gX3ZtLl9zZWxmLl9jIHx8IF9oCiAgcmV0dXJuIF9jKCJkaXYiLCB7IHN0YXRpY0NsYXNzOiAiY29udGFpbmVyLWZsdWlkIG10LTMiIH0sIFsKICAgICFfdm0uZmluYWwKICAgICAgPyBfYygiZGl2IiwgeyBzdGF0aWNDbGFzczogIm1iLTIgZm9ybS1ncm91cCIgfSwgWwogICAgICAgICAgX2MoImlucHV0IiwgewogICAgICAgICAgICBkaXJlY3RpdmVzOiBbCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbmFtZTogIm1vZGVsIiwKICAgICAgICAgICAgICAgIHJhd05hbWU6ICJ2LW1vZGVsIiwKICAgICAgICAgICAgICAgIHZhbHVlOiBfdm0uaW5pY2lhbCwKICAgICAgICAgICAgICAgIGV4cHJlc3Npb246ICJpbmljaWFsIgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgXSwKICAgICAgICAgICAgc3RhdGljQ2xhc3M6ICJmb3JtLWNoZWNrLWlucHV0IiwKICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICB0eXBlOiAiY2hlY2tib3giLAogICAgICAgICAgICAgIGlkOiBfdm0uaWQgKyAiLmluaWNpYWwiLAogICAgICAgICAgICAgIG5hbWU6IF92bS5pZCArICIuaW5pY2lhbCIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZG9tUHJvcHM6IHsKICAgICAgICAgICAgICBjaGVja2VkOiBBcnJheS5pc0FycmF5KF92bS5pbmljaWFsKQogICAgICAgICAgICAgICAgPyBfdm0uX2koX3ZtLmluaWNpYWwsIG51bGwpID4gLTEKICAgICAgICAgICAgICAgIDogX3ZtLmluaWNpYWwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICBjaGFuZ2U6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgdmFyICQkYSA9IF92bS5pbmljaWFsLAogICAgICAgICAgICAgICAgICAkJGVsID0gJGV2ZW50LnRhcmdldCwKICAgICAgICAgICAgICAgICAgJCRjID0gJCRlbC5jaGVja2VkID8gdHJ1ZSA6IGZhbHNlCiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSgkJGEpKSB7CiAgICAgICAgICAgICAgICAgIHZhciAkJHYgPSBudWxsLAogICAgICAgICAgICAgICAgICAgICQkaSA9IF92bS5faSgkJGEsICQkdikKICAgICAgICAgICAgICAgICAgaWYgKCQkZWwuY2hlY2tlZCkgewogICAgICAgICAgICAgICAgICAgICQkaSA8IDAgJiYgKF92bS5pbmljaWFsID0gJCRhLmNvbmNhdChbJCR2XSkpCiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgJCRpID4gLTEgJiYKICAgICAgICAgICAgICAgICAgICAgIChfdm0uaW5pY2lhbCA9ICQkYQogICAgICAgICAgICAgICAgICAgICAgICAuc2xpY2UoMCwgJCRpKQogICAgICAgICAgICAgICAgICAgICAgICAuY29uY2F0KCQkYS5zbGljZSgkJGkgKyAxKSkpCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIF92bS5pbmljaWFsID0gJCRjCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIF9jKAogICAgICAgICAgICAibGFiZWwiLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6ICJmb3JtLWNoZWNrLWxhYmVsIiwKICAgICAgICAgICAgICBhdHRyczogeyBmb3I6IF92bS5pZCArICIuaW5pY2lhbCIgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBbX3ZtLl92KCIgQ2Vuw6FyaW8gaW5pY2lhbCIpXQogICAgICAgICAgKQogICAgICAgIF0pCiAgICAgIDogX3ZtLl9lKCksCiAgICAhX3ZtLmluaWNpYWwKICAgICAgPyBfYygKICAgICAgICAgICJkaXYiLAogICAgICAgICAgeyBzdGF0aWNDbGFzczogImZvcm0tZ3JvdXAiIH0sCiAgICAgICAgICBbCiAgICAgICAgICAgIF9jKCJsYWJlbCIsIFtfdm0uX3YoIk9yaWdlbSIpXSksCiAgICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgICBfdm0ubGlzdGFJdGVtQ2VuYXJpb3MuZmlsdGVyKF92bS5maWx0cmFySXRlbUNlbmFyaW9zKSwKICAgICAgICAgICAgICBmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX2MoImRpdiIsIHsga2V5OiBpdGVtLmlkICsgIi5vcmlnZW0iIH0sIFsKICAgICAgICAgICAgICAgICAgX2MoImlucHV0IiwgewogICAgICAgICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZm9ybS1jaGVjay1pbnB1dCIsCiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJjaGVja2JveCIsCiAgICAgICAgICAgICAgICAgICAgICBpZDogaXRlbS5pZCArICIub3JpZ2VtIiwKICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0uaWQgKyAiLm9yaWdlbSIKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRvbVByb3BzOiB7CiAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBfdm0udmVyaWZpY2FPcmlnZW1TZWxlY2lvbmFkYShpdGVtLmlkKSwKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLmlkCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBvbjogeyBjaGFuZ2U6IF92bS5hbHRlcmFyT3JpZ2VtIH0KICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgIF9jKAogICAgICAgICAgICAgICAgICAgICJsYWJlbCIsCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6ICJmb3JtLWNoZWNrLWxhYmVsIiwKICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IGZvcjogaXRlbS5pZCArICIub3JpZ2VtIiB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICBfdm0uX3YoCiAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fcygKICAgICAgICAgICAgICAgICAgICAgICAgICAiIFsiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ubm9tZUNlbmFyaW8gKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgIl0gIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnRpcG8gKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAtICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5ub21lSXRlbQogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBdKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgKSwKICAgICAgICAgICAgX3ZtLmxpc3RhSXRlbUNlbmFyaW9zLmZpbHRlcihfdm0uZmlsdHJhckl0ZW1DZW5hcmlvcykubGVuZ3RoID09IDAKICAgICAgICAgICAgICA/IF9jKCJzbWFsbCIsIHsgc3RhdGljQ2xhc3M6ICJmb3JtLXRleHQgdGV4dC1tdXRlZCIgfSwgWwogICAgICAgICAgICAgICAgICBfdm0uX3YoIk5lbmh1bWEgb3DDp8OjbyBkZSBvcmlnZW0gZW5jb250cmFkYS4iKQogICAgICAgICAgICAgICAgXSkKICAgICAgICAgICAgICA6IF92bS5fZSgpCiAgICAgICAgICBdLAogICAgICAgICAgMgogICAgICAgICkKICAgICAgOiBfdm0uX2UoKSwKICAgICFfdm0uaW5pY2lhbCAmJgogICAgX3ZtLmxpc3RhQ2FkZWFkby5sZW5ndGggPT0gMCAmJgogICAgX3ZtLmxpc3RhT2JqZXRvLmxlbmd0aCA9PSAwICYmCiAgICBfdm0ubGlzdGFPYmpldG9SZWNpcGllbnRlLmxlbmd0aCA9PSAwICYmCiAgICBfdm0ubGlzdGFHcnVwb1JlY2lwaWVudGUubGVuZ3RoID09IDAgJiYKICAgIF92bS5saXN0YUNlbmFyaW9GaWxoby5sZW5ndGggPT0gMAogICAgICA/IF9jKCJkaXYiLCB7IHN0YXRpY0NsYXNzOiAiZm9ybS1ncm91cCIgfSwgWwogICAgICAgICAgX2MoImlucHV0IiwgewogICAgICAgICAgICBkaXJlY3RpdmVzOiBbCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbmFtZTogIm1vZGVsIiwKICAgICAgICAgICAgICAgIHJhd05hbWU6ICJ2LW1vZGVsIiwKICAgICAgICAgICAgICAgIHZhbHVlOiBfdm0uZmluYWwsCiAgICAgICAgICAgICAgICBleHByZXNzaW9uOiAiZmluYWwiCiAgICAgICAgICAgICAgfQogICAgICAgICAgICBdLAogICAgICAgICAgICBzdGF0aWNDbGFzczogImZvcm0tY2hlY2staW5wdXQiLAogICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgIHR5cGU6ICJjaGVja2JveCIsCiAgICAgICAgICAgICAgaWQ6IF92bS5pZCArICIuZmluYWwiLAogICAgICAgICAgICAgIG5hbWU6IF92bS5pZCArICIuZmluYWwiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRvbVByb3BzOiB7CiAgICAgICAgICAgICAgY2hlY2tlZDogQXJyYXkuaXNBcnJheShfdm0uZmluYWwpCiAgICAgICAgICAgICAgICA/IF92bS5faShfdm0uZmluYWwsIG51bGwpID4gLTEKICAgICAgICAgICAgICAgIDogX3ZtLmZpbmFsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgY2hhbmdlOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgIHZhciAkJGEgPSBfdm0uZmluYWwsCiAgICAgICAgICAgICAgICAgICQkZWwgPSAkZXZlbnQudGFyZ2V0LAogICAgICAgICAgICAgICAgICAkJGMgPSAkJGVsLmNoZWNrZWQgPyB0cnVlIDogZmFsc2UKICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KCQkYSkpIHsKICAgICAgICAgICAgICAgICAgdmFyICQkdiA9IG51bGwsCiAgICAgICAgICAgICAgICAgICAgJCRpID0gX3ZtLl9pKCQkYSwgJCR2KQogICAgICAgICAgICAgICAgICBpZiAoJCRlbC5jaGVja2VkKSB7CiAgICAgICAgICAgICAgICAgICAgJCRpIDwgMCAmJiAoX3ZtLmZpbmFsID0gJCRhLmNvbmNhdChbJCR2XSkpCiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgJCRpID4gLTEgJiYKICAgICAgICAgICAgICAgICAgICAgIChfdm0uZmluYWwgPSAkJGEuc2xpY2UoMCwgJCRpKS5jb25jYXQoJCRhLnNsaWNlKCQkaSArIDEpKSkKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3ZtLmZpbmFsID0gJCRjCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIF9jKAogICAgICAgICAgICAibGFiZWwiLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6ICJmb3JtLWNoZWNrLWxhYmVsIiwKICAgICAgICAgICAgICBhdHRyczogeyBmb3I6IF92bS5pZCArICIuZmluYWwiIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgW192bS5fdigiIENlbsOhcmlvIGZpbmFsIildCiAgICAgICAgICApCiAgICAgICAgXSkKICAgICAgOiBfdm0uX2UoKSwKICAgIF9jKCJkaXYiLCB7IHN0YXRpY0NsYXNzOiAiZm9ybS1ncm91cCIgfSwgWwogICAgICBfYygibGFiZWwiLCB7IGF0dHJzOiB7IGZvcjogX3ZtLmlkICsgIi5ub21lIiB9IH0sIFsKICAgICAgICBfdm0uX3YoIk5vbWUgZG8gY2Vuw6FyaW8iKQogICAgICBdKSwKICAgICAgX2MoImlucHV0IiwgewogICAgICAgIGRpcmVjdGl2ZXM6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgbmFtZTogIm1vZGVsIiwKICAgICAgICAgICAgcmF3TmFtZTogInYtbW9kZWwiLAogICAgICAgICAgICB2YWx1ZTogX3ZtLm5vbWVDZW5hcmlvLAogICAgICAgICAgICBleHByZXNzaW9uOiAibm9tZUNlbmFyaW8iCiAgICAgICAgICB9LAogICAgICAgICAgeyBuYW1lOiAiZm9jdXMtb24tY3JlYXRlIiwgcmF3TmFtZTogInYtZm9jdXMtb24tY3JlYXRlIiB9CiAgICAgICAgXSwKICAgICAgICBzdGF0aWNDbGFzczogImZvcm0tY29udHJvbCIsCiAgICAgICAgYXR0cnM6IHsgdHlwZTogInRleHQiLCBpZDogX3ZtLmlkICsgIi5ub21lIiwgbmFtZTogX3ZtLmlkICsgIi5ub21lIiB9LAogICAgICAgIGRvbVByb3BzOiB7IHZhbHVlOiBfdm0ubm9tZUNlbmFyaW8gfSwKICAgICAgICBvbjogewogICAgICAgICAga2V5dXA6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICByZXR1cm4gX3ZtLiRlbWl0KCJub21lQ2VuYXJpb0FsdGVyYWRvIiwgewogICAgICAgICAgICAgIGNlbmFyaW9JZDogX3ZtLmlkLAogICAgICAgICAgICAgIG5vbWVDZW5hcmlvOiBfdm0ubm9tZUNlbmFyaW8KICAgICAgICAgICAgfSkKICAgICAgICAgIH0sCiAgICAgICAgICBpbnB1dDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgIGlmICgkZXZlbnQudGFyZ2V0LmNvbXBvc2luZykgewogICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICB9CiAgICAgICAgICAgIF92bS5ub21lQ2VuYXJpbyA9ICRldmVudC50YXJnZXQudmFsdWUKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pCiAgICBdKSwKICAgIF9jKCJkaXYiLCB7IHN0YXRpY0NsYXNzOiAiZm9ybS1ncm91cCIgfSwgWwogICAgICBfYygibGFiZWwiLCB7IGF0dHJzOiB7IGZvcjogX3ZtLmlkICsgIi5pbWFnZW0iIH0gfSwgWwogICAgICAgIF92bS5fdigiSW1hZ2VtIGRvIGNlbsOhcmlvIikKICAgICAgXSksCiAgICAgIF9jKCJpbnB1dCIsIHsKICAgICAgICBzdGF0aWNDbGFzczogImZvcm0tY29udHJvbC1maWxlIiwKICAgICAgICBhdHRyczogewogICAgICAgICAgdHlwZTogImZpbGUiLAogICAgICAgICAgYWNjZXB0OiAiaW1hZ2UvKiIsCiAgICAgICAgICBpZDogX3ZtLmlkICsgIi5pbWFnZW0iLAogICAgICAgICAgbmFtZTogX3ZtLmlkICsgIi5pbWFnZW0iCiAgICAgICAgfSwKICAgICAgICBvbjogeyBjaGFuZ2U6IF92bS5pbWFnZW1DZW5hcmlvQWx0ZXJhZGEgfQogICAgICB9KQogICAgXSksCiAgICAhX3ZtLmZpbmFsCiAgICAgID8gX2MoImRpdiIsIHsgc3RhdGljQ2xhc3M6ICJmb3JtLWdyb3VwIiB9LCBbCiAgICAgICAgICBfYygiaW5wdXQiLCB7CiAgICAgICAgICAgIHN0YXRpY0NsYXNzOiAiYnRuIGJ0bi1wcmltYXJ5IiwKICAgICAgICAgICAgYXR0cnM6IHsgdHlwZTogImJ1dHRvbiIsIHZhbHVlOiAiQWRpY2lvbmFyIGNhZGVhZG8iIH0sCiAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgcmV0dXJuIF92bS5hZGljaW9uYXJDYWRlYWRvKCkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgX2MoImlucHV0IiwgewogICAgICAgICAgICBzdGF0aWNDbGFzczogImJ0biBidG4tcHJpbWFyeSIsCiAgICAgICAgICAgIGF0dHJzOiB7IHR5cGU6ICJidXR0b24iLCB2YWx1ZTogIkFkaWNpb25hciBvYmpldG8iIH0sCiAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgcmV0dXJuIF92bS5hZGljaW9uYXJPYmpldG8oKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBfYygiaW5wdXQiLCB7CiAgICAgICAgICAgIHN0YXRpY0NsYXNzOiAiYnRuIGJ0bi1wcmltYXJ5IiwKICAgICAgICAgICAgYXR0cnM6IHsgdHlwZTogImJ1dHRvbiIsIHZhbHVlOiAiQWRpY2lvbmFyIHJlY2lwaWVudGUgZGUgb2JqZXRvIiB9LAogICAgICAgICAgICBvbjogewogICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBfdm0uYWRpY2lvbmFyT2JqZXRvUmVjaXBpZW50ZSgpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIF9jKCJpbnB1dCIsIHsKICAgICAgICAgICAgc3RhdGljQ2xhc3M6ICJidG4gYnRuLXByaW1hcnkiLAogICAgICAgICAgICBhdHRyczogeyB0eXBlOiAiYnV0dG9uIiwgdmFsdWU6ICJBZGljaW9uYXIgZ3J1cG8gZGUgcmVjaXBpZW50ZSIgfSwKICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmFkaWNpb25hckdydXBvUmVjaXBpZW50ZSgpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIF9jKCJpbnB1dCIsIHsKICAgICAgICAgICAgc3RhdGljQ2xhc3M6ICJidG4gYnRuLXByaW1hcnkiLAogICAgICAgICAgICBhdHRyczogeyB0eXBlOiAiYnV0dG9uIiwgdmFsdWU6ICJBZGljaW9uYXIgY2Vuw6FyaW8gZmlsaG8iIH0sCiAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgcmV0dXJuIF92bS5hZGljaW9uYXJDZW5hcmlvRmlsaG8oKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICBdKQogICAgICA6IF92bS5fZSgpLAogICAgX2MoImRpdiIsIHsgc3RhdGljQ2xhc3M6ICJmb3JtLWdyb3VwIGNlbmFyaW8tYXJlYSIgfSwgWwogICAgICBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5pZCAmJgogICAgICBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby50aXBvICE9PSBfdm0udGlwb0l0ZW0uR1JVUE9fUkVDSVBJRU5URQogICAgICAgID8gX2MoImRpdiIsIHsgc3RhdGljQ2xhc3M6ICJhcmVhLW1hcmNhLXRhbWFuaG8iIH0sIFsKICAgICAgICAgICAgX2MoImRpdiIsIHsKICAgICAgICAgICAgICBkaXJlY3RpdmVzOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIG5hbWU6ICJkcmFnZ2VkIiwKICAgICAgICAgICAgICAgICAgcmF3TmFtZTogInYtZHJhZ2dlZCIsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBfdm0uYWx0ZXJhclRhbWFuaG9JdGVtQ2VuYXJpbywKICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjogImFsdGVyYXJUYW1hbmhvSXRlbUNlbmFyaW8iCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICBzdGF0aWNDbGFzczogIm1hcmNhLXRhbWFuaG8iLAogICAgICAgICAgICAgIHN0eWxlOgogICAgICAgICAgICAgICAgImxlZnQ6IiArCiAgICAgICAgICAgICAgICAoKF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9YCiAgICAgICAgICAgICAgICAgID8gX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ucG9zaWNhb1gKICAgICAgICAgICAgICAgICAgOiAwKSAtCiAgICAgICAgICAgICAgICAgIF92bS5tYXJjYVRhbWFuaG9Qb3NpY2FvUGFkcmFvKSArCiAgICAgICAgICAgICAgICAicHg7IiArCiAgICAgICAgICAgICAgICAidG9wOiIgKwogICAgICAgICAgICAgICAgKChfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5wb3NpY2FvWQogICAgICAgICAgICAgICAgICA/IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9ZCiAgICAgICAgICAgICAgICAgIDogMCkgLQogICAgICAgICAgICAgICAgICBfdm0ubWFyY2FUYW1hbmhvUG9zaWNhb1BhZHJhbykgKwogICAgICAgICAgICAgICAgInB4OyIsCiAgICAgICAgICAgICAgYXR0cnM6IHsgaWQ6ICJtdGwiIH0KICAgICAgICAgICAgfSksCiAgICAgICAgICAgIF9jKCJkaXYiLCB7CiAgICAgICAgICAgICAgZGlyZWN0aXZlczogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBuYW1lOiAiZHJhZ2dlZCIsCiAgICAgICAgICAgICAgICAgIHJhd05hbWU6ICJ2LWRyYWdnZWQiLAogICAgICAgICAgICAgICAgICB2YWx1ZTogX3ZtLmFsdGVyYXJUYW1hbmhvSXRlbUNlbmFyaW8sCiAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246ICJhbHRlcmFyVGFtYW5ob0l0ZW1DZW5hcmlvIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6ICJtYXJjYS10YW1hbmhvIiwKICAgICAgICAgICAgICBzdHlsZToKICAgICAgICAgICAgICAgICJsZWZ0OiIgKwogICAgICAgICAgICAgICAgKChfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5wb3NpY2FvWAogICAgICAgICAgICAgICAgICA/IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9YCiAgICAgICAgICAgICAgICAgIDogMCkgKwogICAgICAgICAgICAgICAgICAoX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ubGFyZ3VyYQogICAgICAgICAgICAgICAgICAgID8gX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ubGFyZ3VyYQogICAgICAgICAgICAgICAgICAgIDogX3ZtLml0ZW1UYW1hbmhvUGFkcmFvKSAvCiAgICAgICAgICAgICAgICAgICAgMiAtCiAgICAgICAgICAgICAgICAgIF92bS5tYXJjYVRhbWFuaG9Qb3NpY2FvUGFkcmFvKSArCiAgICAgICAgICAgICAgICAicHg7IiArCiAgICAgICAgICAgICAgICAidG9wOiIgKwogICAgICAgICAgICAgICAgKChfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5wb3NpY2FvWQogICAgICAgICAgICAgICAgICA/IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9ZCiAgICAgICAgICAgICAgICAgIDogMCkgLQogICAgICAgICAgICAgICAgICBfdm0ubWFyY2FUYW1hbmhvUG9zaWNhb1BhZHJhbykgKwogICAgICAgICAgICAgICAgInB4OyIsCiAgICAgICAgICAgICAgYXR0cnM6IHsgaWQ6ICJtdGMiIH0KICAgICAgICAgICAgfSksCiAgICAgICAgICAgIF9jKCJkaXYiLCB7CiAgICAgICAgICAgICAgZGlyZWN0aXZlczogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBuYW1lOiAiZHJhZ2dlZCIsCiAgICAgICAgICAgICAgICAgIHJhd05hbWU6ICJ2LWRyYWdnZWQiLAogICAgICAgICAgICAgICAgICB2YWx1ZTogX3ZtLmFsdGVyYXJUYW1hbmhvSXRlbUNlbmFyaW8sCiAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246ICJhbHRlcmFyVGFtYW5ob0l0ZW1DZW5hcmlvIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6ICJtYXJjYS10YW1hbmhvIiwKICAgICAgICAgICAgICBzdHlsZToKICAgICAgICAgICAgICAgICJsZWZ0OiIgKwogICAgICAgICAgICAgICAgKChfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5wb3NpY2FvWAogICAgICAgICAgICAgICAgICA/IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9YCiAgICAgICAgICAgICAgICAgIDogMCkgKwogICAgICAgICAgICAgICAgICAoX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ubGFyZ3VyYQogICAgICAgICAgICAgICAgICAgID8gX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ubGFyZ3VyYQogICAgICAgICAgICAgICAgICAgIDogX3ZtLml0ZW1UYW1hbmhvUGFkcmFvKSAtCiAgICAgICAgICAgICAgICAgIF92bS5tYXJjYVRhbWFuaG9Qb3NpY2FvUGFkcmFvKSArCiAgICAgICAgICAgICAgICAicHg7IiArCiAgICAgICAgICAgICAgICAidG9wOiIgKwogICAgICAgICAgICAgICAgKChfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5wb3NpY2FvWQogICAgICAgICAgICAgICAgICA/IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9ZCiAgICAgICAgICAgICAgICAgIDogMCkgLQogICAgICAgICAgICAgICAgICBfdm0ubWFyY2FUYW1hbmhvUG9zaWNhb1BhZHJhbykgKwogICAgICAgICAgICAgICAgInB4OyIsCiAgICAgICAgICAgICAgYXR0cnM6IHsgaWQ6ICJtdHIiIH0KICAgICAgICAgICAgfSksCiAgICAgICAgICAgIF9jKCJkaXYiLCB7CiAgICAgICAgICAgICAgZGlyZWN0aXZlczogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBuYW1lOiAiZHJhZ2dlZCIsCiAgICAgICAgICAgICAgICAgIHJhd05hbWU6ICJ2LWRyYWdnZWQiLAogICAgICAgICAgICAgICAgICB2YWx1ZTogX3ZtLmFsdGVyYXJUYW1hbmhvSXRlbUNlbmFyaW8sCiAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246ICJhbHRlcmFyVGFtYW5ob0l0ZW1DZW5hcmlvIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6ICJtYXJjYS10YW1hbmhvIiwKICAgICAgICAgICAgICBzdHlsZToKICAgICAgICAgICAgICAgICJsZWZ0OiIgKwogICAgICAgICAgICAgICAgKChfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5wb3NpY2FvWAogICAgICAgICAgICAgICAgICA/IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9YCiAgICAgICAgICAgICAgICAgIDogMCkgLQogICAgICAgICAgICAgICAgICBfdm0ubWFyY2FUYW1hbmhvUG9zaWNhb1BhZHJhbykgKwogICAgICAgICAgICAgICAgInB4OyIgKwogICAgICAgICAgICAgICAgInRvcDoiICsKICAgICAgICAgICAgICAgICgoX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ucG9zaWNhb1kKICAgICAgICAgICAgICAgICAgPyBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5wb3NpY2FvWQogICAgICAgICAgICAgICAgICA6IDApICsKICAgICAgICAgICAgICAgICAgKF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmFsdHVyYQogICAgICAgICAgICAgICAgICAgID8gX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uYWx0dXJhCiAgICAgICAgICAgICAgICAgICAgOiBfdm0uaXRlbVRhbWFuaG9QYWRyYW8pIC0KICAgICAgICAgICAgICAgICAgX3ZtLm1hcmNhVGFtYW5ob1Bvc2ljYW9QYWRyYW8pICsKICAgICAgICAgICAgICAgICJweDsiLAogICAgICAgICAgICAgIGF0dHJzOiB7IGlkOiAibWJsIiB9CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBfYygiZGl2IiwgewogICAgICAgICAgICAgIGRpcmVjdGl2ZXM6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgbmFtZTogImRyYWdnZWQiLAogICAgICAgICAgICAgICAgICByYXdOYW1lOiAidi1kcmFnZ2VkIiwKICAgICAgICAgICAgICAgICAgdmFsdWU6IF92bS5hbHRlcmFyVGFtYW5ob0l0ZW1DZW5hcmlvLAogICAgICAgICAgICAgICAgICBleHByZXNzaW9uOiAiYWx0ZXJhclRhbWFuaG9JdGVtQ2VuYXJpbyIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiAibWFyY2EtdGFtYW5obyIsCiAgICAgICAgICAgICAgc3R5bGU6CiAgICAgICAgICAgICAgICAibGVmdDoiICsKICAgICAgICAgICAgICAgICgoX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ucG9zaWNhb1gKICAgICAgICAgICAgICAgICAgPyBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5wb3NpY2FvWAogICAgICAgICAgICAgICAgICA6IDApICsKICAgICAgICAgICAgICAgICAgKF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmxhcmd1cmEKICAgICAgICAgICAgICAgICAgICA/IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmxhcmd1cmEKICAgICAgICAgICAgICAgICAgICA6IF92bS5pdGVtVGFtYW5ob1BhZHJhbykgLwogICAgICAgICAgICAgICAgICAgIDIgLQogICAgICAgICAgICAgICAgICBfdm0ubWFyY2FUYW1hbmhvUG9zaWNhb1BhZHJhbykgKwogICAgICAgICAgICAgICAgInB4OyIgKwogICAgICAgICAgICAgICAgInRvcDoiICsKICAgICAgICAgICAgICAgICgoX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ucG9zaWNhb1kKICAgICAgICAgICAgICAgICAgPyBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5wb3NpY2FvWQogICAgICAgICAgICAgICAgICA6IDApICsKICAgICAgICAgICAgICAgICAgKF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmFsdHVyYQogICAgICAgICAgICAgICAgICAgID8gX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uYWx0dXJhCiAgICAgICAgICAgICAgICAgICAgOiBfdm0uaXRlbVRhbWFuaG9QYWRyYW8pIC0KICAgICAgICAgICAgICAgICAgX3ZtLm1hcmNhVGFtYW5ob1Bvc2ljYW9QYWRyYW8pICsKICAgICAgICAgICAgICAgICJweDsiLAogICAgICAgICAgICAgIGF0dHJzOiB7IGlkOiAibWJjIiB9CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBfYygiZGl2IiwgewogICAgICAgICAgICAgIGRpcmVjdGl2ZXM6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgbmFtZTogImRyYWdnZWQiLAogICAgICAgICAgICAgICAgICByYXdOYW1lOiAidi1kcmFnZ2VkIiwKICAgICAgICAgICAgICAgICAgdmFsdWU6IF92bS5hbHRlcmFyVGFtYW5ob0l0ZW1DZW5hcmlvLAogICAgICAgICAgICAgICAgICBleHByZXNzaW9uOiAiYWx0ZXJhclRhbWFuaG9JdGVtQ2VuYXJpbyIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiAibWFyY2EtdGFtYW5obyIsCiAgICAgICAgICAgICAgc3R5bGU6CiAgICAgICAgICAgICAgICAibGVmdDoiICsKICAgICAgICAgICAgICAgICgoX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ucG9zaWNhb1gKICAgICAgICAgICAgICAgICAgPyBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5wb3NpY2FvWAogICAgICAgICAgICAgICAgICA6IDApICsKICAgICAgICAgICAgICAgICAgKF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmxhcmd1cmEKICAgICAgICAgICAgICAgICAgICA/IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmxhcmd1cmEKICAgICAgICAgICAgICAgICAgICA6IF92bS5pdGVtVGFtYW5ob1BhZHJhbykgLQogICAgICAgICAgICAgICAgICBfdm0ubWFyY2FUYW1hbmhvUG9zaWNhb1BhZHJhbykgKwogICAgICAgICAgICAgICAgInB4OyIgKwogICAgICAgICAgICAgICAgInRvcDoiICsKICAgICAgICAgICAgICAgICgoX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ucG9zaWNhb1kKICAgICAgICAgICAgICAgICAgPyBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5wb3NpY2FvWQogICAgICAgICAgICAgICAgICA6IDApICsKICAgICAgICAgICAgICAgICAgKF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmFsdHVyYQogICAgICAgICAgICAgICAgICAgID8gX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uYWx0dXJhCiAgICAgICAgICAgICAgICAgICAgOiBfdm0uaXRlbVRhbWFuaG9QYWRyYW8pIC0KICAgICAgICAgICAgICAgICAgX3ZtLm1hcmNhVGFtYW5ob1Bvc2ljYW9QYWRyYW8pICsKICAgICAgICAgICAgICAgICJweDsiLAogICAgICAgICAgICAgIGF0dHJzOiB7IGlkOiAibWJyIiB9CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBfYygiZGl2IiwgewogICAgICAgICAgICAgIGRpcmVjdGl2ZXM6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgbmFtZTogImRyYWdnZWQiLAogICAgICAgICAgICAgICAgICByYXdOYW1lOiAidi1kcmFnZ2VkIiwKICAgICAgICAgICAgICAgICAgdmFsdWU6IF92bS5hbHRlcmFyVGFtYW5ob0l0ZW1DZW5hcmlvLAogICAgICAgICAgICAgICAgICBleHByZXNzaW9uOiAiYWx0ZXJhclRhbWFuaG9JdGVtQ2VuYXJpbyIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiAibWFyY2EtdGFtYW5obyIsCiAgICAgICAgICAgICAgc3R5bGU6CiAgICAgICAgICAgICAgICAibGVmdDoiICsKICAgICAgICAgICAgICAgICgoX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ucG9zaWNhb1gKICAgICAgICAgICAgICAgICAgPyBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5wb3NpY2FvWAogICAgICAgICAgICAgICAgICA6IDApIC0KICAgICAgICAgICAgICAgICAgX3ZtLm1hcmNhVGFtYW5ob1Bvc2ljYW9QYWRyYW8pICsKICAgICAgICAgICAgICAgICJweDsiICsKICAgICAgICAgICAgICAgICJ0b3A6IiArCiAgICAgICAgICAgICAgICAoKF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9ZCiAgICAgICAgICAgICAgICAgID8gX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ucG9zaWNhb1kKICAgICAgICAgICAgICAgICAgOiAwKSArCiAgICAgICAgICAgICAgICAgIChfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5hbHR1cmEKICAgICAgICAgICAgICAgICAgICA/IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmFsdHVyYQogICAgICAgICAgICAgICAgICAgIDogX3ZtLml0ZW1UYW1hbmhvUGFkcmFvKSAvCiAgICAgICAgICAgICAgICAgICAgMiAtCiAgICAgICAgICAgICAgICAgIF92bS5tYXJjYVRhbWFuaG9Qb3NpY2FvUGFkcmFvKSArCiAgICAgICAgICAgICAgICAicHg7IiwKICAgICAgICAgICAgICBhdHRyczogeyBpZDogIm1jbCIgfQogICAgICAgICAgICB9KSwKICAgICAgICAgICAgX2MoImRpdiIsIHsKICAgICAgICAgICAgICBkaXJlY3RpdmVzOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIG5hbWU6ICJkcmFnZ2VkIiwKICAgICAgICAgICAgICAgICAgcmF3TmFtZTogInYtZHJhZ2dlZCIsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBfdm0uYWx0ZXJhclRhbWFuaG9JdGVtQ2VuYXJpbywKICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjogImFsdGVyYXJUYW1hbmhvSXRlbUNlbmFyaW8iCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICBzdGF0aWNDbGFzczogIm1hcmNhLXRhbWFuaG8iLAogICAgICAgICAgICAgIHN0eWxlOgogICAgICAgICAgICAgICAgImxlZnQ6IiArCiAgICAgICAgICAgICAgICAoKF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9YCiAgICAgICAgICAgICAgICAgID8gX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ucG9zaWNhb1gKICAgICAgICAgICAgICAgICAgOiAwKSArCiAgICAgICAgICAgICAgICAgIChfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5sYXJndXJhCiAgICAgICAgICAgICAgICAgICAgPyBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5sYXJndXJhCiAgICAgICAgICAgICAgICAgICAgOiBfdm0uaXRlbVRhbWFuaG9QYWRyYW8pIC0KICAgICAgICAgICAgICAgICAgX3ZtLm1hcmNhVGFtYW5ob1Bvc2ljYW9QYWRyYW8pICsKICAgICAgICAgICAgICAgICJweDsiICsKICAgICAgICAgICAgICAgICJ0b3A6IiArCiAgICAgICAgICAgICAgICAoKF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9ZCiAgICAgICAgICAgICAgICAgID8gX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ucG9zaWNhb1kKICAgICAgICAgICAgICAgICAgOiAwKSArCiAgICAgICAgICAgICAgICAgIChfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5hbHR1cmEKICAgICAgICAgICAgICAgICAgICA/IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmFsdHVyYQogICAgICAgICAgICAgICAgICAgIDogX3ZtLml0ZW1UYW1hbmhvUGFkcmFvKSAvCiAgICAgICAgICAgICAgICAgICAgMiAtCiAgICAgICAgICAgICAgICAgIF92bS5tYXJjYVRhbWFuaG9Qb3NpY2FvUGFkcmFvKSArCiAgICAgICAgICAgICAgICAicHg7IiwKICAgICAgICAgICAgICBhdHRyczogeyBpZDogIm1jciIgfQogICAgICAgICAgICB9KQogICAgICAgICAgXSkKICAgICAgICA6IF92bS5fZSgpLAogICAgICBfYygKICAgICAgICAiZGl2IiwKICAgICAgICB7IHN0YXRpY0NsYXNzOiAiYXJlYS1pdGVtcyIsIGF0dHJzOiB7IGlkOiBfdm0uaWQgKyAiLml0ZW1zIiB9IH0sCiAgICAgICAgWwogICAgICAgICAgX3ZtLl9sKF92bS5saXN0YUNhZGVhZG8sIGZ1bmN0aW9uKGNhZGVhZG8pIHsKICAgICAgICAgICAgcmV0dXJuIF9jKCJkaXYiLCB7CiAgICAgICAgICAgICAgZGlyZWN0aXZlczogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBuYW1lOiAiZHJhZ2dlZCIsCiAgICAgICAgICAgICAgICAgIHJhd05hbWU6ICJ2LWRyYWdnZWQiLAogICAgICAgICAgICAgICAgICB2YWx1ZTogX3ZtLmFsdGVyYXJQb3NpY2FvSXRlbUNlbmFyaW8sCiAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246ICJhbHRlcmFyUG9zaWNhb0l0ZW1DZW5hcmlvIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAga2V5OiBjYWRlYWRvLmlkICsgIi5pdGVtIiwKICAgICAgICAgICAgICBzdGF0aWNDbGFzczogImNhZGVhZG8iLAogICAgICAgICAgICAgIGNsYXNzOiB7CiAgICAgICAgICAgICAgICBzZWxlY2lvbmFkbzogY2FkZWFkby5pZCA9PSBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5pZAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgc3R5bGU6CiAgICAgICAgICAgICAgICAoY2FkZWFkby5sYXJndXJhID8gIndpZHRoOiIgKyBjYWRlYWRvLmxhcmd1cmEgKyAicHg7IiA6ICIiKSArCiAgICAgICAgICAgICAgICAoY2FkZWFkby5hbHR1cmEgPyAiaGVpZ2h0OiIgKyBjYWRlYWRvLmFsdHVyYSArICJweDsiIDogIiIpICsKICAgICAgICAgICAgICAgIChjYWRlYWRvLnBvc2ljYW9YID8gImxlZnQ6IiArIGNhZGVhZG8ucG9zaWNhb1ggKyAicHg7IiA6ICIiKSArCiAgICAgICAgICAgICAgICAoY2FkZWFkby5wb3NpY2FvWSA/ICJ0b3A6IiArIGNhZGVhZG8ucG9zaWNhb1kgKyAicHg7IiA6ICIiKSwKICAgICAgICAgICAgICBhdHRyczogeyB0aXRsZTogY2FkZWFkby5ub21lID8gY2FkZWFkby5ub21lIDogY2FkZWFkby5pZCB9LAogICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICBtb3VzZWRvd246IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCkKICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5zZWxlY2lvbmFySXRlbUNlbmFyaW8oY2FkZWFkbykKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICB9KSwKICAgICAgICAgIF92bS5fbChfdm0ubGlzdGFPYmpldG8sIGZ1bmN0aW9uKG9iamV0bykgewogICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZGlyZWN0aXZlczogWwogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogImRyYWdnZWQiLAogICAgICAgICAgICAgICAgICAgIHJhd05hbWU6ICJ2LWRyYWdnZWQiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBfdm0uYWx0ZXJhclBvc2ljYW9JdGVtQ2VuYXJpbywKICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uOiAiYWx0ZXJhclBvc2ljYW9JdGVtQ2VuYXJpbyIKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIGtleTogb2JqZXRvLmlkICsgIi5pdGVtIiwKICAgICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiAib2JqZXRvIiwKICAgICAgICAgICAgICAgIGNsYXNzOiB7CiAgICAgICAgICAgICAgICAgIHNlbGVjaW9uYWRvOiBvYmpldG8uaWQgPT0gX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uaWQKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzdHlsZToKICAgICAgICAgICAgICAgICAgKG9iamV0by5sYXJndXJhID8gIndpZHRoOiIgKyBvYmpldG8ubGFyZ3VyYSArICJweDsiIDogIiIpICsKICAgICAgICAgICAgICAgICAgKG9iamV0by5hbHR1cmEgPyAiaGVpZ2h0OiIgKyBvYmpldG8uYWx0dXJhICsgInB4OyIgOiAiIikgKwogICAgICAgICAgICAgICAgICAob2JqZXRvLnBvc2ljYW9YID8gImxlZnQ6IiArIG9iamV0by5wb3NpY2FvWCArICJweDsiIDogIiIpICsKICAgICAgICAgICAgICAgICAgKG9iamV0by5wb3NpY2FvWSA/ICJ0b3A6IiArIG9iamV0by5wb3NpY2FvWSArICJweDsiIDogIiIpLAogICAgICAgICAgICAgICAgYXR0cnM6IHsgdGl0bGU6IG9iamV0by5ub21lID8gb2JqZXRvLm5vbWUgOiBvYmpldG8uaWQgfSwKICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgIG1vdXNlZG93bjogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5zZWxlY2lvbmFySXRlbUNlbmFyaW8ob2JqZXRvKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICBfYygiZGl2IiksCiAgICAgICAgICAgICAgICBvYmpldG8uaW1hZ2VtCiAgICAgICAgICAgICAgICAgID8gX2MoImltZyIsIHsgYXR0cnM6IHsgc3JjOiBvYmpldG8uaW1hZ2VtIH0gfSkKICAgICAgICAgICAgICAgICAgOiBfdm0uX2UoKQogICAgICAgICAgICAgIF0KICAgICAgICAgICAgKQogICAgICAgICAgfSksCiAgICAgICAgICBfdm0uX2woX3ZtLmxpc3RhT2JqZXRvUmVjaXBpZW50ZSwgZnVuY3Rpb24ob2JqZXRvUmVjaXBpZW50ZSkgewogICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZGlyZWN0aXZlczogWwogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogImRyYWdnZWQiLAogICAgICAgICAgICAgICAgICAgIHJhd05hbWU6ICJ2LWRyYWdnZWQiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBfdm0uYWx0ZXJhclBvc2ljYW9JdGVtQ2VuYXJpbywKICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uOiAiYWx0ZXJhclBvc2ljYW9JdGVtQ2VuYXJpbyIKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIGtleTogb2JqZXRvUmVjaXBpZW50ZS5pZCArICIuaXRlbSIsCiAgICAgICAgICAgICAgICBzdGF0aWNDbGFzczogIm9iamV0by1yZWNpcGllbnRlIiwKICAgICAgICAgICAgICAgIGNsYXNzOiB7CiAgICAgICAgICAgICAgICAgIHNlbGVjaW9uYWRvOgogICAgICAgICAgICAgICAgICAgIG9iamV0b1JlY2lwaWVudGUuaWQgPT0gX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uaWQKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzdHlsZToKICAgICAgICAgICAgICAgICAgKG9iamV0b1JlY2lwaWVudGUubGFyZ3VyYQogICAgICAgICAgICAgICAgICAgID8gIndpZHRoOiIgKyBvYmpldG9SZWNpcGllbnRlLmxhcmd1cmEgKyAicHg7IgogICAgICAgICAgICAgICAgICAgIDogIiIpICsKICAgICAgICAgICAgICAgICAgKG9iamV0b1JlY2lwaWVudGUuYWx0dXJhCiAgICAgICAgICAgICAgICAgICAgPyAiaGVpZ2h0OiIgKyBvYmpldG9SZWNpcGllbnRlLmFsdHVyYSArICJweDsiCiAgICAgICAgICAgICAgICAgICAgOiAiIikgKwogICAgICAgICAgICAgICAgICAob2JqZXRvUmVjaXBpZW50ZS5wb3NpY2FvWAogICAgICAgICAgICAgICAgICAgID8gImxlZnQ6IiArIG9iamV0b1JlY2lwaWVudGUucG9zaWNhb1ggKyAicHg7IgogICAgICAgICAgICAgICAgICAgIDogIiIpICsKICAgICAgICAgICAgICAgICAgKG9iamV0b1JlY2lwaWVudGUucG9zaWNhb1kKICAgICAgICAgICAgICAgICAgICA/ICJ0b3A6IiArIG9iamV0b1JlY2lwaWVudGUucG9zaWNhb1kgKyAicHg7IgogICAgICAgICAgICAgICAgICAgIDogIiIpLAogICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgdGl0bGU6IG9iamV0b1JlY2lwaWVudGUubm9tZQogICAgICAgICAgICAgICAgICAgID8gb2JqZXRvUmVjaXBpZW50ZS5ub21lCiAgICAgICAgICAgICAgICAgICAgOiBvYmpldG9SZWNpcGllbnRlLmlkCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgbW91c2Vkb3duOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLnNlbGVjaW9uYXJJdGVtQ2VuYXJpbyhvYmpldG9SZWNpcGllbnRlKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICBfYygiZGl2IiksCiAgICAgICAgICAgICAgICBvYmpldG9SZWNpcGllbnRlLm9iamV0b3MubGVuZ3RoCiAgICAgICAgICAgICAgICAgID8gX2MoImltZyIsIHsKICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogX3ZtLnJldG9ybmFySW1hZ2VtT2JqZXRvKAogICAgICAgICAgICAgICAgICAgICAgICAgIG9iamV0b1JlY2lwaWVudGUub2JqZXRvc1swXQogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgOiBfdm0uX2UoKQogICAgICAgICAgICAgIF0KICAgICAgICAgICAgKQogICAgICAgICAgfSksCiAgICAgICAgICBfdm0uX2woX3ZtLmxpc3RhQ2VuYXJpb0ZpbGhvLCBmdW5jdGlvbihjZW5hcmlvRmlsaG8pIHsKICAgICAgICAgICAgcmV0dXJuIF9jKCJkaXYiLCB7CiAgICAgICAgICAgICAgZGlyZWN0aXZlczogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBuYW1lOiAiZHJhZ2dlZCIsCiAgICAgICAgICAgICAgICAgIHJhd05hbWU6ICJ2LWRyYWdnZWQiLAogICAgICAgICAgICAgICAgICB2YWx1ZTogX3ZtLmFsdGVyYXJQb3NpY2FvSXRlbUNlbmFyaW8sCiAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246ICJhbHRlcmFyUG9zaWNhb0l0ZW1DZW5hcmlvIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAga2V5OiBjZW5hcmlvRmlsaG8uaWQgKyAiLml0ZW0iLAogICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiAiY2VuYXJpby1maWxobyIsCiAgICAgICAgICAgICAgY2xhc3M6IHsKICAgICAgICAgICAgICAgIHNlbGVjaW9uYWRvOiBjZW5hcmlvRmlsaG8uaWQgPT0gX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uaWQKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHN0eWxlOgogICAgICAgICAgICAgICAgKGNlbmFyaW9GaWxoby5sYXJndXJhCiAgICAgICAgICAgICAgICAgID8gIndpZHRoOiIgKyBjZW5hcmlvRmlsaG8ubGFyZ3VyYSArICJweDsiCiAgICAgICAgICAgICAgICAgIDogIiIpICsKICAgICAgICAgICAgICAgIChjZW5hcmlvRmlsaG8uYWx0dXJhCiAgICAgICAgICAgICAgICAgID8gImhlaWdodDoiICsgY2VuYXJpb0ZpbGhvLmFsdHVyYSArICJweDsiCiAgICAgICAgICAgICAgICAgIDogIiIpICsKICAgICAgICAgICAgICAgIChjZW5hcmlvRmlsaG8ucG9zaWNhb1gKICAgICAgICAgICAgICAgICAgPyAibGVmdDoiICsgY2VuYXJpb0ZpbGhvLnBvc2ljYW9YICsgInB4OyIKICAgICAgICAgICAgICAgICAgOiAiIikgKwogICAgICAgICAgICAgICAgKGNlbmFyaW9GaWxoby5wb3NpY2FvWQogICAgICAgICAgICAgICAgICA/ICJ0b3A6IiArIGNlbmFyaW9GaWxoby5wb3NpY2FvWSArICJweDsiCiAgICAgICAgICAgICAgICAgIDogIiIpLAogICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogY2VuYXJpb0ZpbGhvLm5vbWUgPyBjZW5hcmlvRmlsaG8ubm9tZSA6IGNlbmFyaW9GaWxoby5pZAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgIG1vdXNlZG93bjogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKQogICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLnNlbGVjaW9uYXJJdGVtQ2VuYXJpbyhjZW5hcmlvRmlsaG8pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgfSkKICAgICAgICBdLAogICAgICAgIDIKICAgICAgKSwKICAgICAgX3ZtLmltYWdlbUNlbmFyaW8KICAgICAgICA/IF9jKCJpbWciLCB7CiAgICAgICAgICAgIGF0dHJzOiB7IHNyYzogX3ZtLmltYWdlbUNlbmFyaW8gfSwKICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICBtb3VzZWRvd246IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgcmV0dXJuIF92bS5kZXNlbGVjaW9uYXJJdGVtQ2VuYXJpbygpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIDogX3ZtLl9lKCksCiAgICAgICFfdm0uaW1hZ2VtQ2VuYXJpbwogICAgICAgID8gX2MoImRpdiIsIHsKICAgICAgICAgICAgc3RhdGljQ2xhc3M6ICJhcmVhLWZ1bmRvIiwKICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICBtb3VzZWRvd246IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgcmV0dXJuIF92bS5kZXNlbGVjaW9uYXJJdGVtQ2VuYXJpbygpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIDogX3ZtLl9lKCkKICAgIF0pLAogICAgX2MoImRpdiIsIHsgc3RhdGljQ2xhc3M6ICJmb3JtLWdyb3VwIGl0ZW5zLWNlbmFyaW8iIH0sIFsKICAgICAgX2MoCiAgICAgICAgInVsIiwKICAgICAgICBbCiAgICAgICAgICBfdm0uX2woX3ZtLmxpc3RhQ2FkZWFkbywgZnVuY3Rpb24oY2FkZWFkbykgewogICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgImxpIiwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBrZXk6IGNhZGVhZG8uaWQgKyAiLml0ZW0tbGlzdCIsCiAgICAgICAgICAgICAgICBjbGFzczogewogICAgICAgICAgICAgICAgICBzZWxlY2lvbmFkbzogY2FkZWFkby5pZCA9PSBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5pZAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgX2MoCiAgICAgICAgICAgICAgICAgICJhIiwKICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IGhyZWY6ICIjIiB9LAogICAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uc2VsZWNpb25hckl0ZW1DZW5hcmlvKGNhZGVhZG8pCiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgX3ZtLl92KAogICAgICAgICAgICAgICAgICAgICAgX3ZtLl9zKAogICAgICAgICAgICAgICAgICAgICAgICBjYWRlYWRvLnRpcG8gKwogICAgICAgICAgICAgICAgICAgICAgICAgICIgLSAiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAoY2FkZWFkby5ub21lID09PSAiIiA/IGNhZGVhZG8uaWQgOiBjYWRlYWRvLm5vbWUpCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgXQogICAgICAgICAgICApCiAgICAgICAgICB9KSwKICAgICAgICAgIF92bS5fbChfdm0ubGlzdGFPYmpldG8sIGZ1bmN0aW9uKG9iamV0bykgewogICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgImxpIiwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBrZXk6IG9iamV0by5pZCArICIuaXRlbS1saXN0IiwKICAgICAgICAgICAgICAgIGNsYXNzOiB7CiAgICAgICAgICAgICAgICAgIHNlbGVjaW9uYWRvOiBvYmpldG8uaWQgPT0gX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uaWQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgIF9jKAogICAgICAgICAgICAgICAgICAiYSIsCiAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBhdHRyczogeyBocmVmOiAiIyIgfSwKICAgICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLnNlbGVjaW9uYXJJdGVtQ2VuYXJpbyhvYmpldG8pCiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgX3ZtLl92KAogICAgICAgICAgICAgICAgICAgICAgX3ZtLl9zKAogICAgICAgICAgICAgICAgICAgICAgICBvYmpldG8udGlwbyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgIiAtICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgIChvYmpldG8ubm9tZSA9PT0gIiIgPyBvYmpldG8uaWQgOiBvYmpldG8ubm9tZSkKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICBdCiAgICAgICAgICAgICkKICAgICAgICAgIH0pLAogICAgICAgICAgX3ZtLl9sKF92bS5saXN0YU9iamV0b1JlY2lwaWVudGUsIGZ1bmN0aW9uKG9iamV0b1JlY2lwaWVudGUpIHsKICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICJsaSIsCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAga2V5OiBvYmpldG9SZWNpcGllbnRlLmlkICsgIi5pdGVtLWxpc3QiLAogICAgICAgICAgICAgICAgY2xhc3M6IHsKICAgICAgICAgICAgICAgICAgc2VsZWNpb25hZG86CiAgICAgICAgICAgICAgICAgICAgb2JqZXRvUmVjaXBpZW50ZS5pZCA9PSBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5pZAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgX2MoCiAgICAgICAgICAgICAgICAgICJhIiwKICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IGhyZWY6ICIjIiB9LAogICAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uc2VsZWNpb25hckl0ZW1DZW5hcmlvKG9iamV0b1JlY2lwaWVudGUpCiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgX3ZtLl92KAogICAgICAgICAgICAgICAgICAgICAgX3ZtLl9zKAogICAgICAgICAgICAgICAgICAgICAgICBvYmpldG9SZWNpcGllbnRlLnRpcG8gKwogICAgICAgICAgICAgICAgICAgICAgICAgICIgLSAiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAob2JqZXRvUmVjaXBpZW50ZS5ub21lID09PSAiIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBvYmpldG9SZWNpcGllbnRlLmlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG9iamV0b1JlY2lwaWVudGUubm9tZSkKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICBdCiAgICAgICAgICAgICkKICAgICAgICAgIH0pLAogICAgICAgICAgX3ZtLl9sKF92bS5saXN0YUdydXBvUmVjaXBpZW50ZSwgZnVuY3Rpb24oZ3J1cG9SZWNpcGllbnRlKSB7CiAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAibGkiLAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGtleTogZ3J1cG9SZWNpcGllbnRlLmlkICsgIi5pdGVtLWxpc3QiLAogICAgICAgICAgICAgICAgY2xhc3M6IHsKICAgICAgICAgICAgICAgICAgc2VsZWNpb25hZG86CiAgICAgICAgICAgICAgICAgICAgZ3J1cG9SZWNpcGllbnRlLmlkID09IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmlkCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICBfYygKICAgICAgICAgICAgICAgICAgImEiLAogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgaHJlZjogIiMiIH0sCiAgICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5zZWxlY2lvbmFySXRlbUNlbmFyaW8oZ3J1cG9SZWNpcGllbnRlKQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgIF92bS5fdigKICAgICAgICAgICAgICAgICAgICAgIF92bS5fcygKICAgICAgICAgICAgICAgICAgICAgICAgZ3J1cG9SZWNpcGllbnRlLnRpcG8gKwogICAgICAgICAgICAgICAgICAgICAgICAgICIgLSAiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAoZ3J1cG9SZWNpcGllbnRlLm5vbWUgPT09ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGdydXBvUmVjaXBpZW50ZS5pZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBncnVwb1JlY2lwaWVudGUubm9tZSkKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICBdCiAgICAgICAgICAgICkKICAgICAgICAgIH0pLAogICAgICAgICAgX3ZtLl9sKF92bS5saXN0YUNlbmFyaW9GaWxobywgZnVuY3Rpb24oY2VuYXJpb0ZpbGhvKSB7CiAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAibGkiLAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGtleTogY2VuYXJpb0ZpbGhvLmlkICsgIi5pdGVtLWxpc3QiLAogICAgICAgICAgICAgICAgY2xhc3M6IHsKICAgICAgICAgICAgICAgICAgc2VsZWNpb25hZG86IGNlbmFyaW9GaWxoby5pZCA9PSBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5pZAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgX2MoCiAgICAgICAgICAgICAgICAgICJhIiwKICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IGhyZWY6ICIjIiB9LAogICAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uc2VsZWNpb25hckl0ZW1DZW5hcmlvKGNlbmFyaW9GaWxobykKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICBfdm0uX3YoCiAgICAgICAgICAgICAgICAgICAgICBfdm0uX3MoCiAgICAgICAgICAgICAgICAgICAgICAgIGNlbmFyaW9GaWxoby50aXBvICsKICAgICAgICAgICAgICAgICAgICAgICAgICAiIC0gIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgKGNlbmFyaW9GaWxoby5ub21lID09PSAiIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBjZW5hcmlvRmlsaG8uaWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogY2VuYXJpb0ZpbGhvLm5vbWUpCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgXQogICAgICAgICAgICApCiAgICAgICAgICB9KQogICAgICAgIF0sCiAgICAgICAgMgogICAgICApCiAgICBdKSwKICAgIF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnRpcG8gPT0gX3ZtLnRpcG9JdGVtLkNBREVBRE8KICAgICAgPyBfYygiZGl2IiwgeyBzdGF0aWNDbGFzczogImZvcm0tZ3JvdXAiIH0sIFsKICAgICAgICAgIF9jKCJkaXYiLCB7IHN0YXRpY0NsYXNzOiAiZm9ybS1ncm91cCIgfSwgWwogICAgICAgICAgICBfYygibGFiZWwiLCB7IGF0dHJzOiB7IGZvcjogImNhZGVhZG8ubm9tZSIgfSB9LCBbCiAgICAgICAgICAgICAgX3ZtLl92KCJOb21lIGRvIGNhZGVhZG8iKQogICAgICAgICAgICBdKSwKICAgICAgICAgICAgX2MoImlucHV0IiwgewogICAgICAgICAgICAgIGRpcmVjdGl2ZXM6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgbmFtZTogIm1vZGVsIiwKICAgICAgICAgICAgICAgICAgcmF3TmFtZTogInYtbW9kZWwiLAogICAgICAgICAgICAgICAgICB2YWx1ZTogX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ubm9tZSwKICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjogIml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ubm9tZSIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZm9ybS1jb250cm9sIiwKICAgICAgICAgICAgICBhdHRyczogeyB0eXBlOiAidGV4dCIsIGlkOiAiY2FkZWFkby5ub21lIiwgbmFtZTogImNhZGVhZG8ubm9tZSIgfSwKICAgICAgICAgICAgICBkb21Qcm9wczogeyB2YWx1ZTogX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ubm9tZSB9LAogICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICBrZXl1cDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uJGVtaXQoIm5vbWVJdGVtQWx0ZXJhZG8iLCB7CiAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5pZCwKICAgICAgICAgICAgICAgICAgICBub21lSXRlbTogX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ubm9tZQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGlucHV0OiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgaWYgKCRldmVudC50YXJnZXQuY29tcG9zaW5nKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgX3ZtLiRzZXQoCiAgICAgICAgICAgICAgICAgICAgX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8sCiAgICAgICAgICAgICAgICAgICAgIm5vbWUiLAogICAgICAgICAgICAgICAgICAgICRldmVudC50YXJnZXQudmFsdWUKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgIF0pLAogICAgICAgICAgX2MoImRpdiIsIHsgc3RhdGljQ2xhc3M6ICJmb3JtLWdyb3VwIiB9LCBbCiAgICAgICAgICAgIF9jKCJsYWJlbCIsIHsgYXR0cnM6IHsgZm9yOiAiY2FkZWFkby5pbWFnZW1Gb2NvIiB9IH0sIFsKICAgICAgICAgICAgICBfdm0uX3YoIkltYWdlbSBkZSBmb2NvIikKICAgICAgICAgICAgXSksCiAgICAgICAgICAgIF9jKCJpbnB1dCIsIHsKICAgICAgICAgICAgICBzdGF0aWNDbGFzczogImZvcm0tY29udHJvbC1maWxlIiwKICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgdHlwZTogImZpbGUiLAogICAgICAgICAgICAgICAgYWNjZXB0OiAiaW1hZ2UvKiIsCiAgICAgICAgICAgICAgICBpZDogImNhZGVhZG8uaW1hZ2VtRm9jbyIsCiAgICAgICAgICAgICAgICBuYW1lOiAiY2FkZWFkby5pbWFnZW1Gb2NvIgogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgb246IHsgY2hhbmdlOiBfdm0uaW1hZ2VtRm9jb0NhZGVhZG9BbHRlcmFkYSB9CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5pbWFnZW1Gb2NvCiAgICAgICAgICAgICAgPyBfYygiaW1nIiwgewogICAgICAgICAgICAgICAgICBzdGF0aWNDbGFzczogImltYWdlbS1wcmV2aWV3IiwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgc3JjOiBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5pbWFnZW1Gb2NvIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgOiBfdm0uX2UoKQogICAgICAgICAgXSksCiAgICAgICAgICBfYygiZGl2IiwgeyBzdGF0aWNDbGFzczogImZvcm0tZ3JvdXAiIH0sIFsKICAgICAgICAgICAgX2MoImxhYmVsIiwgeyBhdHRyczogeyBmb3I6ICJjYWRlYWRvLnRpcG9DYWRlYWRvIiB9IH0sIFsKICAgICAgICAgICAgICBfdm0uX3YoIlRpcG8gZGUgY2FkZWFkbyIpCiAgICAgICAgICAgIF0pLAogICAgICAgICAgICBfYygKICAgICAgICAgICAgICAic2VsZWN0IiwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBkaXJlY3RpdmVzOiBbCiAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAibW9kZWwiLAogICAgICAgICAgICAgICAgICAgIHJhd05hbWU6ICJ2LW1vZGVsIiwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8udGlwb0NhZGVhZG8sCiAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjogIml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8udGlwb0NhZGVhZG8iCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICBpZDogImNhZGVhZG8udGlwb0NhZGVhZG8iLAogICAgICAgICAgICAgICAgICBuYW1lOiAiY2FkZWFkby50aXBvQ2FkZWFkbyIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICBjaGFuZ2U6IFsKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciAkJHNlbGVjdGVkVmFsID0gQXJyYXkucHJvdG90eXBlLmZpbHRlcgogICAgICAgICAgICAgICAgICAgICAgICAuY2FsbCgkZXZlbnQudGFyZ2V0Lm9wdGlvbnMsIGZ1bmN0aW9uKG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gby5zZWxlY3RlZAogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uKG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsID0gIl92YWx1ZSIgaW4gbyA/IG8uX3ZhbHVlIDogby52YWx1ZQogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWwKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgIF92bS4kc2V0KAogICAgICAgICAgICAgICAgICAgICAgICBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpbywKICAgICAgICAgICAgICAgICAgICAgICAgInRpcG9DYWRlYWRvIiwKICAgICAgICAgICAgICAgICAgICAgICAgJGV2ZW50LnRhcmdldC5tdWx0aXBsZQogICAgICAgICAgICAgICAgICAgICAgICAgID8gJCRzZWxlY3RlZFZhbAogICAgICAgICAgICAgICAgICAgICAgICAgIDogJCRzZWxlY3RlZFZhbFswXQogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgX3ZtLmFsdGVyYXJPcGNvZXNWYWxvcmVzVGlwb0NhZGVhZG8KICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgX2MoCiAgICAgICAgICAgICAgICAgICJvcHRpb24iLAogICAgICAgICAgICAgICAgICB7IGRvbVByb3BzOiB7IHZhbHVlOiBfdm0udGlwb0NhZGVhZG8uTlVNRVJJQ08gfSB9LAogICAgICAgICAgICAgICAgICBbX3ZtLl92KCJOdW3DqXJpY28iKV0KICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBfYygib3B0aW9uIiwgeyBkb21Qcm9wczogeyB2YWx1ZTogX3ZtLnRpcG9DYWRlYWRvLkxFVFJBIH0gfSwgWwogICAgICAgICAgICAgICAgICBfdm0uX3YoIkxldHJhIikKICAgICAgICAgICAgICAgIF0pLAogICAgICAgICAgICAgICAgX2MoIm9wdGlvbiIsIHsgZG9tUHJvcHM6IHsgdmFsdWU6IF92bS50aXBvQ2FkZWFkby5TRVRBIH0gfSwgWwogICAgICAgICAgICAgICAgICBfdm0uX3YoIlNldGEiKQogICAgICAgICAgICAgICAgXSksCiAgICAgICAgICAgICAgICBfYygib3B0aW9uIiwgeyBkb21Qcm9wczogeyB2YWx1ZTogX3ZtLnRpcG9DYWRlYWRvLkNPUiB9IH0sIFsKICAgICAgICAgICAgICAgICAgX3ZtLl92KCJDb3IiKQogICAgICAgICAgICAgICAgXSksCiAgICAgICAgICAgICAgICBfYygKICAgICAgICAgICAgICAgICAgIm9wdGlvbiIsCiAgICAgICAgICAgICAgICAgIHsgZG9tUHJvcHM6IHsgdmFsdWU6IF92bS50aXBvQ2FkZWFkby5DVVNUT01JWkFETyB9IH0sCiAgICAgICAgICAgICAgICAgIFtfdm0uX3YoIkN1c3RvbWl6YWRvIildCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgXQogICAgICAgICAgICApCiAgICAgICAgICBdKSwKICAgICAgICAgIF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnRpcG9DYWRlYWRvID09IF92bS50aXBvQ2FkZWFkby5DT1IKICAgICAgICAgICAgPyBfYygKICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgeyBzdGF0aWNDbGFzczogImZvcm0tZ3JvdXAiIH0sCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJsYWJlbCIsIFsKICAgICAgICAgICAgICAgICAgICBfdm0uX3YoIk9ww6fDtWVzIGRlIHZhbG9yZXMgcGFyYSBjYWRhIGTDrWdpdG8gZGEgc2VuaGEiKQogICAgICAgICAgICAgICAgICBdKSwKICAgICAgICAgICAgICAgICAgX2MoIkNvbG9yUGlja2VyIiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTUwLAogICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxNTAsCiAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICBzdGFydENvbG9yOiAiI2ZmMDAwMCIKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIG9uOiB7IGNvbG9yQ2hhbmdlOiBfdm0uc2VsZWNpb25hckNvck9wY29lc1ZhbG9yZXMgfQogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgX2MoImlucHV0IiwgewogICAgICAgICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiAiYnRuIGJ0bi1zZWNvbmRhcnkiLAogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IHR5cGU6ICJidXR0b24iLCB2YWx1ZTogIkFkaWNpb25hciBjb3IiIH0sCiAgICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5hZGljaW9uYXJPcGNhb1ZhbG9yKCkKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICBfYygKICAgICAgICAgICAgICAgICAgICAidWwiLAogICAgICAgICAgICAgICAgICAgIF92bS5fbChfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5vcGNvZXNWYWxvcmVzLCBmdW5jdGlvbigKICAgICAgICAgICAgICAgICAgICAgIG9wY2FvQ29yLAogICAgICAgICAgICAgICAgICAgICAgaQogICAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgICAgICAgICAibGkiLAogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiAiY2FkZWFkby5vcGNhb0NvciIgKyBpLAogICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiAiYmFja2dyb3VuZC1jb2xvcjoiICsgb3BjYW9Db3IKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fdigiICIgKyBfdm0uX3Mob3BjYW9Db3IpICsgIiAiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBfYygiaW5wdXQiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNDbGFzczogImJ0biBidG4tc2Vjb25kYXJ5IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IHR5cGU6ICJidXR0b24iLCB2YWx1ZTogIlJlbW92ZXIgY29yIiB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ucmVtb3Zlck9wY2FvVmFsb3Iob3BjYW9Db3IpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgMAogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgOiBfdm0uX2UoKSwKICAgICAgICAgIF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnRpcG9DYWRlYWRvID09IF92bS50aXBvQ2FkZWFkby5DVVNUT01JWkFETwogICAgICAgICAgICA/IF9jKCJkaXYiLCB7IHN0YXRpY0NsYXNzOiAiZm9ybS1ncm91cCIgfSwgWwogICAgICAgICAgICAgICAgX2MoImxhYmVsIiwgWwogICAgICAgICAgICAgICAgICBfdm0uX3YoIk9ww6fDtWVzIGRlIHZhbG9yZXMgcGFyYSBjYWRhIGTDrWdpdG8gZGEgc2VuaGEiKQogICAgICAgICAgICAgICAgXSksCiAgICAgICAgICAgICAgICBfYygiaW5wdXQiLCB7CiAgICAgICAgICAgICAgICAgIGRpcmVjdGl2ZXM6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAibW9kZWwiLAogICAgICAgICAgICAgICAgICAgICAgcmF3TmFtZTogInYtbW9kZWwiLAogICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IF92bS5vcGNhb1ZhbG9yQWRpY2lvbmFyLAogICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjogIm9wY2FvVmFsb3JBZGljaW9uYXIiCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICBzdGF0aWNDbGFzczogImZvcm0tY29udHJvbCIsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IHR5cGU6ICJ0ZXh0IiB9LAogICAgICAgICAgICAgICAgICBkb21Qcm9wczogeyB2YWx1ZTogX3ZtLm9wY2FvVmFsb3JBZGljaW9uYXIgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBpbnB1dDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoJGV2ZW50LnRhcmdldC5jb21wb3NpbmcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBfdm0ub3BjYW9WYWxvckFkaWNpb25hciA9ICRldmVudC50YXJnZXQudmFsdWUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgX2MoImlucHV0IiwgewogICAgICAgICAgICAgICAgICBzdGF0aWNDbGFzczogImJ0biBidG4tc2Vjb25kYXJ5IiwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgdHlwZTogImJ1dHRvbiIsIHZhbHVlOiAiQWRpY2lvbmFyIG9ww6fDo28iIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5hZGljaW9uYXJPcGNhb1ZhbG9yKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgX2MoCiAgICAgICAgICAgICAgICAgICJ1bCIsCiAgICAgICAgICAgICAgICAgIF92bS5fbChfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5vcGNvZXNWYWxvcmVzLCBmdW5jdGlvbigKICAgICAgICAgICAgICAgICAgICBvcGNhb0N1c3RvbWl6YWRhLAogICAgICAgICAgICAgICAgICAgIGkKICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jKCJsaSIsIHsga2V5OiAiY2FkZWFkby5vcGNhb0N1c3RvbWl6YWRhIiArIGkgfSwgWwogICAgICAgICAgICAgICAgICAgICAgX3ZtLl92KCIgIiArIF92bS5fcyhvcGNhb0N1c3RvbWl6YWRhKSArICIgIiksCiAgICAgICAgICAgICAgICAgICAgICBfYygiaW5wdXQiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiAiYnRuIGJ0bi1zZWNvbmRhcnkiLAogICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogeyB0eXBlOiAiYnV0dG9uIiwgdmFsdWU6ICJSZW1vdmVyIG9ww6fDo28iIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5yZW1vdmVyT3BjYW9WYWxvcihvcGNhb0N1c3RvbWl6YWRhKQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICBdKQogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgMAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIF0pCiAgICAgICAgICAgIDogX3ZtLl9lKCksCiAgICAgICAgICBfYygiZGl2IiwgeyBzdGF0aWNDbGFzczogImZvcm0tZ3JvdXAiIH0sIFsKICAgICAgICAgICAgX2MoImxhYmVsIiwgeyBhdHRyczogeyBmb3I6ICJjYWRlYWRvLnF0ZERpZ2l0b3NTZW5oYSIgfSB9LCBbCiAgICAgICAgICAgICAgX3ZtLl92KCJRdWFudGlkYWRlIGRlIGTDrWdpdG9zIGRhIHNlbmhhIikKICAgICAgICAgICAgXSksCiAgICAgICAgICAgIF9jKCJpbnB1dCIsIHsKICAgICAgICAgICAgICBkaXJlY3RpdmVzOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIG5hbWU6ICJtb2RlbCIsCiAgICAgICAgICAgICAgICAgIHJhd05hbWU6ICJ2LW1vZGVsLm51bWJlciIsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5xdGREaWdpdG9zU2VuaGEsCiAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246ICJpdGVtU2VsZWNpb25hZG9DZW5hcmlvLnF0ZERpZ2l0b3NTZW5oYSIsCiAgICAgICAgICAgICAgICAgIG1vZGlmaWVyczogeyBudW1iZXI6IHRydWUgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6ICJmb3JtLWNvbnRyb2wiLAogICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICB0eXBlOiAibnVtYmVyIiwKICAgICAgICAgICAgICAgIGlkOiAiY2FkZWFkby5xdGREaWdpdG9zU2VuaGEiLAogICAgICAgICAgICAgICAgbmFtZTogImNhZGVhZG8ucXRkRGlnaXRvc1NlbmhhIiwKICAgICAgICAgICAgICAgIG1pbjogMwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZG9tUHJvcHM6IHsgdmFsdWU6IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnF0ZERpZ2l0b3NTZW5oYSB9LAogICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICBjaGFuZ2U6IF92bS5hbHRlcmFyUXRkRGlnaXRvc1NlbmhhQ2FkZWFkbywKICAgICAgICAgICAgICAgIGlucHV0OiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgaWYgKCRldmVudC50YXJnZXQuY29tcG9zaW5nKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgX3ZtLiRzZXQoCiAgICAgICAgICAgICAgICAgICAgX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8sCiAgICAgICAgICAgICAgICAgICAgInF0ZERpZ2l0b3NTZW5oYSIsCiAgICAgICAgICAgICAgICAgICAgX3ZtLl9uKCRldmVudC50YXJnZXQudmFsdWUpCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBibHVyOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS4kZm9yY2VVcGRhdGUoKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgIF0pLAogICAgICAgICAgX2MoImRpdiIsIHsgc3RhdGljQ2xhc3M6ICJmb3JtLWdyb3VwIiB9LCBbCiAgICAgICAgICAgIF9jKCJsYWJlbCIsIFtfdm0uX3YoIlNlbmhhIildKSwKICAgICAgICAgICAgX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8udGlwb0NhZGVhZG8gIT0gX3ZtLnRpcG9DYWRlYWRvLkNPUgogICAgICAgICAgICAgID8gX2MoCiAgICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgICBfdm0uX2woX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uc2VuaGEsIGZ1bmN0aW9uKAogICAgICAgICAgICAgICAgICAgIGRpZ2l0b1NlbmhhLAogICAgICAgICAgICAgICAgICAgIGkKICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgICAgICAgInNlbGVjdCIsCiAgICAgICAgICAgICAgICAgICAgICB7IGtleTogImNhZGVhZG8uc2VuaGEiICsgaSB9LAogICAgICAgICAgICAgICAgICAgICAgX3ZtLl9sKF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLm9wY29lc1ZhbG9yZXMsIGZ1bmN0aW9uKAogICAgICAgICAgICAgICAgICAgICAgICBvcGNhbywKICAgICAgICAgICAgICAgICAgICAgICAgagogICAgICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICAgICAgICAgICAib3B0aW9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICJjYWRlYWRvLnNlbmhhIiArIGkgKyAiLm9wY2FvIiArIGosCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb21Qcm9wczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogb3BjYW8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBvcGNhbyA9PSBkaWdpdG9TZW5oYQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgW192bS5fdihfdm0uX3Mob3BjYW8pKV0KICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAwCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgMAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIDogX3ZtLl9lKCksCiAgICAgICAgICAgIF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnRpcG9DYWRlYWRvID09IF92bS50aXBvQ2FkZWFkby5DT1IKICAgICAgICAgICAgICA/IF9jKAogICAgICAgICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgICAgICAgX3ZtLl9sKF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnNlbmhhLCBmdW5jdGlvbigKICAgICAgICAgICAgICAgICAgICBkaWdpdG9TZW5oYSwKICAgICAgICAgICAgICAgICAgICBpCiAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICJjYWRlYWRvLnNlbmhhIiArIGksCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiAic2VsZWN0LWN1c3RvbWl6YWRvIgogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgX2MoImlucHV0IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiAiYmFja2dyb3VuZC1jb2xvcjoiICsgZGlnaXRvU2VuaGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgdHlwZTogImJ1dHRvbiIsIHZhbHVlOiBkaWdpdG9TZW5oYSB9LAogICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uYWJyaXJPcGNvZXNTZWxlY3RDdXN0b21pemFkbygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2FkZWFkby5zZW5oYSIgKyBpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBfYygKICAgICAgICAgICAgICAgICAgICAgICAgICAidWwiLAogICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGl2ZXM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJzaG93IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXdOYW1lOiAidi1zaG93IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjYWRlYWRvLnNlbmhhIiArIGkgPT0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5zZWxlY3RDdXN0b21pemFkb0FiZXJ0bywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIidjYWRlYWRvLnNlbmhhJyArIGkgPT0gc2VsZWN0Q3VzdG9taXphZG9BYmVydG8iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLm9wY29lc1ZhbG9yZXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihvcGNhbywgaikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImxpIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICJjYWRlYWRvLnNlbmhhIiArIGkgKyAiLm9wY2FvIiArIGosCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogeyBzZWxlY2lvbmFkbzogb3BjYW8gPT0gZGlnaXRvU2VuaGEgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiAiYmFja2dyb3VuZC1jb2xvcjoiICsgb3BjYW8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5zZWxlY2lvbmFyT3BjYW9TZWxlY3RDdXN0b21pemFkbygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGNhbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW192bS5fdihfdm0uX3Mob3BjYW8pKV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAgICAgMAogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgMAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIDogX3ZtLl9lKCkKICAgICAgICAgIF0pLAogICAgICAgICAgX2MoImRpdiIsIHsgc3RhdGljQ2xhc3M6ICJmb3JtLWdyb3VwIiB9LCBbCiAgICAgICAgICAgIF9jKCJsYWJlbCIsIHsgYXR0cnM6IHsgZm9yOiAiY2FkZWFkby5sYXJndXJhIiB9IH0sIFsKICAgICAgICAgICAgICBfdm0uX3YoIkxhcmd1cmEiKQogICAgICAgICAgICBdKSwKICAgICAgICAgICAgX2MoImlucHV0IiwgewogICAgICAgICAgICAgIGRpcmVjdGl2ZXM6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgbmFtZTogIm1vZGVsIiwKICAgICAgICAgICAgICAgICAgcmF3TmFtZTogInYtbW9kZWwubnVtYmVyIiwKICAgICAgICAgICAgICAgICAgdmFsdWU6IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmxhcmd1cmEsCiAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246ICJpdGVtU2VsZWNpb25hZG9DZW5hcmlvLmxhcmd1cmEiLAogICAgICAgICAgICAgICAgICBtb2RpZmllcnM6IHsgbnVtYmVyOiB0cnVlIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZm9ybS1jb250cm9sIiwKICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgdHlwZTogIm51bWJlciIsCiAgICAgICAgICAgICAgICBpZDogImNhZGVhZG8ubGFyZ3VyYSIsCiAgICAgICAgICAgICAgICBuYW1lOiAiY2FkZWFkby5sYXJndXJhIiwKICAgICAgICAgICAgICAgIG1pbjogX3ZtLml0ZW1UYW1hbmhvTWluaW1vCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBkb21Qcm9wczogeyB2YWx1ZTogX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ubGFyZ3VyYSB9LAogICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICBpbnB1dDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgIGlmICgkZXZlbnQudGFyZ2V0LmNvbXBvc2luZykgewogICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIF92bS4kc2V0KAogICAgICAgICAgICAgICAgICAgIF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLAogICAgICAgICAgICAgICAgICAgICJsYXJndXJhIiwKICAgICAgICAgICAgICAgICAgICBfdm0uX24oJGV2ZW50LnRhcmdldC52YWx1ZSkKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJsdXI6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLiRmb3JjZVVwZGF0ZSgpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgXSksCiAgICAgICAgICBfYygiZGl2IiwgeyBzdGF0aWNDbGFzczogImZvcm0tZ3JvdXAiIH0sIFsKICAgICAgICAgICAgX2MoImxhYmVsIiwgeyBhdHRyczogeyBmb3I6ICJjYWRlYWRvLmFsdHVyYSIgfSB9LCBbCiAgICAgICAgICAgICAgX3ZtLl92KCJBbHR1cmEiKQogICAgICAgICAgICBdKSwKICAgICAgICAgICAgX2MoImlucHV0IiwgewogICAgICAgICAgICAgIGRpcmVjdGl2ZXM6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgbmFtZTogIm1vZGVsIiwKICAgICAgICAgICAgICAgICAgcmF3TmFtZTogInYtbW9kZWwubnVtYmVyIiwKICAgICAgICAgICAgICAgICAgdmFsdWU6IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmFsdHVyYSwKICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjogIml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uYWx0dXJhIiwKICAgICAgICAgICAgICAgICAgbW9kaWZpZXJzOiB7IG51bWJlcjogdHJ1ZSB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICBzdGF0aWNDbGFzczogImZvcm0tY29udHJvbCIsCiAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgIHR5cGU6ICJudW1iZXIiLAogICAgICAgICAgICAgICAgaWQ6ICJjYWRlYWRvLmFsdHVyYSIsCiAgICAgICAgICAgICAgICBuYW1lOiAiY2FkZWFkby5hbHR1cmEiLAogICAgICAgICAgICAgICAgbWluOiBfdm0uaXRlbVRhbWFuaG9NaW5pbW8KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGRvbVByb3BzOiB7IHZhbHVlOiBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5hbHR1cmEgfSwKICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgaW5wdXQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICBpZiAoJGV2ZW50LnRhcmdldC5jb21wb3NpbmcpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBfdm0uJHNldCgKICAgICAgICAgICAgICAgICAgICBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpbywKICAgICAgICAgICAgICAgICAgICAiYWx0dXJhIiwKICAgICAgICAgICAgICAgICAgICBfdm0uX24oJGV2ZW50LnRhcmdldC52YWx1ZSkKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJsdXI6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLiRmb3JjZVVwZGF0ZSgpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgXSksCiAgICAgICAgICBfYygiZGl2IiwgeyBzdGF0aWNDbGFzczogImZvcm0tZ3JvdXAiIH0sIFsKICAgICAgICAgICAgX2MoImxhYmVsIiwgeyBhdHRyczogeyBmb3I6ICJjYWRlYWRvLnBvc2ljYW9YIiB9IH0sIFsKICAgICAgICAgICAgICBfdm0uX3YoIlBvc2ljYW8gWCIpCiAgICAgICAgICAgIF0pLAogICAgICAgICAgICBfYygiaW5wdXQiLCB7CiAgICAgICAgICAgICAgZGlyZWN0aXZlczogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBuYW1lOiAibW9kZWwiLAogICAgICAgICAgICAgICAgICByYXdOYW1lOiAidi1tb2RlbC5udW1iZXIiLAogICAgICAgICAgICAgICAgICB2YWx1ZTogX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ucG9zaWNhb1gsCiAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246ICJpdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9YIiwKICAgICAgICAgICAgICAgICAgbW9kaWZpZXJzOiB7IG51bWJlcjogdHJ1ZSB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICBzdGF0aWNDbGFzczogImZvcm0tY29udHJvbCIsCiAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgIHR5cGU6ICJudW1iZXIiLAogICAgICAgICAgICAgICAgaWQ6ICJjYWRlYWRvLnBvc2ljYW9YIiwKICAgICAgICAgICAgICAgIG5hbWU6ICJjYWRlYWRvLnBvc2ljYW9YIgogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZG9tUHJvcHM6IHsgdmFsdWU6IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9YIH0sCiAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgIGlucHV0OiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgaWYgKCRldmVudC50YXJnZXQuY29tcG9zaW5nKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgX3ZtLiRzZXQoCiAgICAgICAgICAgICAgICAgICAgX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8sCiAgICAgICAgICAgICAgICAgICAgInBvc2ljYW9YIiwKICAgICAgICAgICAgICAgICAgICBfdm0uX24oJGV2ZW50LnRhcmdldC52YWx1ZSkKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJsdXI6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLiRmb3JjZVVwZGF0ZSgpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgXSksCiAgICAgICAgICBfYygiZGl2IiwgeyBzdGF0aWNDbGFzczogImZvcm0tZ3JvdXAiIH0sIFsKICAgICAgICAgICAgX2MoImxhYmVsIiwgeyBhdHRyczogeyBmb3I6ICJjYWRlYWRvLnBvc2ljYW9ZIiB9IH0sIFsKICAgICAgICAgICAgICBfdm0uX3YoIlBvc2ljYW8gWSIpCiAgICAgICAgICAgIF0pLAogICAgICAgICAgICBfYygiaW5wdXQiLCB7CiAgICAgICAgICAgICAgZGlyZWN0aXZlczogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBuYW1lOiAibW9kZWwiLAogICAgICAgICAgICAgICAgICByYXdOYW1lOiAidi1tb2RlbC5udW1iZXIiLAogICAgICAgICAgICAgICAgICB2YWx1ZTogX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ucG9zaWNhb1ksCiAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246ICJpdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9ZIiwKICAgICAgICAgICAgICAgICAgbW9kaWZpZXJzOiB7IG51bWJlcjogdHJ1ZSB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICBzdGF0aWNDbGFzczogImZvcm0tY29udHJvbCIsCiAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgIHR5cGU6ICJudW1iZXIiLAogICAgICAgICAgICAgICAgaWQ6ICJjYWRlYWRvLnBvc2ljYW9ZIiwKICAgICAgICAgICAgICAgIG5hbWU6ICJjYWRlYWRvLnBvc2ljYW9ZIgogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZG9tUHJvcHM6IHsgdmFsdWU6IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9ZIH0sCiAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgIGlucHV0OiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgaWYgKCRldmVudC50YXJnZXQuY29tcG9zaW5nKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgX3ZtLiRzZXQoCiAgICAgICAgICAgICAgICAgICAgX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8sCiAgICAgICAgICAgICAgICAgICAgInBvc2ljYW9ZIiwKICAgICAgICAgICAgICAgICAgICBfdm0uX24oJGV2ZW50LnRhcmdldC52YWx1ZSkKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJsdXI6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLiRmb3JjZVVwZGF0ZSgpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgXSksCiAgICAgICAgICAhX3ZtLmV4aXN0ZUNlbmFyaW9EZXN0aW5vSXRlbUNlbmFyaW9zKF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmlkKQogICAgICAgICAgICA/IF9jKCJpbnB1dCIsIHsKICAgICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiAiYnRuIGJ0bi1zZWNvbmRhcnkiLAogICAgICAgICAgICAgICAgYXR0cnM6IHsgdHlwZTogImJ1dHRvbiIsIHZhbHVlOiAiUmVtb3ZlciBjYWRlYWRvIiB9LAogICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ucmVtb3ZlckNhZGVhZG8oX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uaWQpCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KQogICAgICAgICAgICA6IF92bS5fZSgpCiAgICAgICAgXSkKICAgICAgOiBfdm0uX2UoKSwKICAgIF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnRpcG8gPT0gX3ZtLnRpcG9JdGVtLk9CSkVUTwogICAgICA/IF9jKCJkaXYiLCB7IHN0YXRpY0NsYXNzOiAiZm9ybS1ncm91cCIgfSwgWwogICAgICAgICAgX2MoImRpdiIsIHsgc3RhdGljQ2xhc3M6ICJmb3JtLWdyb3VwIiB9LCBbCiAgICAgICAgICAgIF9jKCJsYWJlbCIsIHsgYXR0cnM6IHsgZm9yOiAib2JqZXRvLm5vbWUiIH0gfSwgWwogICAgICAgICAgICAgIF92bS5fdigiTm9tZSBkbyBvYmpldG8iKQogICAgICAgICAgICBdKSwKICAgICAgICAgICAgX2MoImlucHV0IiwgewogICAgICAgICAgICAgIGRpcmVjdGl2ZXM6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgbmFtZTogIm1vZGVsIiwKICAgICAgICAgICAgICAgICAgcmF3TmFtZTogInYtbW9kZWwiLAogICAgICAgICAgICAgICAgICB2YWx1ZTogX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ubm9tZSwKICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjogIml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ubm9tZSIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZm9ybS1jb250cm9sIiwKICAgICAgICAgICAgICBhdHRyczogeyB0eXBlOiAidGV4dCIsIGlkOiAib2JqZXRvLm5vbWUiLCBuYW1lOiAib2JqZXRvLm5vbWUiIH0sCiAgICAgICAgICAgICAgZG9tUHJvcHM6IHsgdmFsdWU6IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLm5vbWUgfSwKICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAga2V5dXA6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLiRlbWl0KCJub21lSXRlbUFsdGVyYWRvIiwgewogICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uaWQsCiAgICAgICAgICAgICAgICAgICAgbm9tZUl0ZW06IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLm5vbWUsCiAgICAgICAgICAgICAgICAgICAgdGlwbzogX3ZtLnRpcG9JdGVtLk9CSkVUTwogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGlucHV0OiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgaWYgKCRldmVudC50YXJnZXQuY29tcG9zaW5nKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgX3ZtLiRzZXQoCiAgICAgICAgICAgICAgICAgICAgX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8sCiAgICAgICAgICAgICAgICAgICAgIm5vbWUiLAogICAgICAgICAgICAgICAgICAgICRldmVudC50YXJnZXQudmFsdWUKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgIF0pLAogICAgICAgICAgX2MoImRpdiIsIHsgc3RhdGljQ2xhc3M6ICJmb3JtLWdyb3VwIiB9LCBbCiAgICAgICAgICAgIF9jKCJsYWJlbCIsIHsgYXR0cnM6IHsgZm9yOiAib2JqZXRvLmltYWdlbSIgfSB9LCBbCiAgICAgICAgICAgICAgX3ZtLl92KCJJbWFnZW0iKQogICAgICAgICAgICBdKSwKICAgICAgICAgICAgX2MoImlucHV0IiwgewogICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZm9ybS1jb250cm9sLWZpbGUiLAogICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICB0eXBlOiAiZmlsZSIsCiAgICAgICAgICAgICAgICBhY2NlcHQ6ICJpbWFnZS8qIiwKICAgICAgICAgICAgICAgIGlkOiAib2JqZXRvLmltYWdlbSIsCiAgICAgICAgICAgICAgICBuYW1lOiAib2JqZXRvLmltYWdlbSIKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIG9uOiB7IGNoYW5nZTogX3ZtLmltYWdlbU9iamV0b0FsdGVyYWRhIH0KICAgICAgICAgICAgfSksCiAgICAgICAgICAgIF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmltYWdlbQogICAgICAgICAgICAgID8gX2MoImltZyIsIHsKICAgICAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6ICJpbWFnZW0tcHJldmlldyIsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IHNyYzogX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uaW1hZ2VtIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgOiBfdm0uX2UoKQogICAgICAgICAgXSksCiAgICAgICAgICBfYygiZGl2IiwgeyBzdGF0aWNDbGFzczogImZvcm0tZ3JvdXAiIH0sIFsKICAgICAgICAgICAgX2MoImxhYmVsIiwgeyBhdHRyczogeyBmb3I6ICJvYmpldG8ubGFyZ3VyYSIgfSB9LCBbCiAgICAgICAgICAgICAgX3ZtLl92KCJMYXJndXJhIikKICAgICAgICAgICAgXSksCiAgICAgICAgICAgIF9jKCJpbnB1dCIsIHsKICAgICAgICAgICAgICBkaXJlY3RpdmVzOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIG5hbWU6ICJtb2RlbCIsCiAgICAgICAgICAgICAgICAgIHJhd05hbWU6ICJ2LW1vZGVsLm51bWJlciIsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5sYXJndXJhLAogICAgICAgICAgICAgICAgICBleHByZXNzaW9uOiAiaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5sYXJndXJhIiwKICAgICAgICAgICAgICAgICAgbW9kaWZpZXJzOiB7IG51bWJlcjogdHJ1ZSB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICBzdGF0aWNDbGFzczogImZvcm0tY29udHJvbCIsCiAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgIHR5cGU6ICJudW1iZXIiLAogICAgICAgICAgICAgICAgaWQ6ICJvYmpldG8ubGFyZ3VyYSIsCiAgICAgICAgICAgICAgICBuYW1lOiAib2JqZXRvLmxhcmd1cmEiLAogICAgICAgICAgICAgICAgbWluOiBfdm0uaXRlbVRhbWFuaG9NaW5pbW8KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGRvbVByb3BzOiB7IHZhbHVlOiBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5sYXJndXJhIH0sCiAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgIGlucHV0OiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgaWYgKCRldmVudC50YXJnZXQuY29tcG9zaW5nKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgX3ZtLiRzZXQoCiAgICAgICAgICAgICAgICAgICAgX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8sCiAgICAgICAgICAgICAgICAgICAgImxhcmd1cmEiLAogICAgICAgICAgICAgICAgICAgIF92bS5fbigkZXZlbnQudGFyZ2V0LnZhbHVlKQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYmx1cjogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uJGZvcmNlVXBkYXRlKCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICBdKSwKICAgICAgICAgIF9jKCJkaXYiLCB7IHN0YXRpY0NsYXNzOiAiZm9ybS1ncm91cCIgfSwgWwogICAgICAgICAgICBfYygibGFiZWwiLCB7IGF0dHJzOiB7IGZvcjogIm9iamV0by5hbHR1cmEiIH0gfSwgWwogICAgICAgICAgICAgIF92bS5fdigiQWx0dXJhIikKICAgICAgICAgICAgXSksCiAgICAgICAgICAgIF9jKCJpbnB1dCIsIHsKICAgICAgICAgICAgICBkaXJlY3RpdmVzOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIG5hbWU6ICJtb2RlbCIsCiAgICAgICAgICAgICAgICAgIHJhd05hbWU6ICJ2LW1vZGVsLm51bWJlciIsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5hbHR1cmEsCiAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246ICJpdGVtU2VsZWNpb25hZG9DZW5hcmlvLmFsdHVyYSIsCiAgICAgICAgICAgICAgICAgIG1vZGlmaWVyczogeyBudW1iZXI6IHRydWUgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6ICJmb3JtLWNvbnRyb2wiLAogICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICB0eXBlOiAibnVtYmVyIiwKICAgICAgICAgICAgICAgIGlkOiAib2JqZXRvLmFsdHVyYSIsCiAgICAgICAgICAgICAgICBuYW1lOiAib2JqZXRvLmFsdHVyYSIsCiAgICAgICAgICAgICAgICBtaW46IF92bS5pdGVtVGFtYW5ob01pbmltbwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZG9tUHJvcHM6IHsgdmFsdWU6IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmFsdHVyYSB9LAogICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICBpbnB1dDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgIGlmICgkZXZlbnQudGFyZ2V0LmNvbXBvc2luZykgewogICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIF92bS4kc2V0KAogICAgICAgICAgICAgICAgICAgIF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLAogICAgICAgICAgICAgICAgICAgICJhbHR1cmEiLAogICAgICAgICAgICAgICAgICAgIF92bS5fbigkZXZlbnQudGFyZ2V0LnZhbHVlKQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYmx1cjogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uJGZvcmNlVXBkYXRlKCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICBdKSwKICAgICAgICAgIF9jKCJkaXYiLCB7IHN0YXRpY0NsYXNzOiAiZm9ybS1ncm91cCIgfSwgWwogICAgICAgICAgICBfYygibGFiZWwiLCB7IGF0dHJzOiB7IGZvcjogIm9iamV0by5wb3NpY2FvWCIgfSB9LCBbCiAgICAgICAgICAgICAgX3ZtLl92KCJQb3NpY2FvIFgiKQogICAgICAgICAgICBdKSwKICAgICAgICAgICAgX2MoImlucHV0IiwgewogICAgICAgICAgICAgIGRpcmVjdGl2ZXM6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgbmFtZTogIm1vZGVsIiwKICAgICAgICAgICAgICAgICAgcmF3TmFtZTogInYtbW9kZWwubnVtYmVyIiwKICAgICAgICAgICAgICAgICAgdmFsdWU6IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9YLAogICAgICAgICAgICAgICAgICBleHByZXNzaW9uOiAiaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5wb3NpY2FvWCIsCiAgICAgICAgICAgICAgICAgIG1vZGlmaWVyczogeyBudW1iZXI6IHRydWUgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6ICJmb3JtLWNvbnRyb2wiLAogICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICB0eXBlOiAibnVtYmVyIiwKICAgICAgICAgICAgICAgIGlkOiAib2JqZXRvLnBvc2ljYW9YIiwKICAgICAgICAgICAgICAgIG5hbWU6ICJvYmpldG8ucG9zaWNhb1giCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBkb21Qcm9wczogeyB2YWx1ZTogX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ucG9zaWNhb1ggfSwKICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgaW5wdXQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICBpZiAoJGV2ZW50LnRhcmdldC5jb21wb3NpbmcpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBfdm0uJHNldCgKICAgICAgICAgICAgICAgICAgICBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpbywKICAgICAgICAgICAgICAgICAgICAicG9zaWNhb1giLAogICAgICAgICAgICAgICAgICAgIF92bS5fbigkZXZlbnQudGFyZ2V0LnZhbHVlKQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYmx1cjogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uJGZvcmNlVXBkYXRlKCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICBdKSwKICAgICAgICAgIF9jKCJkaXYiLCB7IHN0YXRpY0NsYXNzOiAiZm9ybS1ncm91cCIgfSwgWwogICAgICAgICAgICBfYygibGFiZWwiLCB7IGF0dHJzOiB7IGZvcjogIm9iamV0by5wb3NpY2FvWSIgfSB9LCBbCiAgICAgICAgICAgICAgX3ZtLl92KCJQb3NpY2FvIFkiKQogICAgICAgICAgICBdKSwKICAgICAgICAgICAgX2MoImlucHV0IiwgewogICAgICAgICAgICAgIGRpcmVjdGl2ZXM6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgbmFtZTogIm1vZGVsIiwKICAgICAgICAgICAgICAgICAgcmF3TmFtZTogInYtbW9kZWwubnVtYmVyIiwKICAgICAgICAgICAgICAgICAgdmFsdWU6IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9ZLAogICAgICAgICAgICAgICAgICBleHByZXNzaW9uOiAiaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5wb3NpY2FvWSIsCiAgICAgICAgICAgICAgICAgIG1vZGlmaWVyczogeyBudW1iZXI6IHRydWUgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6ICJmb3JtLWNvbnRyb2wiLAogICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICB0eXBlOiAibnVtYmVyIiwKICAgICAgICAgICAgICAgIGlkOiAib2JqZXRvLnBvc2ljYW9ZIiwKICAgICAgICAgICAgICAgIG5hbWU6ICJvYmpldG8ucG9zaWNhb1kiCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBkb21Qcm9wczogeyB2YWx1ZTogX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ucG9zaWNhb1kgfSwKICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgaW5wdXQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICBpZiAoJGV2ZW50LnRhcmdldC5jb21wb3NpbmcpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBfdm0uJHNldCgKICAgICAgICAgICAgICAgICAgICBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpbywKICAgICAgICAgICAgICAgICAgICAicG9zaWNhb1kiLAogICAgICAgICAgICAgICAgICAgIF92bS5fbigkZXZlbnQudGFyZ2V0LnZhbHVlKQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYmx1cjogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uJGZvcmNlVXBkYXRlKCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICBdKSwKICAgICAgICAgICFfdm0uZXhpc3RlUmVjaXBpZW50ZURlc3Rpbm9PYmpldG9DZW5hcmlvcygKICAgICAgICAgICAgX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uaWQKICAgICAgICAgICkKICAgICAgICAgICAgPyBfYygiaW5wdXQiLCB7CiAgICAgICAgICAgICAgICBzdGF0aWNDbGFzczogImJ0biBidG4tc2Vjb25kYXJ5IiwKICAgICAgICAgICAgICAgIGF0dHJzOiB7IHR5cGU6ICJidXR0b24iLCB2YWx1ZTogIlJlbW92ZXIgb2JqZXRvIiB9LAogICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ucmVtb3Zlck9iamV0byhfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5pZCkKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIDogX3ZtLl9lKCkKICAgICAgICBdKQogICAgICA6IF92bS5fZSgpLAogICAgX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8udGlwbyA9PSBfdm0udGlwb0l0ZW0uT0JKRVRPX1JFQ0lQSUVOVEUKICAgICAgPyBfYygiZGl2IiwgeyBzdGF0aWNDbGFzczogImZvcm0tZ3JvdXAiIH0sIFsKICAgICAgICAgIF9jKCJkaXYiLCB7IHN0YXRpY0NsYXNzOiAiZm9ybS1ncm91cCIgfSwgWwogICAgICAgICAgICBfYygibGFiZWwiLCB7IGF0dHJzOiB7IGZvcjogIm9iamV0b3JlY2lwaWVudGUubm9tZSIgfSB9LCBbCiAgICAgICAgICAgICAgX3ZtLl92KCJOb21lIGRvIHJlY2lwaWVudGUgZGUgb2JqZXRvIikKICAgICAgICAgICAgXSksCiAgICAgICAgICAgIF9jKCJpbnB1dCIsIHsKICAgICAgICAgICAgICBkaXJlY3RpdmVzOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIG5hbWU6ICJtb2RlbCIsCiAgICAgICAgICAgICAgICAgIHJhd05hbWU6ICJ2LW1vZGVsIiwKICAgICAgICAgICAgICAgICAgdmFsdWU6IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLm5vbWUsCiAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246ICJpdGVtU2VsZWNpb25hZG9DZW5hcmlvLm5vbWUiCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICBzdGF0aWNDbGFzczogImZvcm0tY29udHJvbCIsCiAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgIHR5cGU6ICJ0ZXh0IiwKICAgICAgICAgICAgICAgIGlkOiAib2JqZXRvcmVjaXBpZW50ZS5ub21lIiwKICAgICAgICAgICAgICAgIG5hbWU6ICJvYmpldG9yZWNpcGllbnRlLm5vbWUiCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBkb21Qcm9wczogeyB2YWx1ZTogX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ubm9tZSB9LAogICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICBpbnB1dDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgIGlmICgkZXZlbnQudGFyZ2V0LmNvbXBvc2luZykgewogICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIF92bS4kc2V0KAogICAgICAgICAgICAgICAgICAgIF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLAogICAgICAgICAgICAgICAgICAgICJub21lIiwKICAgICAgICAgICAgICAgICAgICAkZXZlbnQudGFyZ2V0LnZhbHVlCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICBdKSwKICAgICAgICAgIF9jKAogICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgeyBzdGF0aWNDbGFzczogImZvcm0tZ3JvdXAiIH0sCiAgICAgICAgICAgIFsKICAgICAgICAgICAgICBfYygibGFiZWwiLCBbX3ZtLl92KCJPYmpldG9zIHF1ZSBlc3NlIHJlY2lwaWVudGUgcG9kZSByZWNlYmVyIildKSwKICAgICAgICAgICAgICBfdm0uX2woX3ZtLmxpc3RhT2JqZXRvQ2VuYXJpb3MsIGZ1bmN0aW9uKG9iamV0bykgewogICAgICAgICAgICAgICAgcmV0dXJuIF9jKCJkaXYiLCB7IGtleTogb2JqZXRvLmlkICsgIi5vYmpldG9zcmVjaXBpZW50ZSIgfSwgWwogICAgICAgICAgICAgICAgICBfYygiaW5wdXQiLCB7CiAgICAgICAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6ICJmb3JtLWNoZWNrLWlucHV0IiwKICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgdHlwZTogImNoZWNrYm94IiwKICAgICAgICAgICAgICAgICAgICAgIGlkOiBvYmpldG8uaWQgKyAiLm9iamV0b3NyZWNpcGllbnRlIiwKICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IG9iamV0by5pZCArICIub2JqZXRvc3JlY2lwaWVudGUiCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkb21Qcm9wczogewogICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogX3ZtLnZlcmlmaWNhT2JqZXRvUmVjaXBpZW50ZVNlbGVjaW9uYWRvKAogICAgICAgICAgICAgICAgICAgICAgICBvYmpldG8uaWQKICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogb2JqZXRvLmlkCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBvbjogeyBjaGFuZ2U6IF92bS5hbHRlcmFyT2JqZXRvUmVjaXBpZW50ZSB9CiAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICBfYygKICAgICAgICAgICAgICAgICAgICAibGFiZWwiLAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZm9ybS1jaGVjay1sYWJlbCIsCiAgICAgICAgICAgICAgICAgICAgICBhdHRyczogeyBmb3I6IG9iamV0by5pZCArICIub2JqZXRvc3JlY2lwaWVudGUiIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgIF92bS5fdigKICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl9zKAogICAgICAgICAgICAgICAgICAgICAgICAgICIgWyIgKyBvYmpldG8ubm9tZUNlbmFyaW8gKyAiXSAiICsgb2JqZXRvLm5vbWVJdGVtCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIF0pCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgX3ZtLmxpc3RhT2JqZXRvQ2VuYXJpb3MubGVuZ3RoID09IDAKICAgICAgICAgICAgICAgID8gX2MoInNtYWxsIiwgeyBzdGF0aWNDbGFzczogImZvcm0tdGV4dCB0ZXh0LW11dGVkIiB9LCBbCiAgICAgICAgICAgICAgICAgICAgX3ZtLl92KCJOZW5odW1hIG9ww6fDo28gZGUgb2JqZXRvIGVuY29udHJhZGEuIikKICAgICAgICAgICAgICAgICAgXSkKICAgICAgICAgICAgICAgIDogX3ZtLl9lKCkKICAgICAgICAgICAgXSwKICAgICAgICAgICAgMgogICAgICAgICAgKSwKICAgICAgICAgIF9jKCJkaXYiLCB7IHN0YXRpY0NsYXNzOiAiZm9ybS1ncm91cCIgfSwgWwogICAgICAgICAgICBfYygibGFiZWwiLCB7IGF0dHJzOiB7IGZvcjogIm9iamV0by5sYXJndXJhIiB9IH0sIFsKICAgICAgICAgICAgICBfdm0uX3YoIkxhcmd1cmEiKQogICAgICAgICAgICBdKSwKICAgICAgICAgICAgX2MoImlucHV0IiwgewogICAgICAgICAgICAgIGRpcmVjdGl2ZXM6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgbmFtZTogIm1vZGVsIiwKICAgICAgICAgICAgICAgICAgcmF3TmFtZTogInYtbW9kZWwubnVtYmVyIiwKICAgICAgICAgICAgICAgICAgdmFsdWU6IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmxhcmd1cmEsCiAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246ICJpdGVtU2VsZWNpb25hZG9DZW5hcmlvLmxhcmd1cmEiLAogICAgICAgICAgICAgICAgICBtb2RpZmllcnM6IHsgbnVtYmVyOiB0cnVlIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZm9ybS1jb250cm9sIiwKICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgdHlwZTogIm51bWJlciIsCiAgICAgICAgICAgICAgICBpZDogIm9iamV0by5sYXJndXJhIiwKICAgICAgICAgICAgICAgIG5hbWU6ICJvYmpldG8ubGFyZ3VyYSIsCiAgICAgICAgICAgICAgICBtaW46IF92bS5pdGVtVGFtYW5ob01pbmltbwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZG9tUHJvcHM6IHsgdmFsdWU6IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmxhcmd1cmEgfSwKICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgaW5wdXQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICBpZiAoJGV2ZW50LnRhcmdldC5jb21wb3NpbmcpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBfdm0uJHNldCgKICAgICAgICAgICAgICAgICAgICBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpbywKICAgICAgICAgICAgICAgICAgICAibGFyZ3VyYSIsCiAgICAgICAgICAgICAgICAgICAgX3ZtLl9uKCRldmVudC50YXJnZXQudmFsdWUpCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBibHVyOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS4kZm9yY2VVcGRhdGUoKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgIF0pLAogICAgICAgICAgX2MoImRpdiIsIHsgc3RhdGljQ2xhc3M6ICJmb3JtLWdyb3VwIiB9LCBbCiAgICAgICAgICAgIF9jKCJsYWJlbCIsIHsgYXR0cnM6IHsgZm9yOiAib2JqZXRvLmFsdHVyYSIgfSB9LCBbCiAgICAgICAgICAgICAgX3ZtLl92KCJBbHR1cmEiKQogICAgICAgICAgICBdKSwKICAgICAgICAgICAgX2MoImlucHV0IiwgewogICAgICAgICAgICAgIGRpcmVjdGl2ZXM6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgbmFtZTogIm1vZGVsIiwKICAgICAgICAgICAgICAgICAgcmF3TmFtZTogInYtbW9kZWwubnVtYmVyIiwKICAgICAgICAgICAgICAgICAgdmFsdWU6IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmFsdHVyYSwKICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjogIml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uYWx0dXJhIiwKICAgICAgICAgICAgICAgICAgbW9kaWZpZXJzOiB7IG51bWJlcjogdHJ1ZSB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICBzdGF0aWNDbGFzczogImZvcm0tY29udHJvbCIsCiAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgIHR5cGU6ICJudW1iZXIiLAogICAgICAgICAgICAgICAgaWQ6ICJvYmpldG8uYWx0dXJhIiwKICAgICAgICAgICAgICAgIG5hbWU6ICJvYmpldG8uYWx0dXJhIiwKICAgICAgICAgICAgICAgIG1pbjogX3ZtLml0ZW1UYW1hbmhvTWluaW1vCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBkb21Qcm9wczogeyB2YWx1ZTogX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uYWx0dXJhIH0sCiAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgIGlucHV0OiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgaWYgKCRldmVudC50YXJnZXQuY29tcG9zaW5nKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgX3ZtLiRzZXQoCiAgICAgICAgICAgICAgICAgICAgX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8sCiAgICAgICAgICAgICAgICAgICAgImFsdHVyYSIsCiAgICAgICAgICAgICAgICAgICAgX3ZtLl9uKCRldmVudC50YXJnZXQudmFsdWUpCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBibHVyOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS4kZm9yY2VVcGRhdGUoKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgIF0pLAogICAgICAgICAgX2MoImRpdiIsIHsgc3RhdGljQ2xhc3M6ICJmb3JtLWdyb3VwIiB9LCBbCiAgICAgICAgICAgIF9jKCJsYWJlbCIsIHsgYXR0cnM6IHsgZm9yOiAib2JqZXRvLnBvc2ljYW9YIiB9IH0sIFsKICAgICAgICAgICAgICBfdm0uX3YoIlBvc2ljYW8gWCIpCiAgICAgICAgICAgIF0pLAogICAgICAgICAgICBfYygiaW5wdXQiLCB7CiAgICAgICAgICAgICAgZGlyZWN0aXZlczogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBuYW1lOiAibW9kZWwiLAogICAgICAgICAgICAgICAgICByYXdOYW1lOiAidi1tb2RlbC5udW1iZXIiLAogICAgICAgICAgICAgICAgICB2YWx1ZTogX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ucG9zaWNhb1gsCiAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246ICJpdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9YIiwKICAgICAgICAgICAgICAgICAgbW9kaWZpZXJzOiB7IG51bWJlcjogdHJ1ZSB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICBzdGF0aWNDbGFzczogImZvcm0tY29udHJvbCIsCiAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgIHR5cGU6ICJudW1iZXIiLAogICAgICAgICAgICAgICAgaWQ6ICJvYmpldG8ucG9zaWNhb1giLAogICAgICAgICAgICAgICAgbmFtZTogIm9iamV0by5wb3NpY2FvWCIKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGRvbVByb3BzOiB7IHZhbHVlOiBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5wb3NpY2FvWCB9LAogICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICBpbnB1dDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgIGlmICgkZXZlbnQudGFyZ2V0LmNvbXBvc2luZykgewogICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIF92bS4kc2V0KAogICAgICAgICAgICAgICAgICAgIF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLAogICAgICAgICAgICAgICAgICAgICJwb3NpY2FvWCIsCiAgICAgICAgICAgICAgICAgICAgX3ZtLl9uKCRldmVudC50YXJnZXQudmFsdWUpCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBibHVyOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS4kZm9yY2VVcGRhdGUoKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgIF0pLAogICAgICAgICAgX2MoImRpdiIsIHsgc3RhdGljQ2xhc3M6ICJmb3JtLWdyb3VwIiB9LCBbCiAgICAgICAgICAgIF9jKCJsYWJlbCIsIHsgYXR0cnM6IHsgZm9yOiAib2JqZXRvLnBvc2ljYW9ZIiB9IH0sIFsKICAgICAgICAgICAgICBfdm0uX3YoIlBvc2ljYW8gWSIpCiAgICAgICAgICAgIF0pLAogICAgICAgICAgICBfYygiaW5wdXQiLCB7CiAgICAgICAgICAgICAgZGlyZWN0aXZlczogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBuYW1lOiAibW9kZWwiLAogICAgICAgICAgICAgICAgICByYXdOYW1lOiAidi1tb2RlbC5udW1iZXIiLAogICAgICAgICAgICAgICAgICB2YWx1ZTogX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ucG9zaWNhb1ksCiAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246ICJpdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9ZIiwKICAgICAgICAgICAgICAgICAgbW9kaWZpZXJzOiB7IG51bWJlcjogdHJ1ZSB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICBzdGF0aWNDbGFzczogImZvcm0tY29udHJvbCIsCiAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgIHR5cGU6ICJudW1iZXIiLAogICAgICAgICAgICAgICAgaWQ6ICJvYmpldG8ucG9zaWNhb1kiLAogICAgICAgICAgICAgICAgbmFtZTogIm9iamV0by5wb3NpY2FvWSIKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGRvbVByb3BzOiB7IHZhbHVlOiBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5wb3NpY2FvWSB9LAogICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICBpbnB1dDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgIGlmICgkZXZlbnQudGFyZ2V0LmNvbXBvc2luZykgewogICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIF92bS4kc2V0KAogICAgICAgICAgICAgICAgICAgIF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLAogICAgICAgICAgICAgICAgICAgICJwb3NpY2FvWSIsCiAgICAgICAgICAgICAgICAgICAgX3ZtLl9uKCRldmVudC50YXJnZXQudmFsdWUpCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBibHVyOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS4kZm9yY2VVcGRhdGUoKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgIF0pLAogICAgICAgICAgIV92bS5leGlzdGVHcnVwb1JlY2lwaWVudGUoX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uaWQpCiAgICAgICAgICAgID8gX2MoImlucHV0IiwgewogICAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6ICJidG4gYnRuLXNlY29uZGFyeSIsCiAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgICAgICAgdmFsdWU6ICJSZW1vdmVyIHJlY2lwaWVudGUgZGUgb2JqZXRvIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLnJlbW92ZXJPYmpldG9SZWNpcGllbnRlKAogICAgICAgICAgICAgICAgICAgICAgX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uaWQKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KQogICAgICAgICAgICA6IF92bS5fZSgpCiAgICAgICAgXSkKICAgICAgOiBfdm0uX2UoKSwKICAgIF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnRpcG8gPT0gX3ZtLnRpcG9JdGVtLkdSVVBPX1JFQ0lQSUVOVEUKICAgICAgPyBfYygiZGl2IiwgeyBzdGF0aWNDbGFzczogImZvcm0tZ3JvdXAiIH0sIFsKICAgICAgICAgIF9jKCJkaXYiLCB7IHN0YXRpY0NsYXNzOiAiZm9ybS1ncm91cCIgfSwgWwogICAgICAgICAgICBfYygibGFiZWwiLCB7IGF0dHJzOiB7IGZvcjogImdydXBvcmVjaXBpZW50ZS5ub21lIiB9IH0sIFsKICAgICAgICAgICAgICBfdm0uX3YoIk5vbWUgZG8gZ3J1cG8gZGUgcmVjaXBpZW50ZSIpCiAgICAgICAgICAgIF0pLAogICAgICAgICAgICBfYygiaW5wdXQiLCB7CiAgICAgICAgICAgICAgZGlyZWN0aXZlczogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBuYW1lOiAibW9kZWwiLAogICAgICAgICAgICAgICAgICByYXdOYW1lOiAidi1tb2RlbCIsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5ub21lLAogICAgICAgICAgICAgICAgICBleHByZXNzaW9uOiAiaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5ub21lIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6ICJmb3JtLWNvbnRyb2wiLAogICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICB0eXBlOiAidGV4dCIsCiAgICAgICAgICAgICAgICBpZDogImdydXBvcmVjaXBpZW50ZS5ub21lIiwKICAgICAgICAgICAgICAgIG5hbWU6ICJncnVwb3JlY2lwaWVudGUubm9tZSIKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGRvbVByb3BzOiB7IHZhbHVlOiBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5ub21lIH0sCiAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgIGtleXVwOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS4kZW1pdCgibm9tZUl0ZW1BbHRlcmFkbyIsIHsKICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmlkLAogICAgICAgICAgICAgICAgICAgIG5vbWVJdGVtOiBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5ub21lCiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW5wdXQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICBpZiAoJGV2ZW50LnRhcmdldC5jb21wb3NpbmcpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBfdm0uJHNldCgKICAgICAgICAgICAgICAgICAgICBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpbywKICAgICAgICAgICAgICAgICAgICAibm9tZSIsCiAgICAgICAgICAgICAgICAgICAgJGV2ZW50LnRhcmdldC52YWx1ZQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgXSksCiAgICAgICAgICBfYygiZGl2IiwgeyBzdGF0aWNDbGFzczogImZvcm0tZ3JvdXAiIH0sIFsKICAgICAgICAgICAgX2MoImxhYmVsIiwgeyBhdHRyczogeyBmb3I6ICJncnVwb3JlY2lwaWVudGUuaW1hZ2VtRm9jbyIgfSB9LCBbCiAgICAgICAgICAgICAgX3ZtLl92KCJJbWFnZW0gZGUgZm9jbyIpCiAgICAgICAgICAgIF0pLAogICAgICAgICAgICBfYygiaW5wdXQiLCB7CiAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6ICJmb3JtLWNvbnRyb2wtZmlsZSIsCiAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgIHR5cGU6ICJmaWxlIiwKICAgICAgICAgICAgICAgIGFjY2VwdDogImltYWdlLyoiLAogICAgICAgICAgICAgICAgaWQ6ICJncnVwb3JlY2lwaWVudGUuaW1hZ2VtRm9jbyIsCiAgICAgICAgICAgICAgICBuYW1lOiAiZ3J1cG9yZWNpcGllbnRlLmltYWdlbUZvY28iCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBvbjogeyBjaGFuZ2U6IF92bS5pbWFnZW1Gb2NvR3J1cG9SZWNpcGllbnRlQWx0ZXJhZGEgfQogICAgICAgICAgICB9KSwKICAgICAgICAgICAgX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uaW1hZ2VtRm9jbwogICAgICAgICAgICAgID8gX2MoImltZyIsIHsKICAgICAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6ICJpbWFnZW0tcHJldmlldyIsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IHNyYzogX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uaW1hZ2VtRm9jbyB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIDogX3ZtLl9lKCkKICAgICAgICAgIF0pLAogICAgICAgICAgX2MoCiAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICB7IHN0YXRpY0NsYXNzOiAiZm9ybS1ncm91cCIgfSwKICAgICAgICAgICAgWwogICAgICAgICAgICAgIF9jKCJsYWJlbCIsIFtfdm0uX3YoIlJlY2lwaWVudGVzIGRvIGdydXBvIildKSwKICAgICAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgICAgICBfdm0ubGlzdGFPYmpldG9SZWNpcGllbnRlLmZpbHRlcihfdm0uZmlsdHJhck9iamV0b1JlY2lwaWVudGUpLAogICAgICAgICAgICAgICAgZnVuY3Rpb24ob2JqZXRvUmVjaXBpZW50ZSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgICAgICAgeyBrZXk6IG9iamV0b1JlY2lwaWVudGUuaWQgKyAiLnJlY2lwaWVudGVzZ3J1cG8iIH0sCiAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgX2MoImlucHV0IiwgewogICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNDbGFzczogImZvcm0tY2hlY2staW5wdXQiLAogICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJjaGVja2JveCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG9iamV0b1JlY2lwaWVudGUuaWQgKyAiLnJlY2lwaWVudGVzZ3J1cG8iLAogICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IG9iamV0b1JlY2lwaWVudGUuaWQgKyAiLnJlY2lwaWVudGVzZ3J1cG8iCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGRvbVByb3BzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogX3ZtLnZlcmlmaWNhR3J1cG9SZWNpcGllbnRlU2VsZWNpb25hZG8oCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpldG9SZWNpcGllbnRlLmlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogb2JqZXRvUmVjaXBpZW50ZS5pZAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBvbjogeyBjaGFuZ2U6IF92bS5hbHRlcmFyUmVjaXBpZW50ZUdydXBvIH0KICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgX2MoCiAgICAgICAgICAgICAgICAgICAgICAgICJsYWJlbCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNDbGFzczogImZvcm0tY2hlY2stbGFiZWwiLAogICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3I6IG9iamV0b1JlY2lwaWVudGUuaWQgKyAiLnJlY2lwaWVudGVzZ3J1cG8iCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl92KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl9zKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvYmpldG9SZWNpcGllbnRlLm5vbWUgPT09ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG9iamV0b1JlY2lwaWVudGUuaWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogb2JqZXRvUmVjaXBpZW50ZS5ub21lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgX3ZtLmxpc3RhT2JqZXRvUmVjaXBpZW50ZS5maWx0ZXIoX3ZtLmZpbHRyYXJPYmpldG9SZWNpcGllbnRlKQogICAgICAgICAgICAgICAgLmxlbmd0aCA9PSAwCiAgICAgICAgICAgICAgICA/IF9jKCJzbWFsbCIsIHsgc3RhdGljQ2xhc3M6ICJmb3JtLXRleHQgdGV4dC1tdXRlZCIgfSwgWwogICAgICAgICAgICAgICAgICAgIF92bS5fdigiTmVuaHVtYSBvcMOnw6NvIGRlIHJlY2lwaWVudGUgZGUgb2JqZXRvIGVuY29udHJhZGEuIikKICAgICAgICAgICAgICAgICAgXSkKICAgICAgICAgICAgICAgIDogX3ZtLl9lKCkKICAgICAgICAgICAgXSwKICAgICAgICAgICAgMgogICAgICAgICAgKSwKICAgICAgICAgICFfdm0uZXhpc3RlQ2VuYXJpb0Rlc3Rpbm9JdGVtQ2VuYXJpb3MoX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uaWQpCiAgICAgICAgICAgID8gX2MoImlucHV0IiwgewogICAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6ICJidG4gYnRuLXNlY29uZGFyeSIsCiAgICAgICAgICAgICAgICBhdHRyczogeyB0eXBlOiAiYnV0dG9uIiwgdmFsdWU6ICJSZW1vdmVyIGdydXBvIGRlIHJlY2lwaWVudGUiIH0sCiAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5yZW1vdmVyR3J1cG9SZWNpcGllbnRlKAogICAgICAgICAgICAgICAgICAgICAgX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uaWQKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KQogICAgICAgICAgICA6IF92bS5fZSgpCiAgICAgICAgXSkKICAgICAgOiBfdm0uX2UoKSwKICAgIF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnRpcG8gPT0gX3ZtLnRpcG9JdGVtLkNFTkFSSU9fRklMSE8KICAgICAgPyBfYygiZGl2IiwgeyBzdGF0aWNDbGFzczogImZvcm0tZ3JvdXAiIH0sIFsKICAgICAgICAgIF9jKCJkaXYiLCB7IHN0YXRpY0NsYXNzOiAiZm9ybS1ncm91cCIgfSwgWwogICAgICAgICAgICBfYygibGFiZWwiLCB7IGF0dHJzOiB7IGZvcjogImNlbmFyaW9maWxoby5ub21lIiB9IH0sIFsKICAgICAgICAgICAgICBfdm0uX3YoIk5vbWUgZG8gY2Vuw6FyaW8gZmlsaG8iKQogICAgICAgICAgICBdKSwKICAgICAgICAgICAgX2MoImlucHV0IiwgewogICAgICAgICAgICAgIGRpcmVjdGl2ZXM6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgbmFtZTogIm1vZGVsIiwKICAgICAgICAgICAgICAgICAgcmF3TmFtZTogInYtbW9kZWwiLAogICAgICAgICAgICAgICAgICB2YWx1ZTogX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ubm9tZSwKICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjogIml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ubm9tZSIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZm9ybS1jb250cm9sIiwKICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgdHlwZTogInRleHQiLAogICAgICAgICAgICAgICAgaWQ6ICJjZW5hcmlvZmlsaG8ubm9tZSIsCiAgICAgICAgICAgICAgICBuYW1lOiAiY2VuYXJpb2ZpbGhvLm5vbWUiCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBkb21Qcm9wczogeyB2YWx1ZTogX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ubm9tZSB9LAogICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICBrZXl1cDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uJGVtaXQoIm5vbWVJdGVtQWx0ZXJhZG8iLCB7CiAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5pZCwKICAgICAgICAgICAgICAgICAgICBub21lSXRlbTogX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ubm9tZQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGlucHV0OiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgaWYgKCRldmVudC50YXJnZXQuY29tcG9zaW5nKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgX3ZtLiRzZXQoCiAgICAgICAgICAgICAgICAgICAgX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8sCiAgICAgICAgICAgICAgICAgICAgIm5vbWUiLAogICAgICAgICAgICAgICAgICAgICRldmVudC50YXJnZXQudmFsdWUKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgIF0pLAogICAgICAgICAgX2MoImRpdiIsIHsgc3RhdGljQ2xhc3M6ICJmb3JtLWdyb3VwIiB9LCBbCiAgICAgICAgICAgIF9jKCJsYWJlbCIsIHsgYXR0cnM6IHsgZm9yOiAiY2VuYXJpb2ZpbGhvLmltYWdlbUZvY28iIH0gfSwgWwogICAgICAgICAgICAgIF92bS5fdigiSW1hZ2VtIGRlIGZvY28iKQogICAgICAgICAgICBdKSwKICAgICAgICAgICAgX2MoImlucHV0IiwgewogICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZm9ybS1jb250cm9sLWZpbGUiLAogICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICB0eXBlOiAiZmlsZSIsCiAgICAgICAgICAgICAgICBhY2NlcHQ6ICJpbWFnZS8qIiwKICAgICAgICAgICAgICAgIGlkOiAiY2VuYXJpb2ZpbGhvLmltYWdlbUZvY28iLAogICAgICAgICAgICAgICAgbmFtZTogImNlbmFyaW9maWxoby5pbWFnZW1Gb2NvIgogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgb246IHsgY2hhbmdlOiBfdm0uaW1hZ2VtRm9jb0NlbmFyaW9GaWxob0FsdGVyYWRhIH0KICAgICAgICAgICAgfSksCiAgICAgICAgICAgIF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmltYWdlbUZvY28KICAgICAgICAgICAgICA/IF9jKCJpbWciLCB7CiAgICAgICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiAiaW1hZ2VtLXByZXZpZXciLAogICAgICAgICAgICAgICAgICBhdHRyczogeyBzcmM6IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmltYWdlbUZvY28gfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICA6IF92bS5fZSgpCiAgICAgICAgICBdKSwKICAgICAgICAgIF9jKCJkaXYiLCB7IHN0YXRpY0NsYXNzOiAiZm9ybS1ncm91cCIgfSwgWwogICAgICAgICAgICBfYygibGFiZWwiLCB7IGF0dHJzOiB7IGZvcjogImNlbmFyaW9maWxoby5sYXJndXJhIiB9IH0sIFsKICAgICAgICAgICAgICBfdm0uX3YoIkxhcmd1cmEiKQogICAgICAgICAgICBdKSwKICAgICAgICAgICAgX2MoImlucHV0IiwgewogICAgICAgICAgICAgIGRpcmVjdGl2ZXM6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgbmFtZTogIm1vZGVsIiwKICAgICAgICAgICAgICAgICAgcmF3TmFtZTogInYtbW9kZWwubnVtYmVyIiwKICAgICAgICAgICAgICAgICAgdmFsdWU6IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmxhcmd1cmEsCiAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246ICJpdGVtU2VsZWNpb25hZG9DZW5hcmlvLmxhcmd1cmEiLAogICAgICAgICAgICAgICAgICBtb2RpZmllcnM6IHsgbnVtYmVyOiB0cnVlIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiAiZm9ybS1jb250cm9sIiwKICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgdHlwZTogIm51bWJlciIsCiAgICAgICAgICAgICAgICBpZDogImNlbmFyaW9maWxoby5sYXJndXJhIiwKICAgICAgICAgICAgICAgIG5hbWU6ICJjZW5hcmlvZmlsaG8ubGFyZ3VyYSIsCiAgICAgICAgICAgICAgICBtaW46IF92bS5pdGVtVGFtYW5ob01pbmltbwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZG9tUHJvcHM6IHsgdmFsdWU6IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmxhcmd1cmEgfSwKICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgaW5wdXQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICBpZiAoJGV2ZW50LnRhcmdldC5jb21wb3NpbmcpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBfdm0uJHNldCgKICAgICAgICAgICAgICAgICAgICBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpbywKICAgICAgICAgICAgICAgICAgICAibGFyZ3VyYSIsCiAgICAgICAgICAgICAgICAgICAgX3ZtLl9uKCRldmVudC50YXJnZXQudmFsdWUpCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBibHVyOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS4kZm9yY2VVcGRhdGUoKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgIF0pLAogICAgICAgICAgX2MoImRpdiIsIHsgc3RhdGljQ2xhc3M6ICJmb3JtLWdyb3VwIiB9LCBbCiAgICAgICAgICAgIF9jKCJsYWJlbCIsIHsgYXR0cnM6IHsgZm9yOiAiY2VuYXJpb2ZpbGhvLmFsdHVyYSIgfSB9LCBbCiAgICAgICAgICAgICAgX3ZtLl92KCJBbHR1cmEiKQogICAgICAgICAgICBdKSwKICAgICAgICAgICAgX2MoImlucHV0IiwgewogICAgICAgICAgICAgIGRpcmVjdGl2ZXM6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgbmFtZTogIm1vZGVsIiwKICAgICAgICAgICAgICAgICAgcmF3TmFtZTogInYtbW9kZWwubnVtYmVyIiwKICAgICAgICAgICAgICAgICAgdmFsdWU6IF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmFsdHVyYSwKICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjogIml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uYWx0dXJhIiwKICAgICAgICAgICAgICAgICAgbW9kaWZpZXJzOiB7IG51bWJlcjogdHJ1ZSB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICBzdGF0aWNDbGFzczogImZvcm0tY29udHJvbCIsCiAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgIHR5cGU6ICJudW1iZXIiLAogICAgICAgICAgICAgICAgaWQ6ICJjZW5hcmlvZmlsaG8uYWx0dXJhIiwKICAgICAgICAgICAgICAgIG5hbWU6ICJjZW5hcmlvZmlsaG8uYWx0dXJhIiwKICAgICAgICAgICAgICAgIG1pbjogX3ZtLml0ZW1UYW1hbmhvTWluaW1vCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBkb21Qcm9wczogeyB2YWx1ZTogX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uYWx0dXJhIH0sCiAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgIGlucHV0OiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgaWYgKCRldmVudC50YXJnZXQuY29tcG9zaW5nKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgX3ZtLiRzZXQoCiAgICAgICAgICAgICAgICAgICAgX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8sCiAgICAgICAgICAgICAgICAgICAgImFsdHVyYSIsCiAgICAgICAgICAgICAgICAgICAgX3ZtLl9uKCRldmVudC50YXJnZXQudmFsdWUpCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBibHVyOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS4kZm9yY2VVcGRhdGUoKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgIF0pLAogICAgICAgICAgX2MoImRpdiIsIHsgc3RhdGljQ2xhc3M6ICJmb3JtLWdyb3VwIiB9LCBbCiAgICAgICAgICAgIF9jKCJsYWJlbCIsIHsgYXR0cnM6IHsgZm9yOiAiY2VuYXJpb2ZpbGhvLnBvc2ljYW9YIiB9IH0sIFsKICAgICAgICAgICAgICBfdm0uX3YoIlBvc2ljYW8gWCIpCiAgICAgICAgICAgIF0pLAogICAgICAgICAgICBfYygiaW5wdXQiLCB7CiAgICAgICAgICAgICAgZGlyZWN0aXZlczogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBuYW1lOiAibW9kZWwiLAogICAgICAgICAgICAgICAgICByYXdOYW1lOiAidi1tb2RlbC5udW1iZXIiLAogICAgICAgICAgICAgICAgICB2YWx1ZTogX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ucG9zaWNhb1gsCiAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246ICJpdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9YIiwKICAgICAgICAgICAgICAgICAgbW9kaWZpZXJzOiB7IG51bWJlcjogdHJ1ZSB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICBzdGF0aWNDbGFzczogImZvcm0tY29udHJvbCIsCiAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgIHR5cGU6ICJudW1iZXIiLAogICAgICAgICAgICAgICAgaWQ6ICJjZW5hcmlvZmlsaG8ucG9zaWNhb1giLAogICAgICAgICAgICAgICAgbmFtZTogImNlbmFyaW9maWxoby5wb3NpY2FvWCIKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGRvbVByb3BzOiB7IHZhbHVlOiBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5wb3NpY2FvWCB9LAogICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICBpbnB1dDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgIGlmICgkZXZlbnQudGFyZ2V0LmNvbXBvc2luZykgewogICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIF92bS4kc2V0KAogICAgICAgICAgICAgICAgICAgIF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLAogICAgICAgICAgICAgICAgICAgICJwb3NpY2FvWCIsCiAgICAgICAgICAgICAgICAgICAgX3ZtLl9uKCRldmVudC50YXJnZXQudmFsdWUpCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBibHVyOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS4kZm9yY2VVcGRhdGUoKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgIF0pLAogICAgICAgICAgX2MoImRpdiIsIHsgc3RhdGljQ2xhc3M6ICJmb3JtLWdyb3VwIiB9LCBbCiAgICAgICAgICAgIF9jKCJsYWJlbCIsIHsgYXR0cnM6IHsgZm9yOiAiY2VuYXJpb2ZpbGhvLnBvc2ljYW9ZIiB9IH0sIFsKICAgICAgICAgICAgICBfdm0uX3YoIlBvc2ljYW8gWSIpCiAgICAgICAgICAgIF0pLAogICAgICAgICAgICBfYygiaW5wdXQiLCB7CiAgICAgICAgICAgICAgZGlyZWN0aXZlczogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBuYW1lOiAibW9kZWwiLAogICAgICAgICAgICAgICAgICByYXdOYW1lOiAidi1tb2RlbC5udW1iZXIiLAogICAgICAgICAgICAgICAgICB2YWx1ZTogX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ucG9zaWNhb1ksCiAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246ICJpdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9ZIiwKICAgICAgICAgICAgICAgICAgbW9kaWZpZXJzOiB7IG51bWJlcjogdHJ1ZSB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICBzdGF0aWNDbGFzczogImZvcm0tY29udHJvbCIsCiAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgIHR5cGU6ICJudW1iZXIiLAogICAgICAgICAgICAgICAgaWQ6ICJjZW5hcmlvZmlsaG8ucG9zaWNhb1kiLAogICAgICAgICAgICAgICAgbmFtZTogImNlbmFyaW9maWxoby5wb3NpY2FvWSIKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGRvbVByb3BzOiB7IHZhbHVlOiBfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5wb3NpY2FvWSB9LAogICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICBpbnB1dDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgIGlmICgkZXZlbnQudGFyZ2V0LmNvbXBvc2luZykgewogICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIF92bS4kc2V0KAogICAgICAgICAgICAgICAgICAgIF92bS5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLAogICAgICAgICAgICAgICAgICAgICJwb3NpY2FvWSIsCiAgICAgICAgICAgICAgICAgICAgX3ZtLl9uKCRldmVudC50YXJnZXQudmFsdWUpCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBibHVyOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS4kZm9yY2VVcGRhdGUoKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgIF0pLAogICAgICAgICAgIV92bS5leGlzdGVDZW5hcmlvRGVzdGlub0l0ZW1DZW5hcmlvcyhfdm0uaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5pZCkKICAgICAgICAgICAgPyBfYygiaW5wdXQiLCB7CiAgICAgICAgICAgICAgICBzdGF0aWNDbGFzczogImJ0biBidG4tc2Vjb25kYXJ5IiwKICAgICAgICAgICAgICAgIGF0dHJzOiB7IHR5cGU6ICJidXR0b24iLCB2YWx1ZTogIlJlbW92ZXIgY2Vuw6FyaW8gZmlsaG8iIH0sCiAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5yZW1vdmVyQ2VuYXJpb0ZpbGhvKAogICAgICAgICAgICAgICAgICAgICAgX3ZtLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uaWQKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KQogICAgICAgICAgICA6IF92bS5fZSgpCiAgICAgICAgXSkKICAgICAgOiBfdm0uX2UoKQogIF0pCn0KdmFyIHN0YXRpY1JlbmRlckZucyA9IFtdCnJlbmRlci5fd2l0aFN0cmlwcGVkID0gdHJ1ZQoKZXhwb3J0IHsgcmVuZGVyLCBzdGF0aWNSZW5kZXJGbnMgfQ=="}]}