{"remainingRequest":"/Users/andreruz/Desktop/Marcia/Escapista/EscapeVirtual/cadastrosala/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/andreruz/Desktop/Marcia/Escapista/EscapeVirtual/cadastrosala/src/components/CadastroCenario.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/andreruz/Desktop/Marcia/Escapista/EscapeVirtual/cadastrosala/src/components/CadastroCenario.vue","mtime":1595546651000},{"path":"/Users/andreruz/Desktop/Marcia/Escapista/EscapeVirtual/cadastrosala/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/andreruz/Desktop/Marcia/Escapista/EscapeVirtual/cadastrosala/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/andreruz/Desktop/Marcia/Escapista/EscapeVirtual/cadastrosala/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/andreruz/Desktop/Marcia/Escapista/EscapeVirtual/cadastrosala/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDb2xvclBpY2tlciBmcm9tICd2dWUtY29sb3ItcGlja2VyLXdoZWVsJzsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJDYWRhc3Ryb0NlbmFyaW8iLAogICAgY29tcG9uZW50czogewogICAgICAgIENvbG9yUGlja2VyCiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICBpZiAodGhpcy5kYWRvc0luaWNpYWlzLmlkKSB7CiAgICAgICAgICAgIHRoaXMuY2FycmVnYXJEYWRvc1NhbHZvcyh0aGlzLmRhZG9zSW5pY2lhaXMpOwogICAgICAgIH0KICAgIH0sCiAgICBwcm9wczogewogICAgICAgIGlkOiB7fSwgCiAgICAgICAgbGlzdGFJdGVtQ2VuYXJpb3M6IHsgdHlwZTogQXJyYXkgfSwKICAgICAgICBsaXN0YU9iamV0b0NlbmFyaW9zOiB7IHR5cGU6IEFycmF5IH0sCiAgICAgICAgZGFkb3NJbmljaWFpczogeyB0eXBlOiBPYmplY3QgfSwKICAgICAgICB0aXBvSXRlbTogeyB0eXBlOiBPYmplY3QgfQogICAgfSwKICAgIGRhdGE6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIG5vbWVDZW5hcmlvOiAiIiwKICAgICAgICAgICAgaW1hZ2VtQ2VuYXJpbzogIiIsCiAgICAgICAgICAgIGluaWNpYWw6IHRoaXMuZGFkb3NJbmljaWFpcy5pbmljaWFsLAogICAgICAgICAgICBmaW5hbDogZmFsc2UsCiAgICAgICAgICAgIGlkVW5pY29JdGVtOiAwLAogICAgICAgICAgICBsaXN0YUNhZGVhZG86IFtdLAogICAgICAgICAgICBsaXN0YU9iamV0bzogW10sCiAgICAgICAgICAgIGxpc3RhT2JqZXRvUmVjaXBpZW50ZTogW10sCiAgICAgICAgICAgIGxpc3RhR3J1cG9SZWNpcGllbnRlOiBbXSwKICAgICAgICAgICAgbGlzdGFDZW5hcmlvRmlsaG86IFtdLAogICAgICAgICAgICBsaXN0YUl0ZW1PcmlnZW06IFtdLAogICAgICAgICAgICBpdGVtU2VsZWNpb25hZG9DZW5hcmlvOiB7IGlkOiAiIiwgdGlwbzogIiIgfSwKICAgICAgICAgICAgaXRlbVRhbWFuaG9QYWRyYW86IDUwLAogICAgICAgICAgICBpdGVtVGFtYW5ob01pbmltbzogOCwKICAgICAgICAgICAgbWFyY2FUYW1hbmhvUG9zaWNhb1BhZHJhbzogNCwKICAgICAgICAgICAgdGlwb0NhZGVhZG86IHsKICAgICAgICAgICAgICAgIE5VTUVSSUNPOiAxLCAKICAgICAgICAgICAgICAgIExFVFJBOiAyLCAKICAgICAgICAgICAgICAgIFNFVEE6IDMsCiAgICAgICAgICAgICAgICBDT1I6IDQsCiAgICAgICAgICAgICAgICBDVVNUT01JWkFETzogNQogICAgICAgICAgICB9LAogICAgICAgICAgICBvcGNhb1ZhbG9yQWRpY2lvbmFyOiAiIiwKICAgICAgICAgICAgc2VsZWN0Q3VzdG9taXphZG9BYmVydG86ICIiCiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBpbWFnZW1DZW5hcmlvQWx0ZXJhZGEoZSkgewogICAgICAgICAgICAvLyBBdHVhbGl6YSBhIHZpc3VhbGl6YcOnw6NvIGRhIGltYWdlbSBkbyBjZW7DoXJpbwogICAgICAgICAgICBjb25zdCBpbWFnZW0gPSBlLnRhcmdldC5maWxlc1swXTsKICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW1hZ2VtKTsKICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGUgPT4gewogICAgICAgICAgICAgICAgdGhpcy5pbWFnZW1DZW5hcmlvID0gZS50YXJnZXQucmVzdWx0OwogICAgICAgICAgICB9OwogICAgICAgIH0sCiAgICAgICAgZmlsdHJhckl0ZW1DZW5hcmlvcyhpdGVtKSB7CiAgICAgICAgICAgIC8vIEV4aWJlIGNvbW8gb3DDp8OjbyBkZSBPcmlnZW0gZG8gY2Vuw6FyaW8gYXBlbmFzIG9zIGl0ZW5zIHF1ZQogICAgICAgICAgICAvLyBuw6NvIGZhemVtIHBhcnRlIGRvIGNlbsOhcmlvCiAgICAgICAgICAgIC8vIGUgYWluZGEgbsOjbyBmb3JhbSB1dGlsaXphZG9zIGNvbW8gb3DDp8OjbyBlbSBvdXRyb3MgY2Vuw6FyaW9zIG91IGrDoSBlc3TDoSBzZWxlY2lvbmFkbyBubyBwcsOzcHJpbyBjZW7DoXJpbwogICAgICAgICAgICByZXR1cm4gaXRlbS5jZW5hcmlvSWQgIT09IHRoaXMuaWQgCiAgICAgICAgICAgICAgICAgICAgJiYgKGl0ZW0uY2VuYXJpb0lkRGVzdGlubyA9PT0gIiIgfHwgaXRlbS5jZW5hcmlvSWREZXN0aW5vID09PSB0aGlzLmlkKTsKICAgICAgICB9LAogICAgICAgIGV4aXN0ZUNlbmFyaW9EZXN0aW5vSXRlbUNlbmFyaW9zKGl0ZW1JZCkgewogICAgICAgICAgICAvLyBWZXJpZmljYSBzZSBvIGl0ZW0gZm9pIHNlbGVjaW9uYWRvIGNvbW8gb3DDp8OjbyBkZSBPcmlnZW0gZW0gYWxndW0gY2Vuw6FyaW8sIHBhcmEgbsOjbyBwZXJtaXRpciByZW1vdmVyCiAgICAgICAgICAgIGZvciAobGV0IGk9MDsgaTx0aGlzLmxpc3RhSXRlbUNlbmFyaW9zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5saXN0YUl0ZW1DZW5hcmlvc1tpXS5pZCA9PT0gaXRlbUlkICYmIHRoaXMubGlzdGFJdGVtQ2VuYXJpb3NbaV0uY2VuYXJpb0lkRGVzdGlubyAhPT0gIiIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSwKICAgICAgICB2ZXJpZmljYU9yaWdlbVNlbGVjaW9uYWRhKGl0ZW1JZCkgewogICAgICAgICAgICAvLyBWZXJpZmljYSBzZSBvIGl0ZW0gZXN0w6EgbmEgbGlzdGEgZGUgb3DDp8O1ZXMgZGUgT3JpZ2VtIHNlbGVjaW9uYWRhcyBkbyBjZW7DoXJpbwogICAgICAgICAgICBmb3IgKGxldCBpPTA7IGk8dGhpcy5saXN0YUl0ZW1PcmlnZW0ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmxpc3RhSXRlbU9yaWdlbVtpXSA9PT0gaXRlbUlkKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0sCiAgICAgICAgYWx0ZXJhck9yaWdlbShlKSB7CiAgICAgICAgICAgIC8vIEFkaWNpb25hIG91IHJlbW92ZSB1bSBpdGVtIGRhIGxpc3RhIGRlIG9ww6fDtWVzIGRlIE9yaWdlbSBzZWxlY2lvbmFkYXMgZG8gY2Vuw6FyaW8KICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQpIHsKICAgICAgICAgICAgICAgIHRoaXMubGlzdGFJdGVtT3JpZ2VtLnB1c2goZS50YXJnZXQudmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaT0wOyBpPHRoaXMubGlzdGFJdGVtT3JpZ2VtLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubGlzdGFJdGVtT3JpZ2VtW2ldID09PSBlLnRhcmdldC52YWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3RhSXRlbU9yaWdlbS5zcGxpY2UoaSwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLiRlbWl0KCdvcmlnZW1DZW5hcmlvQWx0ZXJhZGEnLCB7IGNlbmFyaW9JZDogdGhpcy5pZCwgaXRlbUlkOiBlLnRhcmdldC52YWx1ZSwgaXRlbVNlbGVjaW9uYWRvOiBlLnRhcmdldC5jaGVja2VkIH0pCiAgICAgICAgfSwKICAgICAgICBzZWxlY2lvbmFySXRlbUNlbmFyaW8oaXRlbSkgewogICAgICAgICAgICB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8gPSBpdGVtOwogICAgICAgIH0sCiAgICAgICAgZGVzZWxlY2lvbmFySXRlbUNlbmFyaW8oKSB7CiAgICAgICAgICAgIHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpbyA9IHsgaWQ6ICIiLCB0aXBvOiAiIiB9OwogICAgICAgIH0sCiAgICAgICAgYWx0ZXJhclBvc2ljYW9JdGVtQ2VuYXJpbyh7IGRlbHRhWCwgZGVsdGFZLCBmaXJzdCwgbGFzdCB9KSB7CiAgICAgICAgICAgIGlmIChmaXJzdCB8fCBsYXN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9YID0gKHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5wb3NpY2FvWCA/IHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5wb3NpY2FvWCA6IDApICsgZGVsdGFYOwogICAgICAgICAgICB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ucG9zaWNhb1kgPSAodGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9ZID8gdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9ZIDogMCkgKyBkZWx0YVk7CiAgICAgICAgfSwKICAgICAgICBhbHRlcmFyVGFtYW5ob0l0ZW1DZW5hcmlvKHsgZWwsIGRlbHRhWCwgZGVsdGFZLCBmaXJzdCwgbGFzdCB9KSB7CiAgICAgICAgICAgIGlmIChmaXJzdCB8fCBsYXN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IG5vdmFMYXJndXJhID0gMDsKICAgICAgICAgICAgbGV0IG5vdmFBbHR1cmEgPSAwOwogICAgICAgICAgICBpZiAoZWwuaWQgPT0gIm10bCIpIHsKICAgICAgICAgICAgICAgIG5vdmFMYXJndXJhID0gKHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5sYXJndXJhID8gdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmxhcmd1cmEgOiB0aGlzLml0ZW1UYW1hbmhvUGFkcmFvKSAtIGRlbHRhWDsKICAgICAgICAgICAgICAgIG5vdmFBbHR1cmEgPSAodGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmFsdHVyYSA/IHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5hbHR1cmEgOiB0aGlzLml0ZW1UYW1hbmhvUGFkcmFvKSAtIGRlbHRhWDsKICAgICAgICAgICAgICAgIGlmIChub3ZhTGFyZ3VyYSA+PSB0aGlzLml0ZW1UYW1hbmhvTWluaW1vICYmIG5vdmFBbHR1cmEgPj0gdGhpcy5pdGVtVGFtYW5ob01pbmltbykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ucG9zaWNhb1ggPSAodGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9YID8gdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9YIDogMCkgKyBkZWx0YVg7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmxhcmd1cmEgPSBub3ZhTGFyZ3VyYTsKICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ucG9zaWNhb1kgPSAodGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9ZID8gdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9ZIDogMCkgKyBkZWx0YVg7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmFsdHVyYSA9IG5vdmFBbHR1cmE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoZWwuaWQgPT0gIm10YyIpIHsKICAgICAgICAgICAgICAgIG5vdmFBbHR1cmEgPSAodGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmFsdHVyYSA/IHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5hbHR1cmEgOiB0aGlzLml0ZW1UYW1hbmhvUGFkcmFvKSAtIGRlbHRhWTsKICAgICAgICAgICAgICAgIGlmIChub3ZhQWx0dXJhID49IHRoaXMuaXRlbVRhbWFuaG9NaW5pbW8pCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9ZID0gKHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5wb3NpY2FvWSA/IHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5wb3NpY2FvWSA6IDApICsgZGVsdGFZOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5hbHR1cmEgPSBub3ZhQWx0dXJhOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKGVsLmlkID09ICJtdHIiKSB7CiAgICAgICAgICAgICAgICBub3ZhTGFyZ3VyYSA9ICh0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ubGFyZ3VyYSA/IHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5sYXJndXJhIDogdGhpcy5pdGVtVGFtYW5ob1BhZHJhbykgKyBkZWx0YVg7CiAgICAgICAgICAgICAgICBub3ZhQWx0dXJhID0gKHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5hbHR1cmEgPyB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uYWx0dXJhIDogdGhpcy5pdGVtVGFtYW5ob1BhZHJhbykgKyBkZWx0YVg7CiAgICAgICAgICAgICAgICBpZiAobm92YUxhcmd1cmEgPj0gdGhpcy5pdGVtVGFtYW5ob01pbmltbyAmJiBub3ZhQWx0dXJhID49IHRoaXMuaXRlbVRhbWFuaG9NaW5pbW8pCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmxhcmd1cmEgPSBub3ZhTGFyZ3VyYTsKICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ucG9zaWNhb1kgPSAodGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9ZID8gdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9ZIDogMCkgLSBkZWx0YVg7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmFsdHVyYSA9IG5vdmFBbHR1cmE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoZWwuaWQgPT0gIm1ibCIpIHsKICAgICAgICAgICAgICAgIG5vdmFMYXJndXJhID0gKHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5sYXJndXJhID8gdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmxhcmd1cmEgOiB0aGlzLml0ZW1UYW1hbmhvUGFkcmFvKSAtIGRlbHRhWDsKICAgICAgICAgICAgICAgIG5vdmFBbHR1cmEgPSAodGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmFsdHVyYSA/IHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5hbHR1cmEgOiB0aGlzLml0ZW1UYW1hbmhvUGFkcmFvKSAtIGRlbHRhWDsKICAgICAgICAgICAgICAgIGlmIChub3ZhTGFyZ3VyYSA+PSB0aGlzLml0ZW1UYW1hbmhvTWluaW1vICYmIG5vdmFBbHR1cmEgPj0gdGhpcy5pdGVtVGFtYW5ob01pbmltbykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ucG9zaWNhb1ggPSAodGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9YID8gdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnBvc2ljYW9YIDogMCkgKyBkZWx0YVg7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmxhcmd1cmEgPSBub3ZhTGFyZ3VyYTsKICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uYWx0dXJhID0gbm92YUFsdHVyYTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChlbC5pZCA9PSAibWJjIikgewogICAgICAgICAgICAgICAgbm92YUFsdHVyYSA9ICh0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uYWx0dXJhID8gdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmFsdHVyYSA6IHRoaXMuaXRlbVRhbWFuaG9QYWRyYW8pICsgZGVsdGFZOwogICAgICAgICAgICAgICAgaWYgKG5vdmFBbHR1cmEgPj0gdGhpcy5pdGVtVGFtYW5ob01pbmltbykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uYWx0dXJhID0gbm92YUFsdHVyYTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChlbC5pZCA9PSAibWJyIikgewogICAgICAgICAgICAgICAgbm92YUxhcmd1cmEgPSAodGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmxhcmd1cmEgPyB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ubGFyZ3VyYSA6IHRoaXMuaXRlbVRhbWFuaG9QYWRyYW8pICsgZGVsdGFYOwogICAgICAgICAgICAgICAgbm92YUFsdHVyYSA9ICh0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uYWx0dXJhID8gdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmFsdHVyYSA6IHRoaXMuaXRlbVRhbWFuaG9QYWRyYW8pICsgZGVsdGFYOwogICAgICAgICAgICAgICAgaWYgKG5vdmFMYXJndXJhID49IHRoaXMuaXRlbVRhbWFuaG9NaW5pbW8gJiYgbm92YUFsdHVyYSA+PSB0aGlzLml0ZW1UYW1hbmhvTWluaW1vKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5sYXJndXJhID0gbm92YUxhcmd1cmE7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmFsdHVyYSA9IG5vdmFBbHR1cmE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoZWwuaWQgPT0gIm1jbCIpIHsKICAgICAgICAgICAgICAgIG5vdmFMYXJndXJhID0gKHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5sYXJndXJhID8gdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmxhcmd1cmEgOiB0aGlzLml0ZW1UYW1hbmhvUGFkcmFvKSAtIGRlbHRhWDsKICAgICAgICAgICAgICAgIGlmIChub3ZhTGFyZ3VyYSA+PSB0aGlzLml0ZW1UYW1hbmhvTWluaW1vKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5wb3NpY2FvWCA9ICh0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ucG9zaWNhb1ggPyB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ucG9zaWNhb1ggOiAwKSArIGRlbHRhWDsKICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ubGFyZ3VyYSA9IG5vdmFMYXJndXJhOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKGVsLmlkID09ICJtY3IiKSB7CiAgICAgICAgICAgICAgICBub3ZhTGFyZ3VyYSA9ICh0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ubGFyZ3VyYSA/IHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5sYXJndXJhIDogdGhpcy5pdGVtVGFtYW5ob1BhZHJhbykgKyBkZWx0YVg7CiAgICAgICAgICAgICAgICBpZiAobm92YUxhcmd1cmEgPj0gdGhpcy5pdGVtVGFtYW5ob01pbmltbykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ubGFyZ3VyYSA9IG5vdmFMYXJndXJhOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhZGljaW9uYXJDYWRlYWRvKCkgewogICAgICAgICAgICAvLyBBZGljaW9uYSB1bSBjYWRlYWRvIG5vIGNlbsOhcmlvCiAgICAgICAgICAgIGNvbnN0IGNhZGVhZG9JZCA9IHRoaXMuaWQgKyAiLml0ZW0iICsgKCsrdGhpcy5pZFVuaWNvSXRlbSk7CiAgICAgICAgICAgIHRoaXMubGlzdGFDYWRlYWRvLnB1c2goewogICAgICAgICAgICAgICAgaWQ6IGNhZGVhZG9JZCwKICAgICAgICAgICAgICAgIHRpcG86IHRoaXMudGlwb0l0ZW0uQ0FERUFETywKICAgICAgICAgICAgICAgIG5vbWU6ICIiLAogICAgICAgICAgICAgICAgaW1hZ2VtRm9jbzogIiIsCiAgICAgICAgICAgICAgICB0aXBvQ2FkZWFkbzogdGhpcy50aXBvQ2FkZWFkby5OVU1FUklDTywKICAgICAgICAgICAgICAgIG9wY29lc1ZhbG9yZXM6IFsiMCIsIjEiLCIyIiwiMyIsIjQiLCI1IiwiNiIsIjciLCI4IiwiOSJdLAogICAgICAgICAgICAgICAgcXRkRGlnaXRvc1NlbmhhOiAzLAogICAgICAgICAgICAgICAgc2VuaGE6IFsiIiwgIiIsICIiXSwKICAgICAgICAgICAgICAgIGxhcmd1cmE6IHRoaXMuaXRlbVRhbWFuaG9QYWRyYW8sCiAgICAgICAgICAgICAgICBhbHR1cmE6IHRoaXMuaXRlbVRhbWFuaG9QYWRyYW8sCiAgICAgICAgICAgICAgICBwb3NpY2FvWDogMCwKICAgICAgICAgICAgICAgIHBvc2ljYW9ZOiAwCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHRoaXMuJGVtaXQoIml0ZW1BZGljaW9uYWRvIiwgeyBpZDogY2FkZWFkb0lkLCB0aXBvOiB0aGlzLnRpcG9JdGVtLkNBREVBRE8sIGNlbmFyaW9JZDogdGhpcy5pZCwgbm9tZUNlbmFyaW86IHRoaXMubm9tZUNlbmFyaW8gPyB0aGlzLm5vbWVDZW5hcmlvIDogdGhpcy5pZCwgbm9tZUl0ZW06IGNhZGVhZG9JZCwgY2VuYXJpb0lkRGVzdGlubzogIiIgfSkKICAgICAgICAgICAgdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvID0gdGhpcy5saXN0YUNhZGVhZG9bdGhpcy5saXN0YUNhZGVhZG8ubGVuZ3RoLTFdOwogICAgICAgIH0sCiAgICAgICAgcmVtb3ZlckNhZGVhZG8oY2FkZWFkb0lkKSB7CiAgICAgICAgICAgIGlmIChjb25maXJtKCJDb25maXJtYSBhIGV4Y2x1c8OjbyBkbyBjYWRlYWRvPyIpKSB7CiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdW0gY2FkZWFkbyBkbyBjZW7DoXJpbwogICAgICAgICAgICAgICAgZm9yIChsZXQgaT0wOyBpPHRoaXMubGlzdGFDYWRlYWRvLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubGlzdGFDYWRlYWRvW2ldLmlkID09PSBjYWRlYWRvSWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0YUNhZGVhZG8uc3BsaWNlKGksIDEpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCJpdGVtUmVtb3ZpZG8iLCB7IGlkOiBjYWRlYWRvSWQsIHRpcG86IHRoaXMudGlwb0l0ZW0uQ0FERUFETyB9KQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8gPSB7IGlkOiAiIiwgdGlwbzogIiIgfTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYWx0ZXJhck9wY29lc1ZhbG9yZXNUaXBvQ2FkZWFkbygpIHsKICAgICAgICAgICAgLy8gQWx0ZXJhIGFzIG9ww6fDtWVzIGRlIHZhbG9yZXMgZGVwZW5kZW5kbyBkbyB0aXBvIGRlIGNhZGVhZG8KICAgICAgICAgICAgaWYgKHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby50aXBvQ2FkZWFkbyA9PSB0aGlzLnRpcG9DYWRlYWRvLk5VTUVSSUNPKSB7CiAgICAgICAgICAgICAgICB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ub3Bjb2VzVmFsb3JlcyA9IFsiMCIsIjEiLCIyIiwiMyIsIjQiLCI1IiwiNiIsIjciLCI4IiwiOSJdOwogICAgICAgICAgICB9IAogICAgICAgICAgICBlbHNlIGlmICh0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8udGlwb0NhZGVhZG8gPT0gdGhpcy50aXBvQ2FkZWFkby5MRVRSQSkgewogICAgICAgICAgICAgICAgdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLm9wY29lc1ZhbG9yZXMgPSBbIkEiLCJCIiwiQyIsIkQiLCJFIiwiRiIsIkciLCJIIiwiSSIsIkoiLCJLIiwiTCIsIk0iLCJOIiwiTyIsIlAiLCJRIiwiUiIsIlMiLCJUIiwiVSIsIlYiLCJYIiwiWSIsIlciLCJaIl07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnRpcG9DYWRlYWRvID09IHRoaXMudGlwb0NhZGVhZG8uU0VUQSkgewogICAgICAgICAgICAgICAgdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLm9wY29lc1ZhbG9yZXMgPSBbIkVzcXVlcmRhIiwiRGlyZWl0YSIsIkJhaXhvIiwiQ2ltYSJdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLm9wY29lc1ZhbG9yZXMgPSBbXTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLm9wY2FvVmFsb3JBZGljaW9uYXIgPSAiIjsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uc2VuaGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5zZW5oYVtpXSA9ICIiOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhbHRlcmFyUXRkRGlnaXRvc1NlbmhhQ2FkZWFkbygpIHsKICAgICAgICAgICAgLy8gQWx0ZXJhIGEgc2VuaGEgZGUgYWNvcmRvIGNvbSBhIHF1YW50aWRhZGUgZGUgZMOtZ2l0b3MKICAgICAgICAgICAgaWYgKHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5zZW5oYS5sZW5ndGggPCB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ucXRkRGlnaXRvc1NlbmhhKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB3aGlsZSAodGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnNlbmhhLmxlbmd0aCA8IHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5xdGREaWdpdG9zU2VuaGEpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uc2VuaGEucHVzaCgiIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnNlbmhhLmxlbmd0aCA+IHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5xdGREaWdpdG9zU2VuaGEpIHsKICAgICAgICAgICAgICAgIHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5zZW5oYS5zcGxpY2UodGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnNlbmhhLmxlbmd0aCAtIHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5xdGREaWdpdG9zU2VuaGEgLSAxLCB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uc2VuaGEubGVuZ3RoIC0gdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnF0ZERpZ2l0b3NTZW5oYSk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGltYWdlbUZvY29DYWRlYWRvQWx0ZXJhZGEoZSkgewogICAgICAgICAgICAvLyBBdHVhbGl6YSBhIHZpc3VhbGl6YcOnw6NvIGRhIGltYWdlbSBkbyBjYWRlYWRvCiAgICAgICAgICAgIGNvbnN0IGltYWdlbSA9IGUudGFyZ2V0LmZpbGVzWzBdOwogICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChpbWFnZW0pOwogICAgICAgICAgICByZWFkZXIub25sb2FkID0gZSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uaW1hZ2VtRm9jbyA9IGUudGFyZ2V0LnJlc3VsdDsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgZS50YXJnZXQudmFsdWUgPSAiIjsKICAgICAgICB9LAogICAgICAgIHNlbGVjaW9uYXJDb3JPcGNvZXNWYWxvcmVzKGNvcikgewogICAgICAgICAgICB0aGlzLm9wY2FvVmFsb3JBZGljaW9uYXIgPSBjb3I7CiAgICAgICAgfSwKICAgICAgICBhZGljaW9uYXJPcGNhb1ZhbG9yKCkgewogICAgICAgICAgICAvLyBBZGljaW9uYSB1bSBpdGVtIG5hcyBvcMOnw7VlcyBkZSB2YWxvcmVzIGRvIGNhZGVhZG8KICAgICAgICAgICAgaWYgKHRoaXMub3BjYW9WYWxvckFkaWNpb25hci50cmltKCkgIT0gIiIpIHsKICAgICAgICAgICAgICAgIGxldCBleGlzdGVPcGNhbyA9IGZhbHNlOwogICAgICAgICAgICAgICAgZm9yIChsZXQgaT0wOyBpPHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5vcGNvZXNWYWxvcmVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5vcGNvZXNWYWxvcmVzW2ldLnRyaW0oKS50b0xvd2VyQ2FzZSgpID09IHRoaXMub3BjYW9WYWxvckFkaWNpb25hci50cmltKCkudG9Mb3dlckNhc2UoKSkgewogICAgICAgICAgICAgICAgICAgICAgICBleGlzdGVPcGNhbyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICghZXhpc3RlT3BjYW8pIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ub3Bjb2VzVmFsb3Jlcy5wdXNoKHRoaXMub3BjYW9WYWxvckFkaWNpb25hcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLm9wY2FvVmFsb3JBZGljaW9uYXIgPSAiIjsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgcmVtb3Zlck9wY2FvVmFsb3Iob3BjYW8pIHsKICAgICAgICAgICAgLy8gUmVtb3ZlIHVtIGl0ZW0gZGFzIG9ww6fDtWVzIGRlIHZhbG9yZXMgZG8gY2FkZWFkbwogICAgICAgICAgICBmb3IgKGxldCBpPTA7IGk8dGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLm9wY29lc1ZhbG9yZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ub3Bjb2VzVmFsb3Jlc1tpXS50cmltKCkudG9Mb3dlckNhc2UoKSA9PSBvcGNhby50cmltKCkudG9Mb3dlckNhc2UoKSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5vcGNvZXNWYWxvcmVzLnNwbGljZShpLCAxKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGxldCBpPTA7IGk8dGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnNlbmhhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnNlbmhhW2ldLnRyaW0oKS50b0xvd2VyQ2FzZSgpID09IG9wY2FvLnRyaW0oKS50b0xvd2VyQ2FzZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnNlbmhhW2ldID0gIiI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFicmlyT3Bjb2VzU2VsZWN0Q3VzdG9taXphZG8oc2VsZWN0SWQpIHsKICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0Q3VzdG9taXphZG9BYmVydG8gPT0gc2VsZWN0SWQpIHsKICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q3VzdG9taXphZG9BYmVydG8gPSAiIjsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q3VzdG9taXphZG9BYmVydG8gPSBzZWxlY3RJZDsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgc2VsZWNpb25hck9wY2FvU2VsZWN0Q3VzdG9taXphZG8oaW5kaWNlLCBvcGNhbykgewogICAgICAgICAgICB0aGlzLnNlbGVjdEN1c3RvbWl6YWRvQWJlcnRvID0gIiI7CiAgICAgICAgICAgIHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5zZW5oYVtpbmRpY2VdID0gb3BjYW87CiAgICAgICAgfSwKICAgICAgICBhZGljaW9uYXJPYmpldG8oKSB7CiAgICAgICAgICAgIC8vIEFkaWNpb25hIHVtIG9iamV0byBubyBjZW7DoXJpbwogICAgICAgICAgICBjb25zdCBvYmpldG9JZCA9IHRoaXMuaWQgKyAiLml0ZW0iICsgKCsrdGhpcy5pZFVuaWNvSXRlbSk7CiAgICAgICAgICAgIHRoaXMubGlzdGFPYmpldG8ucHVzaCh7CiAgICAgICAgICAgICAgICBpZDogb2JqZXRvSWQsCiAgICAgICAgICAgICAgICB0aXBvOiB0aGlzLnRpcG9JdGVtLk9CSkVUTywKICAgICAgICAgICAgICAgIG5vbWU6ICIiLAogICAgICAgICAgICAgICAgaW1hZ2VtOiAiIiwKICAgICAgICAgICAgICAgIGxhcmd1cmE6IHRoaXMuaXRlbVRhbWFuaG9QYWRyYW8sCiAgICAgICAgICAgICAgICBhbHR1cmE6IHRoaXMuaXRlbVRhbWFuaG9QYWRyYW8sCiAgICAgICAgICAgICAgICBwb3NpY2FvWDogMCwKICAgICAgICAgICAgICAgIHBvc2ljYW9ZOiAwCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHRoaXMuJGVtaXQoIml0ZW1BZGljaW9uYWRvIiwgeyBpZDogb2JqZXRvSWQsIHRpcG86IHRoaXMudGlwb0l0ZW0uT0JKRVRPLCBjZW5hcmlvSWQ6IHRoaXMuaWQsIG5vbWVDZW5hcmlvOiB0aGlzLm5vbWVDZW5hcmlvID8gdGhpcy5ub21lQ2VuYXJpbyA6IHRoaXMuaWQsIG5vbWVJdGVtOiBvYmpldG9JZCwgbGlzdGFPYmpldG9SZWNpcGllbnRlSWREZXN0aW5vOiBbXSwgaW1hZ2VtOiAiIiB9KQogICAgICAgICAgICB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8gPSB0aGlzLmxpc3RhT2JqZXRvW3RoaXMubGlzdGFPYmpldG8ubGVuZ3RoLTFdOwogICAgICAgIH0sCiAgICAgICAgcmVtb3Zlck9iamV0byhvYmpldG9JZCkgewogICAgICAgICAgICBpZiAoY29uZmlybSgiQ29uZmlybWEgYSBleGNsdXPDo28gZG8gb2JqZXRvPyIpKSB7CiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdW0gb2JqZXRvIGRvIGNlbsOhcmlvCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpPTA7IGk8dGhpcy5saXN0YU9iamV0by5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmxpc3RhT2JqZXRvW2ldLmlkID09PSBvYmpldG9JZCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3RhT2JqZXRvLnNwbGljZShpLCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgiaXRlbVJlbW92aWRvIiwgeyBpZDogb2JqZXRvSWQsIHRpcG86IHRoaXMudGlwb0l0ZW0uT0JKRVRPIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpbyA9IHsgaWQ6ICIiLCB0aXBvOiAiIiB9OwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBpbWFnZW1PYmpldG9BbHRlcmFkYShlKSB7CiAgICAgICAgICAgIC8vIEF0dWFsaXphIGEgdmlzdWFsaXphw6fDo28gZGEgaW1hZ2VtIGRvIG9iamV0bwogICAgICAgICAgICBjb25zdCBpbWFnZW0gPSBlLnRhcmdldC5maWxlc1swXTsKICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW1hZ2VtKTsKICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGUgPT4gewogICAgICAgICAgICAgICAgdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmltYWdlbSA9IGUudGFyZ2V0LnJlc3VsdDsKICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2ltYWdlbU9iamV0b0FsdGVyYWRhJywgeyBpdGVtSWQ6IHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5pZCwgaW1hZ2VtOiB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8uaW1hZ2VtIH0pOwogICAgICAgICAgICB9OwogICAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9ICIiOyAgICAgICAgICAgIAogICAgICAgIH0sCiAgICAgICAgZXhpc3RlUmVjaXBpZW50ZURlc3Rpbm9PYmpldG9DZW5hcmlvcyhvYmpldG9JZCkgewogICAgICAgICAgICAvLyBWZXJpZmljYSBzZSBvIG9iamV0byBmb2kgc2VsZWNpb25hZG8gY29tbyBvcMOnw6NvIGVtIGFsZ3VtIHJlY2lwaWVudGUsIHBhcmEgbsOjbyBwZXJtaXRpciByZW1vdmVyCiAgICAgICAgICAgIGZvciAobGV0IGk9MDsgaTx0aGlzLmxpc3RhT2JqZXRvQ2VuYXJpb3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmxpc3RhT2JqZXRvQ2VuYXJpb3NbaV0uaWQgPT09IG9iamV0b0lkICYmIHRoaXMubGlzdGFPYmpldG9DZW5hcmlvc1tpXS5saXN0YU9iamV0b1JlY2lwaWVudGVJZERlc3Rpbm8ubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9LAogICAgICAgIGFkaWNpb25hck9iamV0b1JlY2lwaWVudGUoKSB7CiAgICAgICAgICAgIC8vIEFkaWNpb25hIHVtIHJlY2lwaWVudGUgZGUgb2JqZXRvIG5vIGNlbsOhcmlvCiAgICAgICAgICAgIGNvbnN0IG9iamV0b1JlY2lwaWVudGVJZCA9IHRoaXMuaWQgKyAiLml0ZW0iICsgKCsrdGhpcy5pZFVuaWNvSXRlbSk7CiAgICAgICAgICAgIHRoaXMubGlzdGFPYmpldG9SZWNpcGllbnRlLnB1c2goewogICAgICAgICAgICAgICAgaWQ6IG9iamV0b1JlY2lwaWVudGVJZCwKICAgICAgICAgICAgICAgIHRpcG86IHRoaXMudGlwb0l0ZW0uT0JKRVRPX1JFQ0lQSUVOVEUsCiAgICAgICAgICAgICAgICBub21lOiAiIiwKICAgICAgICAgICAgICAgIG9iamV0b3M6IFtdLAogICAgICAgICAgICAgICAgbGFyZ3VyYTogdGhpcy5pdGVtVGFtYW5ob1BhZHJhbywKICAgICAgICAgICAgICAgIGFsdHVyYTogdGhpcy5pdGVtVGFtYW5ob1BhZHJhbywKICAgICAgICAgICAgICAgIHBvc2ljYW9YOiAwLAogICAgICAgICAgICAgICAgcG9zaWNhb1k6IDAKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpbyA9IHRoaXMubGlzdGFPYmpldG9SZWNpcGllbnRlW3RoaXMubGlzdGFPYmpldG9SZWNpcGllbnRlLmxlbmd0aC0xXTsKICAgICAgICB9LAogICAgICAgIHJlbW92ZXJPYmpldG9SZWNpcGllbnRlKG9iamV0b1JlY2lwaWVudGVJZCkgewogICAgICAgICAgICBpZiAoY29uZmlybSgiQ29uZmlybWEgYSBleGNsdXPDo28gZG8gcmVjaXBpZW50ZSBkZSBvYmpldG8/IikpIHsKICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB1bSByZWNpcGllbnRlIGRlIG9iamV0byBkbyBjZW7DoXJpbwogICAgICAgICAgICAgICAgZm9yIChsZXQgaT0wOyBpPHRoaXMubGlzdGFPYmpldG9SZWNpcGllbnRlLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubGlzdGFPYmpldG9SZWNpcGllbnRlW2ldLmlkID09PSBvYmpldG9SZWNpcGllbnRlSWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0YU9iamV0b1JlY2lwaWVudGUuc3BsaWNlKGksIDEpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8gPSB7IGlkOiAiIiwgdGlwbzogIiIgfTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdmVyaWZpY2FPYmpldG9SZWNpcGllbnRlU2VsZWNpb25hZG8ob2JqZXRvSWQpIHsKICAgICAgICAgICAgLy8gVmVyaWZpY2Egc2UgbyBvYmpldG8gZXN0w6EgbmEgbGlzdGEgZGUgb3DDp8O1ZXMgZGUgb2JqZXRvIHNlbGVjaW9uYWRhcyBkbyByZWNpcGllbnRlCiAgICAgICAgICAgIGZvciAobGV0IGk9MDsgaTx0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ub2JqZXRvcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgaWYgKHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5vYmpldG9zW2ldID09PSBvYmpldG9JZCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9LAogICAgICAgIGFsdGVyYXJPYmpldG9SZWNpcGllbnRlKGUpIHsKICAgICAgICAgICAgLy8gQWRpY2lvbmEgb3UgcmVtb3ZlIHVtIG9iamV0byBkYSBsaXN0YSBkZSBvcMOnw7VlcyBkZSBvYmpldG8gc2VsZWNpb25hZGFzIGRvIHJlY2lwaWVudGUKICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQpIHsKICAgICAgICAgICAgICAgIHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5vYmpldG9zLnB1c2goZS50YXJnZXQudmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaT0wOyBpPHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5vYmpldG9zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5vYmpldG9zW2ldID09PSBlLnRhcmdldC52YWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ub2JqZXRvcy5zcGxpY2UoaSwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLiRlbWl0KCdvYmpldG9SZWNpcGllbnRlQWx0ZXJhZG8nLCB7IG9iamV0b1JlY2lwaWVudGVJZDogdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmlkLCBvYmpldG9JZDogZS50YXJnZXQudmFsdWUsIG9iamV0b1NlbGVjaW9uYWRvOiBlLnRhcmdldC5jaGVja2VkIH0pCiAgICAgICAgfSwKICAgICAgICByZXRvcm5hckltYWdlbU9iamV0byhvYmpldG9JZCkgewogICAgICAgICAgICAvLyBSZXRvcm5hIGEgaW1hZ2VtIGRlIHVtIG9iamV0byBwYXJhIG1vc3RyYXIgbm8gcmVjaXBpZW50ZQogICAgICAgICAgICBmb3IgKGxldCBpPTA7IGk8dGhpcy5saXN0YU9iamV0b0NlbmFyaW9zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5saXN0YU9iamV0b0NlbmFyaW9zW2ldLmlkID09PSBvYmpldG9JZCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmxpc3RhT2JqZXRvQ2VuYXJpb3NbaV0uaW1hZ2VtOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAiIjsKICAgICAgICB9LAogICAgICAgIGV4aXN0ZUdydXBvUmVjaXBpZW50ZShvYmpldG9SZWNpcGllbnRlSWQpIHsKICAgICAgICAgICAgLy8gVmVyaWZpY2Egc2UgbyByZWNpcGllbnRlIGRlIG9iamV0byBmb2kgc2VsZWNpb25hZG8gY29tbyBvcMOnw6NvIGVtIGFsZ3VtIGdydXBvLCBwYXJhIG7Do28gcGVybWl0aXIgcmVtb3ZlcgogICAgICAgICAgICBmb3IgKGxldCBpPTA7IGk8dGhpcy5saXN0YUdydXBvUmVjaXBpZW50ZS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaj0wOyBqPHRoaXMubGlzdGFHcnVwb1JlY2lwaWVudGVbaV0ucmVjaXBpZW50ZXMubGVuZ3RoOyBqKyspewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmxpc3RhR3J1cG9SZWNpcGllbnRlW2ldLnJlY2lwaWVudGVzW2pdID09PSBvYmpldG9SZWNpcGllbnRlSWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSAgICAgICAgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0sCiAgICAgICAgYWRpY2lvbmFyR3J1cG9SZWNpcGllbnRlKCkgewogICAgICAgICAgICAvLyBBZGljaW9uYSB1bSBncnVwbyBkZSByZWNpcGllbnRlIG5vIGNlbsOhcmlvCiAgICAgICAgICAgIGNvbnN0IGdydXBvUmVjaXBpZW50ZUlkID0gdGhpcy5pZCArICIuaXRlbSIgKyAoKyt0aGlzLmlkVW5pY29JdGVtKTsKICAgICAgICAgICAgdGhpcy5saXN0YUdydXBvUmVjaXBpZW50ZS5wdXNoKHsKICAgICAgICAgICAgICAgIGlkOiBncnVwb1JlY2lwaWVudGVJZCwKICAgICAgICAgICAgICAgIHRpcG86IHRoaXMudGlwb0l0ZW0uR1JVUE9fUkVDSVBJRU5URSwKICAgICAgICAgICAgICAgIG5vbWU6ICIiLAogICAgICAgICAgICAgICAgaW1hZ2VtRm9jbzogIiIsCiAgICAgICAgICAgICAgICByZWNpcGllbnRlczogW10KICAgICAgICAgICAgfSkKICAgICAgICAgICAgdGhpcy4kZW1pdCgiaXRlbUFkaWNpb25hZG8iLCB7IGlkOiBncnVwb1JlY2lwaWVudGVJZCwgdGlwbzogdGhpcy50aXBvSXRlbS5HUlVQT19SRUNJUElFTlRFLCBjZW5hcmlvSWQ6IHRoaXMuaWQsIG5vbWVDZW5hcmlvOiB0aGlzLm5vbWVDZW5hcmlvID8gdGhpcy5ub21lQ2VuYXJpbyA6IHRoaXMuaWQsIG5vbWVJdGVtOiBncnVwb1JlY2lwaWVudGVJZCwgY2VuYXJpb0lkRGVzdGlubzogIiIgfSkKICAgICAgICAgICAgdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvID0gdGhpcy5saXN0YUdydXBvUmVjaXBpZW50ZVt0aGlzLmxpc3RhR3J1cG9SZWNpcGllbnRlLmxlbmd0aC0xXTsKICAgICAgICB9LAogICAgICAgIHJlbW92ZXJHcnVwb1JlY2lwaWVudGUoZ3J1cG9SZWNpcGllbnRlSWQpIHsKICAgICAgICAgICAgaWYgKGNvbmZpcm0oIkNvbmZpcm1hIGEgZXhjbHVzw6NvIGRvIGdydXBvIGRlIHJlY2lwaWVudGU/IikpIHsKICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB1bSBncnVwbyBkZSByZWNpcGllbnRlIGRvIGNlbsOhcmlvCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpPTA7IGk8dGhpcy5saXN0YUdydXBvUmVjaXBpZW50ZS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmxpc3RhR3J1cG9SZWNpcGllbnRlW2ldLmlkID09PSBncnVwb1JlY2lwaWVudGVJZCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3RhR3J1cG9SZWNpcGllbnRlLnNwbGljZShpLCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgiaXRlbVJlbW92aWRvIiwgeyBpZDogZ3J1cG9SZWNpcGllbnRlSWQsIHRpcG86IHRoaXMudGlwb0l0ZW0uR1JVUE9fUkVDSVBJRU5URSB9KQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8gPSB7IGlkOiAiIiwgdGlwbzogIiIgfTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgaW1hZ2VtRm9jb0dydXBvUmVjaXBpZW50ZUFsdGVyYWRhKGUpIHsKICAgICAgICAgICAgLy8gQXR1YWxpemEgYSB2aXN1YWxpemHDp8OjbyBkYSBpbWFnZW0gZG8gZ3J1cG8gZGUgcmVjaXBpZW50ZQogICAgICAgICAgICBjb25zdCBpbWFnZW0gPSBlLnRhcmdldC5maWxlc1swXTsKICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW1hZ2VtKTsKICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGUgPT4gewogICAgICAgICAgICAgICAgdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmltYWdlbUZvY28gPSBlLnRhcmdldC5yZXN1bHQ7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID0gIiI7CiAgICAgICAgfSwKICAgICAgICBmaWx0cmFyT2JqZXRvUmVjaXBpZW50ZShpdGVtKSB7CiAgICAgICAgICAgIC8vIEV4aWJlIGNvbW8gb3DDp8OjbyBkZSByZWNpcGllbnRlIHBhcmEgdW0gZ3J1cG8gYXBlbmFzIG9zIGl0ZW5zIHF1ZQogICAgICAgICAgICAvLyBhaW5kYSBuw6NvIGZvcmFtIHV0aWxpemFkb3MgY29tbyBvcMOnw6NvIGVtIG91dHJvIGdydXBvIG91IGrDoSBlc3TDoSBzZWxlY2lvbmFkbyBubyBwcsOzcHJpbyBncnVwbwogICAgICAgICAgICBmb3IgKGxldCBpPTA7IGk8dGhpcy5saXN0YUdydXBvUmVjaXBpZW50ZS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaj0wOyBqPHRoaXMubGlzdGFHcnVwb1JlY2lwaWVudGVbaV0ucmVjaXBpZW50ZXMubGVuZ3RoOyBqKyspewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmxpc3RhR3J1cG9SZWNpcGllbnRlW2ldLnJlY2lwaWVudGVzW2pdID09PSBpdGVtLmlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmxpc3RhR3J1cG9SZWNpcGllbnRlW2ldLmlkID09IHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5pZDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9ICAgICAgICAKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9LAogICAgICAgIHZlcmlmaWNhR3J1cG9SZWNpcGllbnRlU2VsZWNpb25hZG8ob2JqZXRvUmVjaXBpZW50ZUlkKSB7CiAgICAgICAgICAgIC8vIFZlcmlmaWNhIHNlIG8gcmVjaXBpZW50ZSBkZSBvYmpldG8gZXN0w6EgbmEgbGlzdGEgZGUgb3DDp8O1ZXMgZGUgcmVjaXBpZW50ZSBzZWxlY2lvbmFkYXMgZG8gZ3J1cG8KICAgICAgICAgICAgZm9yIChsZXQgaT0wOyBpPHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5yZWNpcGllbnRlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgaWYgKHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5yZWNpcGllbnRlc1tpXSA9PT0gb2JqZXRvUmVjaXBpZW50ZUlkKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0sCiAgICAgICAgYWx0ZXJhclJlY2lwaWVudGVHcnVwbyhlKSB7CiAgICAgICAgICAgIC8vIEFkaWNpb25hIG91IHJlbW92ZSB1bSByZWNpcGllbnRlIGRhIGxpc3RhIGRlIG9ww6fDtWVzIGRlIHJlY2lwaWVudGUgc2VsZWNpb25hZGFzIGRvIGdydXBvCiAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkKSB7CiAgICAgICAgICAgICAgICB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8ucmVjaXBpZW50ZXMucHVzaChlLnRhcmdldC52YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBpPTA7IGk8dGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnJlY2lwaWVudGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXRlbVNlbGVjaW9uYWRvQ2VuYXJpby5yZWNpcGllbnRlc1tpXSA9PT0gZS50YXJnZXQudmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLnJlY2lwaWVudGVzLnNwbGljZShpLCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhZGljaW9uYXJDZW5hcmlvRmlsaG8oKSB7CiAgICAgICAgICAgIC8vIEFkaWNpb25hIHVtIGNlbsOhcmlvIGZpbGhvIG5vIGNlbsOhcmlvCiAgICAgICAgICAgIGNvbnN0IGNlbmFyaW9GaWxob0lkID0gdGhpcy5pZCArICIuaXRlbSIgKyAoKyt0aGlzLmlkVW5pY29JdGVtKTsKICAgICAgICAgICAgdGhpcy5saXN0YUNlbmFyaW9GaWxoby5wdXNoKHsKICAgICAgICAgICAgICAgIGlkOiBjZW5hcmlvRmlsaG9JZCwKICAgICAgICAgICAgICAgIHRpcG86IHRoaXMudGlwb0l0ZW0uQ0VOQVJJT19GSUxITywKICAgICAgICAgICAgICAgIG5vbWU6ICIiLAogICAgICAgICAgICAgICAgaW1hZ2VtRm9jbzogIiIsCiAgICAgICAgICAgICAgICBsYXJndXJhOiB0aGlzLml0ZW1UYW1hbmhvUGFkcmFvLAogICAgICAgICAgICAgICAgYWx0dXJhOiB0aGlzLml0ZW1UYW1hbmhvUGFkcmFvLAogICAgICAgICAgICAgICAgcG9zaWNhb1g6IDAsCiAgICAgICAgICAgICAgICBwb3NpY2FvWTogMAogICAgICAgICAgICB9KQogICAgICAgICAgICB0aGlzLiRlbWl0KCJpdGVtQWRpY2lvbmFkbyIsIHsgaWQ6IGNlbmFyaW9GaWxob0lkLCB0aXBvOiB0aGlzLnRpcG9JdGVtLkNFTkFSSU9fRklMSE8sIGNlbmFyaW9JZDogdGhpcy5pZCwgbm9tZUNlbmFyaW86IHRoaXMubm9tZUNlbmFyaW8gPyB0aGlzLm5vbWVDZW5hcmlvIDogdGhpcy5pZCwgbm9tZUl0ZW06IGNlbmFyaW9GaWxob0lkLCBjZW5hcmlvSWREZXN0aW5vOiAiIiB9KQogICAgICAgICAgICB0aGlzLml0ZW1TZWxlY2lvbmFkb0NlbmFyaW8gPSB0aGlzLmxpc3RhQ2VuYXJpb0ZpbGhvW3RoaXMubGlzdGFDZW5hcmlvRmlsaG8ubGVuZ3RoLTFdOwogICAgICAgIH0sCiAgICAgICAgcmVtb3ZlckNlbmFyaW9GaWxobyhjZW5hcmlvRmlsaG9JZCkgewogICAgICAgICAgICBpZiAoY29uZmlybSgiQ29uZmlybWEgYSBleGNsdXPDo28gZG8gY2Vuw6FyaW8gZmlsaG8/IikpIHsKICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB1bSBjZW7DoXJpbyBmaWxobyBkbyBjZW7DoXJpbwogICAgICAgICAgICAgICAgZm9yIChsZXQgaT0wOyBpPHRoaXMubGlzdGFDZW5hcmlvRmlsaG8ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5saXN0YUNlbmFyaW9GaWxob1tpXS5pZCA9PT0gY2VuYXJpb0ZpbGhvSWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0YUNlbmFyaW9GaWxoby5zcGxpY2UoaSwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoIml0ZW1SZW1vdmlkbyIsIHsgaWQ6IGNlbmFyaW9GaWxob0lkLCB0aXBvOiB0aGlzLnRpcG9JdGVtLkNFTkFSSU9fRklMSE8gfSkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvID0geyBpZDogIiIsIHRpcG86ICIiIH07CiAgICAgICAgICAgIH0KICAgICAgICB9LCAgICAgICAKICAgICAgICBpbWFnZW1Gb2NvQ2VuYXJpb0ZpbGhvQWx0ZXJhZGEoZSkgewogICAgICAgICAgICAvLyBBdHVhbGl6YSBhIHZpc3VhbGl6YcOnw6NvIGRhIGltYWdlbSBkbyBjZW7DoXJpbyBmaWxobwogICAgICAgICAgICBjb25zdCBpbWFnZW0gPSBlLnRhcmdldC5maWxlc1swXTsKICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW1hZ2VtKTsKICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGUgPT4gewogICAgICAgICAgICAgICAgdGhpcy5pdGVtU2VsZWNpb25hZG9DZW5hcmlvLmltYWdlbUZvY28gPSBlLnRhcmdldC5yZXN1bHQ7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID0gIiI7CiAgICAgICAgfSwKICAgICAgICByZXRvcm5hclNhbHZhcigpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGlkOiB0aGlzLmlkLAogICAgICAgICAgICAgICAgaW5pY2lhbDogdGhpcy5pbmljaWFsLAogICAgICAgICAgICAgICAgbGlzdGFJdGVtT3JpZ2VtOiB0aGlzLmxpc3RhSXRlbU9yaWdlbSwKICAgICAgICAgICAgICAgIGZpbmFsOiB0aGlzLmZpbmFsLAogICAgICAgICAgICAgICAgbm9tZTogdGhpcy5ub21lQ2VuYXJpbywKICAgICAgICAgICAgICAgIGltYWdlbTogdGhpcy5pbWFnZW1DZW5hcmlvLAogICAgICAgICAgICAgICAgbGlzdGFDYWRlYWRvOiB0aGlzLmxpc3RhQ2FkZWFkbywKICAgICAgICAgICAgICAgIGxpc3RhT2JqZXRvOiB0aGlzLmxpc3RhT2JqZXRvLAogICAgICAgICAgICAgICAgbGlzdGFPYmpldG9SZWNpcGllbnRlOiB0aGlzLmxpc3RhT2JqZXRvUmVjaXBpZW50ZSwKICAgICAgICAgICAgICAgIGxpc3RhR3J1cG9SZWNpcGllbnRlOiB0aGlzLmxpc3RhR3J1cG9SZWNpcGllbnRlLAogICAgICAgICAgICAgICAgbGlzdGFDZW5hcmlvRmlsaG86IHRoaXMubGlzdGFDZW5hcmlvRmlsaG8KICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgY2FycmVnYXJEYWRvc1NhbHZvcyhkYWRvcykgewogICAgICAgICAgICB0aGlzLmlkID0gZGFkb3MuaWQ7CiAgICAgICAgICAgIHRoaXMuaW5pY2lhbCA9IGRhZG9zLmluaWNpYWw7CiAgICAgICAgICAgIHRoaXMubGlzdGFJdGVtT3JpZ2VtID0gZGFkb3MubGlzdGFJdGVtT3JpZ2VtOwogICAgICAgICAgICB0aGlzLmZpbmFsID0gZGFkb3MuZmluYWw7CiAgICAgICAgICAgIHRoaXMubm9tZUNlbmFyaW8gPSBkYWRvcy5ub21lOwogICAgICAgICAgICB0aGlzLmltYWdlbUNlbmFyaW8gPSBkYWRvcy5pbWFnZW07CiAgICAgICAgICAgIHRoaXMubGlzdGFDYWRlYWRvID0gZGFkb3MubGlzdGFDYWRlYWRvOwogICAgICAgICAgICB0aGlzLmxpc3RhT2JqZXRvID0gZGFkb3MubGlzdGFPYmpldG87CiAgICAgICAgICAgIHRoaXMubGlzdGFPYmpldG9SZWNpcGllbnRlID0gZGFkb3MubGlzdGFPYmpldG9SZWNpcGllbnRlOwogICAgICAgICAgICB0aGlzLmxpc3RhR3J1cG9SZWNpcGllbnRlID0gZGFkb3MubGlzdGFHcnVwb1JlY2lwaWVudGU7CiAgICAgICAgICAgIHRoaXMubGlzdGFDZW5hcmlvRmlsaG8gPSBkYWRvcy5saXN0YUNlbmFyaW9GaWxobzsKICAgICAgICAgICAgbGV0IGlkSXRlbSA9IDA7CiAgICAgICAgICAgIGlmICh0aGlzLmxpc3RhQ2FkZWFkby5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIGlkSXRlbSA9IHBhcnNlSW50KHRoaXMubGlzdGFDYWRlYWRvW3RoaXMubGlzdGFDYWRlYWRvLmxlbmd0aCAtIDFdLmlkLnNwbGl0KCcuJylbMV0ucmVwbGFjZSgvaXRlbS9nLCAnJykpOwogICAgICAgICAgICAgICAgaWYgKGlkSXRlbSA+IHRoaXMuaWRVbmljb0l0ZW0pIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmlkVW5pY29JdGVtID0gaWRJdGVtOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0aGlzLmxpc3RhT2JqZXRvLmxlbmd0aCkgewogICAgICAgICAgICAgICAgaWRJdGVtID0gcGFyc2VJbnQodGhpcy5saXN0YU9iamV0b1t0aGlzLmxpc3RhT2JqZXRvLmxlbmd0aCAtIDFdLmlkLnNwbGl0KCcuJylbMV0ucmVwbGFjZSgvaXRlbS9nLCAnJykpOwogICAgICAgICAgICAgICAgaWYgKGlkSXRlbSA+IHRoaXMuaWRVbmljb0l0ZW0pIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmlkVW5pY29JdGVtID0gaWRJdGVtOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0aGlzLmxpc3RhT2JqZXRvUmVjaXBpZW50ZS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIGlkSXRlbSA9IHBhcnNlSW50KHRoaXMubGlzdGFPYmpldG9SZWNpcGllbnRlW3RoaXMubGlzdGFPYmpldG9SZWNpcGllbnRlLmxlbmd0aCAtIDFdLmlkLnNwbGl0KCcuJylbMV0ucmVwbGFjZSgvaXRlbS9nLCAnJykpOwogICAgICAgICAgICAgICAgaWYgKGlkSXRlbSA+IHRoaXMuaWRVbmljb0l0ZW0pIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmlkVW5pY29JdGVtID0gaWRJdGVtOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0aGlzLmxpc3RhR3J1cG9SZWNpcGllbnRlLmxlbmd0aCkgewogICAgICAgICAgICAgICAgaWRJdGVtID0gcGFyc2VJbnQodGhpcy5saXN0YUdydXBvUmVjaXBpZW50ZVt0aGlzLmxpc3RhR3J1cG9SZWNpcGllbnRlLmxlbmd0aCAtIDFdLmlkLnNwbGl0KCcuJylbMV0ucmVwbGFjZSgvaXRlbS9nLCAnJykpOwogICAgICAgICAgICAgICAgaWYgKGlkSXRlbSA+IHRoaXMuaWRVbmljb0l0ZW0pIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmlkVW5pY29JdGVtID0gaWRJdGVtOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0aGlzLmxpc3RhQ2VuYXJpb0ZpbGhvLmxlbmd0aCkgewogICAgICAgICAgICAgICAgaWRJdGVtID0gcGFyc2VJbnQodGhpcy5saXN0YUNlbmFyaW9GaWxob1t0aGlzLmxpc3RhQ2VuYXJpb0ZpbGhvLmxlbmd0aCAtIDFdLmlkLnNwbGl0KCcuJylbMV0ucmVwbGFjZSgvaXRlbS9nLCAnJykpOwogICAgICAgICAgICAgICAgaWYgKGlkSXRlbSA+IHRoaXMuaWRVbmljb0l0ZW0pIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmlkVW5pY29JdGVtID0gaWRJdGVtOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["CadastroCenario.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuUA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CadastroCenario.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"container-fluid mt-3\">\n    <div v-if=\"!final\" class=\"mb-2 form-group\">\n        <input type=\"checkbox\" :id=\"id + '.inicial'\" :name=\"id + '.inicial'\" v-model=\"inicial\" class=\"form-check-input\">\n        <label :for=\"id + '.inicial'\" class=\"form-check-label\"> Cenário inicial</label>\n    </div>\n    <div v-if=\"!inicial\" class=\"form-group\">\n        <label>Origem</label>\n        <div v-for=\"item in listaItemCenarios.filter(filtrarItemCenarios)\" :key=\"item.id + '.origem'\">\n            <input type=\"checkbox\" :id=\"item.id + '.origem'\" :name=\"item.id + '.origem'\" :checked=\"verificaOrigemSelecionada(item.id)\" :value=\"item.id\" @change=\"alterarOrigem\" class=\"form-check-input\">\n            <label :for=\"item.id + '.origem'\" class=\"form-check-label\">{{ \" [\" + item.nomeCenario + \"] \" + item.tipo + \" - \" + item.nomeItem }}</label>\n        </div>\n        <small v-if=\"listaItemCenarios.filter(filtrarItemCenarios).length == 0\" class=\"form-text text-muted\">Nenhuma opção de origem encontrada.</small>\n    </div>\n    <div v-if=\"!inicial && listaCadeado.length == 0 && listaObjeto.length == 0 && listaObjetoRecipiente.length == 0 && listaGrupoRecipiente.length == 0 && listaCenarioFilho.length == 0\" class=\"form-group\">\n        <input type=\"checkbox\" :id=\"id + '.final'\" :name=\"id + '.final'\" v-model=\"final\" class=\"form-check-input\">\n        <label :for=\"id + '.final'\" class=\"form-check-label\"> Cenário final</label>\n    </div>\n    <div class=\"form-group\">\n        <label :for=\"id + '.nome'\">Nome do cenário</label>\n        <input type=\"text\" :id=\"id + '.nome'\" :name=\"id + '.nome'\" v-model=\"nomeCenario\" @keyup=\"$emit('nomeCenarioAlterado', { cenarioId: id, nomeCenario: nomeCenario })\" class=\"form-control\" v-focus-on-create/>\n    </div>\n    <div class=\"form-group\">\n        <label :for=\"id + '.imagem'\">Imagem do cenário</label>\n        <input type=\"file\" accept=\"image/*\" :id=\"id + '.imagem'\" :name=\"id + '.imagem'\" @change=\"imagemCenarioAlterada\" class=\"form-control-file\"/> \n    </div>\n    <div v-if=\"!final\" class=\"form-group\">\n        <input type=\"button\" value=\"Adicionar cadeado\" @click=\"adicionarCadeado()\" class=\"btn btn-primary\" />\n        <input type=\"button\" value=\"Adicionar objeto\" @click=\"adicionarObjeto()\" class=\"btn btn-primary\" />\n        <input type=\"button\" value=\"Adicionar recipiente de objeto\" @click=\"adicionarObjetoRecipiente()\" class=\"btn btn-primary\" />\n        <input type=\"button\" value=\"Adicionar grupo de recipiente\" @click=\"adicionarGrupoRecipiente()\" class=\"btn btn-primary\" />\n        <input type=\"button\" value=\"Adicionar cenário filho\" @click=\"adicionarCenarioFilho()\" class=\"btn btn-primary\" />\n    </div>\n    <div class=\"form-group cenario-area\">\n        <div class=\"area-marca-tamanho\" v-if=\"itemSelecionadoCenario.id && itemSelecionadoCenario.tipo !== tipoItem.GRUPO_RECIPIENTE\">\n            <div :id=\"'mtl'\" class=\"marca-tamanho\" \n                :style=\"'left:' + ((itemSelecionadoCenario.posicaoX ? itemSelecionadoCenario.posicaoX : 0) - marcaTamanhoPosicaoPadrao) + 'px;'\n                        + 'top:' + ((itemSelecionadoCenario.posicaoY ? itemSelecionadoCenario.posicaoY : 0) - marcaTamanhoPosicaoPadrao) + 'px;'\" \n                        v-dragged=\"alterarTamanhoItemCenario\"></div>\n            <div :id=\"'mtc'\" class=\"marca-tamanho\"\n                :style=\"'left:' + ((itemSelecionadoCenario.posicaoX ? itemSelecionadoCenario.posicaoX : 0) + ((itemSelecionadoCenario.largura ? itemSelecionadoCenario.largura : itemTamanhoPadrao) / 2) - marcaTamanhoPosicaoPadrao) + 'px;'\n                        + 'top:' + ((itemSelecionadoCenario.posicaoY ? itemSelecionadoCenario.posicaoY : 0) - marcaTamanhoPosicaoPadrao) + 'px;'\" \n                        v-dragged=\"alterarTamanhoItemCenario\"></div>            \n            <div :id=\"'mtr'\" class=\"marca-tamanho\"\n                :style=\"'left:' + ((itemSelecionadoCenario.posicaoX ? itemSelecionadoCenario.posicaoX : 0) + (itemSelecionadoCenario.largura ? itemSelecionadoCenario.largura : itemTamanhoPadrao) - marcaTamanhoPosicaoPadrao) + 'px;'\n                        + 'top:' + ((itemSelecionadoCenario.posicaoY ? itemSelecionadoCenario.posicaoY : 0) - marcaTamanhoPosicaoPadrao) + 'px;'\"\n                        v-dragged=\"alterarTamanhoItemCenario\"></div>\n            <div :id=\"'mbl'\" class=\"marca-tamanho\"\n                :style=\"'left:' + ((itemSelecionadoCenario.posicaoX ? itemSelecionadoCenario.posicaoX : 0) - marcaTamanhoPosicaoPadrao) + 'px;'\n                        + 'top:' + ((itemSelecionadoCenario.posicaoY ? itemSelecionadoCenario.posicaoY : 0) + (itemSelecionadoCenario.altura ? itemSelecionadoCenario.altura : itemTamanhoPadrao) - marcaTamanhoPosicaoPadrao) + 'px;'\"\n                        v-dragged=\"alterarTamanhoItemCenario\"></div>\n            <div :id=\"'mbc'\" class=\"marca-tamanho\"\n                :style=\"'left:' + ((itemSelecionadoCenario.posicaoX ? itemSelecionadoCenario.posicaoX : 0) + ((itemSelecionadoCenario.largura ? itemSelecionadoCenario.largura : itemTamanhoPadrao) / 2) - marcaTamanhoPosicaoPadrao) + 'px;'\n                        + 'top:' + ((itemSelecionadoCenario.posicaoY ? itemSelecionadoCenario.posicaoY : 0) + (itemSelecionadoCenario.altura ? itemSelecionadoCenario.altura : itemTamanhoPadrao) - marcaTamanhoPosicaoPadrao) + 'px;'\"\n                        v-dragged=\"alterarTamanhoItemCenario\"></div>            \n            <div :id=\"'mbr'\" class=\"marca-tamanho\"\n                :style=\"'left:' + ((itemSelecionadoCenario.posicaoX ? itemSelecionadoCenario.posicaoX : 0) + (itemSelecionadoCenario.largura ? itemSelecionadoCenario.largura : itemTamanhoPadrao) - marcaTamanhoPosicaoPadrao) + 'px;'\n                        + 'top:' + ((itemSelecionadoCenario.posicaoY ? itemSelecionadoCenario.posicaoY : 0) + (itemSelecionadoCenario.altura ? itemSelecionadoCenario.altura : itemTamanhoPadrao) - marcaTamanhoPosicaoPadrao) + 'px;'\"\n                        v-dragged=\"alterarTamanhoItemCenario\"></div>\n            <div :id=\"'mcl'\" class=\"marca-tamanho\" \n                :style=\"'left:' + ((itemSelecionadoCenario.posicaoX ? itemSelecionadoCenario.posicaoX : 0) - marcaTamanhoPosicaoPadrao) + 'px;'\n                        + 'top:' + ((itemSelecionadoCenario.posicaoY ? itemSelecionadoCenario.posicaoY : 0) + ((itemSelecionadoCenario.altura ? itemSelecionadoCenario.altura : itemTamanhoPadrao) / 2) - marcaTamanhoPosicaoPadrao) + 'px;'\" \n                        v-dragged=\"alterarTamanhoItemCenario\"></div>\n            <div :id=\"'mcr'\" class=\"marca-tamanho\"\n                :style=\"'left:' + ((itemSelecionadoCenario.posicaoX ? itemSelecionadoCenario.posicaoX : 0) + (itemSelecionadoCenario.largura ? itemSelecionadoCenario.largura : itemTamanhoPadrao) - marcaTamanhoPosicaoPadrao) + 'px;'\n                        + 'top:' + ((itemSelecionadoCenario.posicaoY ? itemSelecionadoCenario.posicaoY : 0) + ((itemSelecionadoCenario.altura ? itemSelecionadoCenario.altura : itemTamanhoPadrao) / 2) - marcaTamanhoPosicaoPadrao) + 'px;'\"\n                        v-dragged=\"alterarTamanhoItemCenario\"></div>\n        </div>\n        <div class=\"area-items\" :id=\"id + '.items'\">\n            <div v-for=\"cadeado in listaCadeado\" :key=\"cadeado.id + '.item'\" \n                :title=\"cadeado.nome ? cadeado.nome : cadeado.id\" \n                class=\"cadeado\" :class=\"{ selecionado: cadeado.id == itemSelecionadoCenario.id }\" \n                :style=\"(cadeado.largura ? 'width:' + cadeado.largura + 'px;' : '')\n                        + (cadeado.altura ? 'height:' + cadeado.altura + 'px;' : '')\n                        + (cadeado.posicaoX ? 'left:' + cadeado.posicaoX + 'px;' : '')\n                        + (cadeado.posicaoY ? 'top:' + cadeado.posicaoY + 'px;' : '')\"\n                @mousedown.stop=\"selecionarItemCenario(cadeado)\"\n                v-dragged=\"alterarPosicaoItemCenario\">\n            </div>\n            <div v-for=\"objeto in listaObjeto\" :key=\"objeto.id + '.item'\" \n                :title=\"objeto.nome ? objeto.nome : objeto.id\" \n                class=\"objeto\" :class=\"{ selecionado: objeto.id == itemSelecionadoCenario.id }\" \n                :style=\"(objeto.largura ? 'width:' + objeto.largura + 'px;' : '')\n                        + (objeto.altura ? 'height:' + objeto.altura + 'px;' : '')\n                        + (objeto.posicaoX ? 'left:' + objeto.posicaoX + 'px;' : '')\n                        + (objeto.posicaoY ? 'top:' + objeto.posicaoY + 'px;' : '')\"\n                @mousedown.stop=\"selecionarItemCenario(objeto)\"\n                v-dragged=\"alterarPosicaoItemCenario\">\n                <div></div>\n                <img v-if=\"objeto.imagem\" :src=\"objeto.imagem\" />\n            </div>\n            <div v-for=\"objetoRecipiente in listaObjetoRecipiente\" :key=\"objetoRecipiente.id + '.item'\" \n                :title=\"objetoRecipiente.nome ? objetoRecipiente.nome : objetoRecipiente.id\" \n                class=\"objeto-recipiente\" :class=\"{ selecionado: objetoRecipiente.id == itemSelecionadoCenario.id }\" \n                :style=\"(objetoRecipiente.largura ? 'width:' + objetoRecipiente.largura + 'px;' : '')\n                        + (objetoRecipiente.altura ? 'height:' + objetoRecipiente.altura + 'px;' : '')\n                        + (objetoRecipiente.posicaoX ? 'left:' + objetoRecipiente.posicaoX + 'px;' : '')\n                        + (objetoRecipiente.posicaoY ? 'top:' + objetoRecipiente.posicaoY + 'px;' : '')\"\n                @mousedown.stop=\"selecionarItemCenario(objetoRecipiente)\"\n                v-dragged=\"alterarPosicaoItemCenario\">\n                <div></div>\n                <img v-if=\"objetoRecipiente.objetos.length\" :src=\"retornarImagemObjeto(objetoRecipiente.objetos[0])\" />\n            </div>\n            <div v-for=\"cenarioFilho in listaCenarioFilho\" :key=\"cenarioFilho.id + '.item'\" \n                :title=\"cenarioFilho.nome ? cenarioFilho.nome : cenarioFilho.id\" \n                class=\"cenario-filho\" :class=\"{ selecionado: cenarioFilho.id == itemSelecionadoCenario.id }\" \n                :style=\"(cenarioFilho.largura ? 'width:' + cenarioFilho.largura + 'px;' : '')\n                        + (cenarioFilho.altura ? 'height:' + cenarioFilho.altura + 'px;' : '')\n                        + (cenarioFilho.posicaoX ? 'left:' + cenarioFilho.posicaoX + 'px;' : '')\n                        + (cenarioFilho.posicaoY ? 'top:' + cenarioFilho.posicaoY + 'px;' : '')\"\n                @mousedown.stop=\"selecionarItemCenario(cenarioFilho)\"\n                v-dragged=\"alterarPosicaoItemCenario\">\n            </div>\n        </div>\n        <img v-if=\"imagemCenario\" :src=\"imagemCenario\" @mousedown=\"deselecionarItemCenario()\"/>\n        <div v-if=\"!imagemCenario\" class=\"area-fundo\" @mousedown=\"deselecionarItemCenario()\"></div>\n    </div>   \n    <div class=\"form-group itens-cenario\">\n        <ul>\n            <li v-for=\"cadeado in listaCadeado\" :key=\"cadeado.id + '.item-list'\" :class=\"{ selecionado: cadeado.id == itemSelecionadoCenario.id }\">\n                <a href=\"#\" @click=\"selecionarItemCenario(cadeado)\">{{ cadeado.tipo + \" - \" + (cadeado.nome === \"\"? cadeado.id : cadeado.nome) }}</a>\n            </li>\n            <li v-for=\"objeto in listaObjeto\" :key=\"objeto.id + '.item-list'\" :class=\"{ selecionado: objeto.id == itemSelecionadoCenario.id }\">\n                <a href=\"#\" @click=\"selecionarItemCenario(objeto)\">{{ objeto.tipo + \" - \" + (objeto.nome === \"\"? objeto.id : objeto.nome) }}</a>\n            </li>\n            <li v-for=\"objetoRecipiente in listaObjetoRecipiente\" :key=\"objetoRecipiente.id + '.item-list'\" :class=\"{ selecionado: objetoRecipiente.id == itemSelecionadoCenario.id }\">\n                <a href=\"#\" @click=\"selecionarItemCenario(objetoRecipiente)\">{{ objetoRecipiente.tipo + \" - \" + (objetoRecipiente.nome === \"\"? objetoRecipiente.id : objetoRecipiente.nome) }}</a>\n            </li>\n            <li v-for=\"grupoRecipiente in listaGrupoRecipiente\" :key=\"grupoRecipiente.id + '.item-list'\" :class=\"{ selecionado: grupoRecipiente.id == itemSelecionadoCenario.id }\">\n                <a href=\"#\" @click=\"selecionarItemCenario(grupoRecipiente)\">{{ grupoRecipiente.tipo + \" - \" + (grupoRecipiente.nome === \"\"? grupoRecipiente.id : grupoRecipiente.nome) }}</a>\n            </li>\n            <li v-for=\"cenarioFilho in listaCenarioFilho\" :key=\"cenarioFilho.id + '.item-list'\" :class=\"{ selecionado: cenarioFilho.id == itemSelecionadoCenario.id }\">\n                <a href=\"#\" @click=\"selecionarItemCenario(cenarioFilho)\">{{ cenarioFilho.tipo + \" - \" + (cenarioFilho.nome === \"\"? cenarioFilho.id : cenarioFilho.nome) }}</a>\n            </li>\n        </ul>\n    </div>\n    <div v-if=\"itemSelecionadoCenario.tipo == tipoItem.CADEADO\" class=\"form-group\">\n        <div class=\"form-group\">\n            <label for=\"cadeado.nome\">Nome do cadeado</label>\n            <input type=\"text\" id=\"cadeado.nome\" name=\"cadeado.nome\" v-model=\"itemSelecionadoCenario.nome\" @keyup=\"$emit('nomeItemAlterado', { itemId: itemSelecionadoCenario.id, nomeItem: itemSelecionadoCenario.nome })\" class=\"form-control\"/>\n        </div>\n        <div class=\"form-group\">\n            <label for=\"cadeado.imagemFoco\">Imagem de foco</label>\n            <input type=\"file\" accept=\"image/*\" id=\"cadeado.imagemFoco\" name=\"cadeado.imagemFoco\" @change=\"imagemFocoCadeadoAlterada\" class=\"form-control-file\"/> \n            <img v-if=\"itemSelecionadoCenario.imagemFoco\" :src=\"itemSelecionadoCenario.imagemFoco\" class=\"imagem-preview\"/>\n        </div>\n        <div class=\"form-group\">\n            <label for=\"cadeado.tipoCadeado\">Tipo de cadeado</label>\n            <select id=\"cadeado.tipoCadeado\" name=\"cadeado.tipoCadeado\" v-model=\"itemSelecionadoCenario.tipoCadeado\" @change=\"alterarOpcoesValoresTipoCadeado\">\n                <option :value=\"tipoCadeado.NUMERICO\">Numérico</option>\n                <option :value=\"tipoCadeado.LETRA\">Letra</option>\n                <option :value=\"tipoCadeado.SETA\">Seta</option>\n                <option :value=\"tipoCadeado.COR\">Cor</option>\n                <option :value=\"tipoCadeado.CUSTOMIZADO\">Customizado</option>\n            </select>\n        </div>\n        <div class=\"form-group\" v-if=\"itemSelecionadoCenario.tipoCadeado == tipoCadeado.COR\">\n            <label >Opções de valores para cada dígito da senha</label>\n            <ColorPicker :width=\"150\" :height=\"150\" :disabled=\"false\" startColor=\"#ff0000\" @colorChange=\"selecionarCorOpcoesValores\"></ColorPicker>\n            <input type=\"button\" value=\"Adicionar cor\" @click=\"adicionarOpcaoValor()\" class=\"btn btn-secondary\"/>\n            <ul>\n                <li v-for=\"(opcaoCor, i) in itemSelecionadoCenario.opcoesValores\" :key=\"'cadeado.opcaoCor' + i\" :style=\"'background-color:' + opcaoCor\">\n                    {{ opcaoCor }}\n                    <input type=\"button\" value=\"Remover cor\" @click=\"removerOpcaoValor(opcaoCor)\" class=\"btn btn-secondary\"/>\n                </li>\n            </ul>\n        </div>\n        <div class=\"form-group\" v-if=\"itemSelecionadoCenario.tipoCadeado == tipoCadeado.CUSTOMIZADO\">\n            <label >Opções de valores para cada dígito da senha</label>\n            <input type=\"text\" class=\"form-control\" v-model=\"opcaoValorAdicionar\" />\n            <input type=\"button\" value=\"Adicionar opção\" @click=\"adicionarOpcaoValor()\" class=\"btn btn-secondary\"/>\n            <ul>\n                <li v-for=\"(opcaoCustomizada, i) in itemSelecionadoCenario.opcoesValores\" :key=\"'cadeado.opcaoCustomizada' + i\">\n                    {{ opcaoCustomizada }}\n                    <input type=\"button\" value=\"Remover opção\" @click=\"removerOpcaoValor(opcaoCustomizada)\" class=\"btn btn-secondary\"/>\n                </li>\n            </ul>\n        </div>\n        <div class=\"form-group\">\n            <label for=\"cadeado.qtdDigitosSenha\">Quantidade de dígitos da senha</label>\n            <input type=\"number\" id=\"cadeado.qtdDigitosSenha\" name=\"cadeado.qtdDigitosSenha\" v-model.number=\"itemSelecionadoCenario.qtdDigitosSenha\" class=\"form-control\" :min=\"3\" @change=\"alterarQtdDigitosSenhaCadeado\"/>\n        </div>\n        <div class=\"form-group\">\n            <label>Senha</label>\n            <div v-if=\"itemSelecionadoCenario.tipoCadeado != tipoCadeado.COR\">\n                <select v-for=\"(digitoSenha, i) in itemSelecionadoCenario.senha\" :key=\"'cadeado.senha' + i\">\n                    <option v-for=\"(opcao, j) in itemSelecionadoCenario.opcoesValores\" :key=\"'cadeado.senha' + i + '.opcao' + j\" :value=\"opcao\" :selected=\"opcao == digitoSenha\">{{ opcao }}</option>\n                </select>\n            </div>\n            <div v-if=\"itemSelecionadoCenario.tipoCadeado == tipoCadeado.COR\">\n                <div v-for=\"(digitoSenha, i) in itemSelecionadoCenario.senha\" :key=\"'cadeado.senha' + i\" class=\"select-customizado\">\n                    <input type=\"button\" :value=\"digitoSenha\" @click=\"abrirOpcoesSelectCustomizado('cadeado.senha' + i)\" :style=\"'background-color:' + digitoSenha\"/>\n                    <ul v-show=\"'cadeado.senha' + i == selectCustomizadoAberto\">\n                        <li v-for=\"(opcao, j) in itemSelecionadoCenario.opcoesValores\" :key=\"'cadeado.senha' + i + '.opcao' + j\" :style=\"'background-color:' + opcao\" @click=\"selecionarOpcaoSelectCustomizado(i, opcao)\" :class=\"{ selecionado: opcao == digitoSenha }\">{{ opcao }}</li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n        <div class=\"form-group\">\n            <label for=\"cadeado.largura\">Largura</label>\n            <input type=\"number\" id=\"cadeado.largura\" name=\"cadeado.largura\" v-model.number=\"itemSelecionadoCenario.largura\" class=\"form-control\" :min=\"itemTamanhoMinimo\"/>\n        </div>\n        <div class=\"form-group\">\n            <label for=\"cadeado.altura\">Altura</label>\n            <input type=\"number\" id=\"cadeado.altura\" name=\"cadeado.altura\" v-model.number=\"itemSelecionadoCenario.altura\" class=\"form-control\" :min=\"itemTamanhoMinimo\"/>\n        </div>\n        <div class=\"form-group\">\n            <label for=\"cadeado.posicaoX\">Posicao X</label>\n            <input type=\"number\" id=\"cadeado.posicaoX\" name=\"cadeado.posicaoX\" v-model.number=\"itemSelecionadoCenario.posicaoX\" class=\"form-control\"/>\n        </div>\n        <div class=\"form-group\">\n            <label for=\"cadeado.posicaoY\">Posicao Y</label>\n            <input type=\"number\" id=\"cadeado.posicaoY\" name=\"cadeado.posicaoY\" v-model.number=\"itemSelecionadoCenario.posicaoY\" class=\"form-control\"/>\n        </div>\n        <input type=\"button\" value=\"Remover cadeado\" v-if=\"!existeCenarioDestinoItemCenarios(itemSelecionadoCenario.id)\" @click=\"removerCadeado(itemSelecionadoCenario.id)\" class=\"btn btn-secondary\"/>\n    </div>\n    <div v-if=\"itemSelecionadoCenario.tipo == tipoItem.OBJETO\" class=\"form-group\">\n        <div class=\"form-group\">\n            <label for=\"objeto.nome\">Nome do objeto</label>\n            <input type=\"text\" id=\"objeto.nome\" name=\"objeto.nome\" v-model=\"itemSelecionadoCenario.nome\" @keyup=\"$emit('nomeItemAlterado', { itemId: itemSelecionadoCenario.id, nomeItem: itemSelecionadoCenario.nome, tipo: tipoItem.OBJETO })\" class=\"form-control\"/>\n        </div>\n        <div class=\"form-group\">\n            <label for=\"objeto.imagem\">Imagem</label>\n            <input type=\"file\" accept=\"image/*\" id=\"objeto.imagem\" name=\"objeto.imagem\" @change=\"imagemObjetoAlterada\" class=\"form-control-file\"/> \n            <img v-if=\"itemSelecionadoCenario.imagem\" :src=\"itemSelecionadoCenario.imagem\" class=\"imagem-preview\"/>\n        </div>\n        <div class=\"form-group\">\n            <label for=\"objeto.largura\">Largura</label>\n            <input type=\"number\" id=\"objeto.largura\" name=\"objeto.largura\" v-model.number=\"itemSelecionadoCenario.largura\" class=\"form-control\" :min=\"itemTamanhoMinimo\"/>\n        </div>\n        <div class=\"form-group\">\n            <label for=\"objeto.altura\">Altura</label>\n            <input type=\"number\" id=\"objeto.altura\" name=\"objeto.altura\" v-model.number=\"itemSelecionadoCenario.altura\" class=\"form-control\" :min=\"itemTamanhoMinimo\"/>\n        </div>\n        <div class=\"form-group\">\n            <label for=\"objeto.posicaoX\">Posicao X</label>\n            <input type=\"number\" id=\"objeto.posicaoX\" name=\"objeto.posicaoX\" v-model.number=\"itemSelecionadoCenario.posicaoX\" class=\"form-control\"/>\n        </div>\n        <div class=\"form-group\">\n            <label for=\"objeto.posicaoY\">Posicao Y</label>\n            <input type=\"number\" id=\"objeto.posicaoY\" name=\"objeto.posicaoY\" v-model.number=\"itemSelecionadoCenario.posicaoY\" class=\"form-control\"/>\n        </div>\n        <input type=\"button\" value=\"Remover objeto\" v-if=\"!existeRecipienteDestinoObjetoCenarios(itemSelecionadoCenario.id)\" @click=\"removerObjeto(itemSelecionadoCenario.id)\" class=\"btn btn-secondary\"/>\n    </div>\n    <div v-if=\"itemSelecionadoCenario.tipo == tipoItem.OBJETO_RECIPIENTE\" class=\"form-group\">\n        <div class=\"form-group\">\n            <label for=\"objetorecipiente.nome\">Nome do recipiente de objeto</label>\n            <input type=\"text\" id=\"objetorecipiente.nome\" name=\"objetorecipiente.nome\" v-model=\"itemSelecionadoCenario.nome\" class=\"form-control\"/>\n        </div>\n        <div class=\"form-group\">\n            <label>Objetos que esse recipiente pode receber</label>\n            <div v-for=\"objeto in listaObjetoCenarios\" :key=\"objeto.id + '.objetosrecipiente'\">\n                <input type=\"checkbox\" :id=\"objeto.id + '.objetosrecipiente'\" :name=\"objeto.id + '.objetosrecipiente'\" :checked=\"verificaObjetoRecipienteSelecionado(objeto.id)\" :value=\"objeto.id\" @change=\"alterarObjetoRecipiente\" class=\"form-check-input\">\n                <label :for=\"objeto.id + '.objetosrecipiente'\" class=\"form-check-label\">{{ \" [\" + objeto.nomeCenario + \"] \" + objeto.nomeItem }}</label>\n            </div>\n            <small v-if=\"listaObjetoCenarios.length == 0\" class=\"form-text text-muted\">Nenhuma opção de objeto encontrada.</small>\n        </div>\n        <div class=\"form-group\">\n            <label for=\"objeto.largura\">Largura</label>\n            <input type=\"number\" id=\"objeto.largura\" name=\"objeto.largura\" v-model.number=\"itemSelecionadoCenario.largura\" class=\"form-control\" :min=\"itemTamanhoMinimo\"/>\n        </div>\n        <div class=\"form-group\">\n            <label for=\"objeto.altura\">Altura</label>\n            <input type=\"number\" id=\"objeto.altura\" name=\"objeto.altura\" v-model.number=\"itemSelecionadoCenario.altura\" class=\"form-control\" :min=\"itemTamanhoMinimo\"/>\n        </div>\n        <div class=\"form-group\">\n            <label for=\"objeto.posicaoX\">Posicao X</label>\n            <input type=\"number\" id=\"objeto.posicaoX\" name=\"objeto.posicaoX\" v-model.number=\"itemSelecionadoCenario.posicaoX\" class=\"form-control\"/>\n        </div>\n        <div class=\"form-group\">\n            <label for=\"objeto.posicaoY\">Posicao Y</label>\n            <input type=\"number\" id=\"objeto.posicaoY\" name=\"objeto.posicaoY\" v-model.number=\"itemSelecionadoCenario.posicaoY\" class=\"form-control\"/>\n        </div>\n        <input type=\"button\" value=\"Remover recipiente de objeto\" v-if=\"!existeGrupoRecipiente(itemSelecionadoCenario.id)\" @click=\"removerObjetoRecipiente(itemSelecionadoCenario.id)\" class=\"btn btn-secondary\"/>\n    </div>\n    <div v-if=\"itemSelecionadoCenario.tipo == tipoItem.GRUPO_RECIPIENTE\" class=\"form-group\">\n        <div class=\"form-group\">\n            <label for=\"gruporecipiente.nome\">Nome do grupo de recipiente</label>\n            <input type=\"text\" id=\"gruporecipiente.nome\" name=\"gruporecipiente.nome\" v-model=\"itemSelecionadoCenario.nome\" @keyup=\"$emit('nomeItemAlterado', { itemId: itemSelecionadoCenario.id, nomeItem: itemSelecionadoCenario.nome })\" class=\"form-control\"/>\n        </div>\n        <div class=\"form-group\">\n            <label for=\"gruporecipiente.imagemFoco\">Imagem de foco</label>\n            <input type=\"file\" accept=\"image/*\" id=\"gruporecipiente.imagemFoco\" name=\"gruporecipiente.imagemFoco\" @change=\"imagemFocoGrupoRecipienteAlterada\" class=\"form-control-file\"/> \n            <img v-if=\"itemSelecionadoCenario.imagemFoco\" :src=\"itemSelecionadoCenario.imagemFoco\" class=\"imagem-preview\"/>\n        </div>\n        <div class=\"form-group\">\n            <label>Recipientes do grupo</label>\n            <div v-for=\"objetoRecipiente in listaObjetoRecipiente.filter(filtrarObjetoRecipiente)\" :key=\"objetoRecipiente.id + '.recipientesgrupo'\">\n                <input type=\"checkbox\" :id=\"objetoRecipiente.id + '.recipientesgrupo'\" :name=\"objetoRecipiente.id + '.recipientesgrupo'\" :checked=\"verificaGrupoRecipienteSelecionado(objetoRecipiente.id)\" :value=\"objetoRecipiente.id\" @change=\"alterarRecipienteGrupo\" class=\"form-check-input\">\n                <label :for=\"objetoRecipiente.id + '.recipientesgrupo'\" class=\"form-check-label\">{{ \" \" + (objetoRecipiente.nome === \"\"? objetoRecipiente.id : objetoRecipiente.nome) }}</label>\n            </div>\n            <small v-if=\"listaObjetoRecipiente.filter(filtrarObjetoRecipiente).length == 0\" class=\"form-text text-muted\">Nenhuma opção de recipiente de objeto encontrada.</small>\n        </div>\n        <input type=\"button\" value=\"Remover grupo de recipiente\" v-if=\"!existeCenarioDestinoItemCenarios(itemSelecionadoCenario.id)\" @click=\"removerGrupoRecipiente(itemSelecionadoCenario.id)\" class=\"btn btn-secondary\"/>\n    </div>\n    <div v-if=\"itemSelecionadoCenario.tipo == tipoItem.CENARIO_FILHO\" class=\"form-group\">\n        <div class=\"form-group\">\n            <label for=\"cenariofilho.nome\">Nome do cenário filho</label>\n            <input type=\"text\" id=\"cenariofilho.nome\" name=\"cenariofilho.nome\" v-model=\"itemSelecionadoCenario.nome\" @keyup=\"$emit('nomeItemAlterado', { itemId: itemSelecionadoCenario.id, nomeItem: itemSelecionadoCenario.nome })\" class=\"form-control\"/>\n        </div>\n        <div class=\"form-group\">\n            <label for=\"cenariofilho.imagemFoco\">Imagem de foco</label>\n            <input type=\"file\" accept=\"image/*\" id=\"cenariofilho.imagemFoco\" name=\"cenariofilho.imagemFoco\" @change=\"imagemFocoCenarioFilhoAlterada\" class=\"form-control-file\"/> \n            <img v-if=\"itemSelecionadoCenario.imagemFoco\" :src=\"itemSelecionadoCenario.imagemFoco\" class=\"imagem-preview\"/>\n        </div>        \n        <div class=\"form-group\">\n            <label for=\"cenariofilho.largura\">Largura</label>\n            <input type=\"number\" id=\"cenariofilho.largura\" name=\"cenariofilho.largura\" v-model.number=\"itemSelecionadoCenario.largura\" class=\"form-control\" :min=\"itemTamanhoMinimo\"/>\n        </div>\n        <div class=\"form-group\">\n            <label for=\"cenariofilho.altura\">Altura</label>\n            <input type=\"number\" id=\"cenariofilho.altura\" name=\"cenariofilho.altura\" v-model.number=\"itemSelecionadoCenario.altura\" class=\"form-control\" :min=\"itemTamanhoMinimo\"/>\n        </div>\n        <div class=\"form-group\">\n            <label for=\"cenariofilho.posicaoX\">Posicao X</label>\n            <input type=\"number\" id=\"cenariofilho.posicaoX\" name=\"cenariofilho.posicaoX\" v-model.number=\"itemSelecionadoCenario.posicaoX\" class=\"form-control\"/>\n        </div>\n        <div class=\"form-group\">\n            <label for=\"cenariofilho.posicaoY\">Posicao Y</label>\n            <input type=\"number\" id=\"cenariofilho.posicaoY\" name=\"cenariofilho.posicaoY\" v-model.number=\"itemSelecionadoCenario.posicaoY\" class=\"form-control\"/>\n        </div>\n        <input type=\"button\" value=\"Remover cenário filho\" v-if=\"!existeCenarioDestinoItemCenarios(itemSelecionadoCenario.id)\" @click=\"removerCenarioFilho(itemSelecionadoCenario.id)\" class=\"btn btn-secondary\"/>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ColorPicker from 'vue-color-picker-wheel';\n\nexport default {\n    name: \"CadastroCenario\",\n    components: {\n        ColorPicker\n    },\n    mounted() {\n        if (this.dadosIniciais.id) {\n            this.carregarDadosSalvos(this.dadosIniciais);\n        }\n    },\n    props: {\n        id: {}, \n        listaItemCenarios: { type: Array },\n        listaObjetoCenarios: { type: Array },\n        dadosIniciais: { type: Object },\n        tipoItem: { type: Object }\n    },\n    data: function() {\n        return {\n            nomeCenario: \"\",\n            imagemCenario: \"\",\n            inicial: this.dadosIniciais.inicial,\n            final: false,\n            idUnicoItem: 0,\n            listaCadeado: [],\n            listaObjeto: [],\n            listaObjetoRecipiente: [],\n            listaGrupoRecipiente: [],\n            listaCenarioFilho: [],\n            listaItemOrigem: [],\n            itemSelecionadoCenario: { id: \"\", tipo: \"\" },\n            itemTamanhoPadrao: 50,\n            itemTamanhoMinimo: 8,\n            marcaTamanhoPosicaoPadrao: 4,\n            tipoCadeado: {\n                NUMERICO: 1, \n                LETRA: 2, \n                SETA: 3,\n                COR: 4,\n                CUSTOMIZADO: 5\n            },\n            opcaoValorAdicionar: \"\",\n            selectCustomizadoAberto: \"\"\n        }\n    },\n    methods: {\n        imagemCenarioAlterada(e) {\n            // Atualiza a visualização da imagem do cenário\n            const imagem = e.target.files[0];\n            const reader = new FileReader();\n            reader.readAsDataURL(imagem);\n            reader.onload = e => {\n                this.imagemCenario = e.target.result;\n            };\n        },\n        filtrarItemCenarios(item) {\n            // Exibe como opção de Origem do cenário apenas os itens que\n            // não fazem parte do cenário\n            // e ainda não foram utilizados como opção em outros cenários ou já está selecionado no próprio cenário\n            return item.cenarioId !== this.id \n                    && (item.cenarioIdDestino === \"\" || item.cenarioIdDestino === this.id);\n        },\n        existeCenarioDestinoItemCenarios(itemId) {\n            // Verifica se o item foi selecionado como opção de Origem em algum cenário, para não permitir remover\n            for (let i=0; i<this.listaItemCenarios.length; i++) {\n                if (this.listaItemCenarios[i].id === itemId && this.listaItemCenarios[i].cenarioIdDestino !== \"\") {\n                    return true;\n                }\n            }\n            return false;\n        },\n        verificaOrigemSelecionada(itemId) {\n            // Verifica se o item está na lista de opções de Origem selecionadas do cenário\n            for (let i=0; i<this.listaItemOrigem.length; i++) {\n                if (this.listaItemOrigem[i] === itemId) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        alterarOrigem(e) {\n            // Adiciona ou remove um item da lista de opções de Origem selecionadas do cenário\n            if (e.target.checked) {\n                this.listaItemOrigem.push(e.target.value);\n            }\n            else {\n                for (let i=0; i<this.listaItemOrigem.length; i++) {\n                    if (this.listaItemOrigem[i] === e.target.value) {\n                        this.listaItemOrigem.splice(i, 1);\n                        break;\n                    }\n                }\n            }\n            this.$emit('origemCenarioAlterada', { cenarioId: this.id, itemId: e.target.value, itemSelecionado: e.target.checked })\n        },\n        selecionarItemCenario(item) {\n            this.itemSelecionadoCenario = item;\n        },\n        deselecionarItemCenario() {\n            this.itemSelecionadoCenario = { id: \"\", tipo: \"\" };\n        },\n        alterarPosicaoItemCenario({ deltaX, deltaY, first, last }) {\n            if (first || last) {\n                return;\n            }\n            this.itemSelecionadoCenario.posicaoX = (this.itemSelecionadoCenario.posicaoX ? this.itemSelecionadoCenario.posicaoX : 0) + deltaX;\n            this.itemSelecionadoCenario.posicaoY = (this.itemSelecionadoCenario.posicaoY ? this.itemSelecionadoCenario.posicaoY : 0) + deltaY;\n        },\n        alterarTamanhoItemCenario({ el, deltaX, deltaY, first, last }) {\n            if (first || last) {\n                return;\n            }\n            let novaLargura = 0;\n            let novaAltura = 0;\n            if (el.id == \"mtl\") {\n                novaLargura = (this.itemSelecionadoCenario.largura ? this.itemSelecionadoCenario.largura : this.itemTamanhoPadrao) - deltaX;\n                novaAltura = (this.itemSelecionadoCenario.altura ? this.itemSelecionadoCenario.altura : this.itemTamanhoPadrao) - deltaX;\n                if (novaLargura >= this.itemTamanhoMinimo && novaAltura >= this.itemTamanhoMinimo)\n                {\n                    this.itemSelecionadoCenario.posicaoX = (this.itemSelecionadoCenario.posicaoX ? this.itemSelecionadoCenario.posicaoX : 0) + deltaX;\n                    this.itemSelecionadoCenario.largura = novaLargura;\n                    this.itemSelecionadoCenario.posicaoY = (this.itemSelecionadoCenario.posicaoY ? this.itemSelecionadoCenario.posicaoY : 0) + deltaX;\n                    this.itemSelecionadoCenario.altura = novaAltura;\n                }\n            }\n            else if (el.id == \"mtc\") {\n                novaAltura = (this.itemSelecionadoCenario.altura ? this.itemSelecionadoCenario.altura : this.itemTamanhoPadrao) - deltaY;\n                if (novaAltura >= this.itemTamanhoMinimo)\n                {\n                    this.itemSelecionadoCenario.posicaoY = (this.itemSelecionadoCenario.posicaoY ? this.itemSelecionadoCenario.posicaoY : 0) + deltaY;\n                    this.itemSelecionadoCenario.altura = novaAltura;\n                }\n            }\n            else if (el.id == \"mtr\") {\n                novaLargura = (this.itemSelecionadoCenario.largura ? this.itemSelecionadoCenario.largura : this.itemTamanhoPadrao) + deltaX;\n                novaAltura = (this.itemSelecionadoCenario.altura ? this.itemSelecionadoCenario.altura : this.itemTamanhoPadrao) + deltaX;\n                if (novaLargura >= this.itemTamanhoMinimo && novaAltura >= this.itemTamanhoMinimo)\n                {\n                    this.itemSelecionadoCenario.largura = novaLargura;\n                    this.itemSelecionadoCenario.posicaoY = (this.itemSelecionadoCenario.posicaoY ? this.itemSelecionadoCenario.posicaoY : 0) - deltaX;\n                    this.itemSelecionadoCenario.altura = novaAltura;\n                }\n            }\n            else if (el.id == \"mbl\") {\n                novaLargura = (this.itemSelecionadoCenario.largura ? this.itemSelecionadoCenario.largura : this.itemTamanhoPadrao) - deltaX;\n                novaAltura = (this.itemSelecionadoCenario.altura ? this.itemSelecionadoCenario.altura : this.itemTamanhoPadrao) - deltaX;\n                if (novaLargura >= this.itemTamanhoMinimo && novaAltura >= this.itemTamanhoMinimo)\n                {\n                    this.itemSelecionadoCenario.posicaoX = (this.itemSelecionadoCenario.posicaoX ? this.itemSelecionadoCenario.posicaoX : 0) + deltaX;\n                    this.itemSelecionadoCenario.largura = novaLargura;\n                    this.itemSelecionadoCenario.altura = novaAltura;\n                }\n            }\n            else if (el.id == \"mbc\") {\n                novaAltura = (this.itemSelecionadoCenario.altura ? this.itemSelecionadoCenario.altura : this.itemTamanhoPadrao) + deltaY;\n                if (novaAltura >= this.itemTamanhoMinimo)\n                {\n                    this.itemSelecionadoCenario.altura = novaAltura;\n                }\n            }\n            else if (el.id == \"mbr\") {\n                novaLargura = (this.itemSelecionadoCenario.largura ? this.itemSelecionadoCenario.largura : this.itemTamanhoPadrao) + deltaX;\n                novaAltura = (this.itemSelecionadoCenario.altura ? this.itemSelecionadoCenario.altura : this.itemTamanhoPadrao) + deltaX;\n                if (novaLargura >= this.itemTamanhoMinimo && novaAltura >= this.itemTamanhoMinimo)\n                {\n                    this.itemSelecionadoCenario.largura = novaLargura;\n                    this.itemSelecionadoCenario.altura = novaAltura;\n                }\n            }\n            else if (el.id == \"mcl\") {\n                novaLargura = (this.itemSelecionadoCenario.largura ? this.itemSelecionadoCenario.largura : this.itemTamanhoPadrao) - deltaX;\n                if (novaLargura >= this.itemTamanhoMinimo)\n                {\n                    this.itemSelecionadoCenario.posicaoX = (this.itemSelecionadoCenario.posicaoX ? this.itemSelecionadoCenario.posicaoX : 0) + deltaX;\n                    this.itemSelecionadoCenario.largura = novaLargura;\n                }\n            }\n            else if (el.id == \"mcr\") {\n                novaLargura = (this.itemSelecionadoCenario.largura ? this.itemSelecionadoCenario.largura : this.itemTamanhoPadrao) + deltaX;\n                if (novaLargura >= this.itemTamanhoMinimo)\n                {\n                    this.itemSelecionadoCenario.largura = novaLargura;\n                }\n            }\n        },\n        adicionarCadeado() {\n            // Adiciona um cadeado no cenário\n            const cadeadoId = this.id + \".item\" + (++this.idUnicoItem);\n            this.listaCadeado.push({\n                id: cadeadoId,\n                tipo: this.tipoItem.CADEADO,\n                nome: \"\",\n                imagemFoco: \"\",\n                tipoCadeado: this.tipoCadeado.NUMERICO,\n                opcoesValores: [\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\"],\n                qtdDigitosSenha: 3,\n                senha: [\"\", \"\", \"\"],\n                largura: this.itemTamanhoPadrao,\n                altura: this.itemTamanhoPadrao,\n                posicaoX: 0,\n                posicaoY: 0\n            })\n            this.$emit(\"itemAdicionado\", { id: cadeadoId, tipo: this.tipoItem.CADEADO, cenarioId: this.id, nomeCenario: this.nomeCenario ? this.nomeCenario : this.id, nomeItem: cadeadoId, cenarioIdDestino: \"\" })\n            this.itemSelecionadoCenario = this.listaCadeado[this.listaCadeado.length-1];\n        },\n        removerCadeado(cadeadoId) {\n            if (confirm(\"Confirma a exclusão do cadeado?\")) {\n                // Remove um cadeado do cenário\n                for (let i=0; i<this.listaCadeado.length; i++) {\n                    if (this.listaCadeado[i].id === cadeadoId) {\n                        this.listaCadeado.splice(i, 1);\n                        this.$emit(\"itemRemovido\", { id: cadeadoId, tipo: this.tipoItem.CADEADO })\n                        break;\n                    }\n                }\n                this.itemSelecionadoCenario = { id: \"\", tipo: \"\" };\n            }\n        },\n        alterarOpcoesValoresTipoCadeado() {\n            // Altera as opções de valores dependendo do tipo de cadeado\n            if (this.itemSelecionadoCenario.tipoCadeado == this.tipoCadeado.NUMERICO) {\n                this.itemSelecionadoCenario.opcoesValores = [\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\"];\n            } \n            else if (this.itemSelecionadoCenario.tipoCadeado == this.tipoCadeado.LETRA) {\n                this.itemSelecionadoCenario.opcoesValores = [\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\",\"H\",\"I\",\"J\",\"K\",\"L\",\"M\",\"N\",\"O\",\"P\",\"Q\",\"R\",\"S\",\"T\",\"U\",\"V\",\"X\",\"Y\",\"W\",\"Z\"];\n            }\n            else if (this.itemSelecionadoCenario.tipoCadeado == this.tipoCadeado.SETA) {\n                this.itemSelecionadoCenario.opcoesValores = [\"Esquerda\",\"Direita\",\"Baixo\",\"Cima\"];\n            }\n            else {\n                this.itemSelecionadoCenario.opcoesValores = [];\n            }\n            this.opcaoValorAdicionar = \"\";\n            for (let i = 0; i < this.itemSelecionadoCenario.senha.length; i++) {\n                this.itemSelecionadoCenario.senha[i] = \"\";\n            }\n        },\n        alterarQtdDigitosSenhaCadeado() {\n            // Altera a senha de acordo com a quantidade de dígitos\n            if (this.itemSelecionadoCenario.senha.length < this.itemSelecionadoCenario.qtdDigitosSenha)\n            {\n                while (this.itemSelecionadoCenario.senha.length < this.itemSelecionadoCenario.qtdDigitosSenha) {\n                    this.itemSelecionadoCenario.senha.push(\"\");\n                }\n            }\n            else if (this.itemSelecionadoCenario.senha.length > this.itemSelecionadoCenario.qtdDigitosSenha) {\n                this.itemSelecionadoCenario.senha.splice(this.itemSelecionadoCenario.senha.length - this.itemSelecionadoCenario.qtdDigitosSenha - 1, this.itemSelecionadoCenario.senha.length - this.itemSelecionadoCenario.qtdDigitosSenha);\n            }\n        },\n        imagemFocoCadeadoAlterada(e) {\n            // Atualiza a visualização da imagem do cadeado\n            const imagem = e.target.files[0];\n            const reader = new FileReader();\n            reader.readAsDataURL(imagem);\n            reader.onload = e => {\n                this.itemSelecionadoCenario.imagemFoco = e.target.result;\n            };\n            e.target.value = \"\";\n        },\n        selecionarCorOpcoesValores(cor) {\n            this.opcaoValorAdicionar = cor;\n        },\n        adicionarOpcaoValor() {\n            // Adiciona um item nas opções de valores do cadeado\n            if (this.opcaoValorAdicionar.trim() != \"\") {\n                let existeOpcao = false;\n                for (let i=0; i<this.itemSelecionadoCenario.opcoesValores.length; i++) {\n                    if (this.itemSelecionadoCenario.opcoesValores[i].trim().toLowerCase() == this.opcaoValorAdicionar.trim().toLowerCase()) {\n                        existeOpcao = true;\n                        break;\n                    }\n                }\n                if (!existeOpcao) {\n                    this.itemSelecionadoCenario.opcoesValores.push(this.opcaoValorAdicionar);\n                }\n                this.opcaoValorAdicionar = \"\";\n            }\n        },\n        removerOpcaoValor(opcao) {\n            // Remove um item das opções de valores do cadeado\n            for (let i=0; i<this.itemSelecionadoCenario.opcoesValores.length; i++) {\n                if (this.itemSelecionadoCenario.opcoesValores[i].trim().toLowerCase() == opcao.trim().toLowerCase()) {\n                    this.itemSelecionadoCenario.opcoesValores.splice(i, 1);\n                    break;\n                }\n            }\n            for (let i=0; i<this.itemSelecionadoCenario.senha.length; i++) {\n                if (this.itemSelecionadoCenario.senha[i].trim().toLowerCase() == opcao.trim().toLowerCase()) {\n                    this.itemSelecionadoCenario.senha[i] = \"\";\n                }\n            }\n        },\n        abrirOpcoesSelectCustomizado(selectId) {\n            if (this.selectCustomizadoAberto == selectId) {\n                this.selectCustomizadoAberto = \"\";\n            }\n            else {\n                this.selectCustomizadoAberto = selectId;\n            }\n        },\n        selecionarOpcaoSelectCustomizado(indice, opcao) {\n            this.selectCustomizadoAberto = \"\";\n            this.itemSelecionadoCenario.senha[indice] = opcao;\n        },\n        adicionarObjeto() {\n            // Adiciona um objeto no cenário\n            const objetoId = this.id + \".item\" + (++this.idUnicoItem);\n            this.listaObjeto.push({\n                id: objetoId,\n                tipo: this.tipoItem.OBJETO,\n                nome: \"\",\n                imagem: \"\",\n                largura: this.itemTamanhoPadrao,\n                altura: this.itemTamanhoPadrao,\n                posicaoX: 0,\n                posicaoY: 0\n            })\n            this.$emit(\"itemAdicionado\", { id: objetoId, tipo: this.tipoItem.OBJETO, cenarioId: this.id, nomeCenario: this.nomeCenario ? this.nomeCenario : this.id, nomeItem: objetoId, listaObjetoRecipienteIdDestino: [], imagem: \"\" })\n            this.itemSelecionadoCenario = this.listaObjeto[this.listaObjeto.length-1];\n        },\n        removerObjeto(objetoId) {\n            if (confirm(\"Confirma a exclusão do objeto?\")) {\n                // Remove um objeto do cenário\n                for (let i=0; i<this.listaObjeto.length; i++) {\n                    if (this.listaObjeto[i].id === objetoId) {\n                        this.listaObjeto.splice(i, 1);\n                        this.$emit(\"itemRemovido\", { id: objetoId, tipo: this.tipoItem.OBJETO })\n                        break;\n                    }\n                }\n                this.itemSelecionadoCenario = { id: \"\", tipo: \"\" };\n            }\n        },\n        imagemObjetoAlterada(e) {\n            // Atualiza a visualização da imagem do objeto\n            const imagem = e.target.files[0];\n            const reader = new FileReader();\n            reader.readAsDataURL(imagem);\n            reader.onload = e => {\n                this.itemSelecionadoCenario.imagem = e.target.result;\n                this.$emit('imagemObjetoAlterada', { itemId: this.itemSelecionadoCenario.id, imagem: this.itemSelecionadoCenario.imagem });\n            };\n            e.target.value = \"\";            \n        },\n        existeRecipienteDestinoObjetoCenarios(objetoId) {\n            // Verifica se o objeto foi selecionado como opção em algum recipiente, para não permitir remover\n            for (let i=0; i<this.listaObjetoCenarios.length; i++) {\n                if (this.listaObjetoCenarios[i].id === objetoId && this.listaObjetoCenarios[i].listaObjetoRecipienteIdDestino.length > 0) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        adicionarObjetoRecipiente() {\n            // Adiciona um recipiente de objeto no cenário\n            const objetoRecipienteId = this.id + \".item\" + (++this.idUnicoItem);\n            this.listaObjetoRecipiente.push({\n                id: objetoRecipienteId,\n                tipo: this.tipoItem.OBJETO_RECIPIENTE,\n                nome: \"\",\n                objetos: [],\n                largura: this.itemTamanhoPadrao,\n                altura: this.itemTamanhoPadrao,\n                posicaoX: 0,\n                posicaoY: 0\n            });\n            this.itemSelecionadoCenario = this.listaObjetoRecipiente[this.listaObjetoRecipiente.length-1];\n        },\n        removerObjetoRecipiente(objetoRecipienteId) {\n            if (confirm(\"Confirma a exclusão do recipiente de objeto?\")) {\n                // Remove um recipiente de objeto do cenário\n                for (let i=0; i<this.listaObjetoRecipiente.length; i++) {\n                    if (this.listaObjetoRecipiente[i].id === objetoRecipienteId) {\n                        this.listaObjetoRecipiente.splice(i, 1);\n                        break;\n                    }\n                }\n                this.itemSelecionadoCenario = { id: \"\", tipo: \"\" };\n            }\n        },\n        verificaObjetoRecipienteSelecionado(objetoId) {\n            // Verifica se o objeto está na lista de opções de objeto selecionadas do recipiente\n            for (let i=0; i<this.itemSelecionadoCenario.objetos.length; i++) {\n                if (this.itemSelecionadoCenario.objetos[i] === objetoId) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        alterarObjetoRecipiente(e) {\n            // Adiciona ou remove um objeto da lista de opções de objeto selecionadas do recipiente\n            if (e.target.checked) {\n                this.itemSelecionadoCenario.objetos.push(e.target.value);\n            }\n            else {\n                for (let i=0; i<this.itemSelecionadoCenario.objetos.length; i++) {\n                    if (this.itemSelecionadoCenario.objetos[i] === e.target.value) {\n                        this.itemSelecionadoCenario.objetos.splice(i, 1);\n                        break;\n                    }\n                }\n            }\n            this.$emit('objetoRecipienteAlterado', { objetoRecipienteId: this.itemSelecionadoCenario.id, objetoId: e.target.value, objetoSelecionado: e.target.checked })\n        },\n        retornarImagemObjeto(objetoId) {\n            // Retorna a imagem de um objeto para mostrar no recipiente\n            for (let i=0; i<this.listaObjetoCenarios.length; i++) {\n                if (this.listaObjetoCenarios[i].id === objetoId) {\n                    return this.listaObjetoCenarios[i].imagem;\n                }\n            }\n            return \"\";\n        },\n        existeGrupoRecipiente(objetoRecipienteId) {\n            // Verifica se o recipiente de objeto foi selecionado como opção em algum grupo, para não permitir remover\n            for (let i=0; i<this.listaGrupoRecipiente.length; i++) {\n                for (let j=0; j<this.listaGrupoRecipiente[i].recipientes.length; j++){\n                    if (this.listaGrupoRecipiente[i].recipientes[j] === objetoRecipienteId) {\n                        return true;\n                    }\n                }        \n            }\n            return false;\n        },\n        adicionarGrupoRecipiente() {\n            // Adiciona um grupo de recipiente no cenário\n            const grupoRecipienteId = this.id + \".item\" + (++this.idUnicoItem);\n            this.listaGrupoRecipiente.push({\n                id: grupoRecipienteId,\n                tipo: this.tipoItem.GRUPO_RECIPIENTE,\n                nome: \"\",\n                imagemFoco: \"\",\n                recipientes: []\n            })\n            this.$emit(\"itemAdicionado\", { id: grupoRecipienteId, tipo: this.tipoItem.GRUPO_RECIPIENTE, cenarioId: this.id, nomeCenario: this.nomeCenario ? this.nomeCenario : this.id, nomeItem: grupoRecipienteId, cenarioIdDestino: \"\" })\n            this.itemSelecionadoCenario = this.listaGrupoRecipiente[this.listaGrupoRecipiente.length-1];\n        },\n        removerGrupoRecipiente(grupoRecipienteId) {\n            if (confirm(\"Confirma a exclusão do grupo de recipiente?\")) {\n                // Remove um grupo de recipiente do cenário\n                for (let i=0; i<this.listaGrupoRecipiente.length; i++) {\n                    if (this.listaGrupoRecipiente[i].id === grupoRecipienteId) {\n                        this.listaGrupoRecipiente.splice(i, 1);\n                        this.$emit(\"itemRemovido\", { id: grupoRecipienteId, tipo: this.tipoItem.GRUPO_RECIPIENTE })\n                        break;\n                    }\n                }\n                this.itemSelecionadoCenario = { id: \"\", tipo: \"\" };\n            }\n        },\n        imagemFocoGrupoRecipienteAlterada(e) {\n            // Atualiza a visualização da imagem do grupo de recipiente\n            const imagem = e.target.files[0];\n            const reader = new FileReader();\n            reader.readAsDataURL(imagem);\n            reader.onload = e => {\n                this.itemSelecionadoCenario.imagemFoco = e.target.result;\n            };\n            e.target.value = \"\";\n        },\n        filtrarObjetoRecipiente(item) {\n            // Exibe como opção de recipiente para um grupo apenas os itens que\n            // ainda não foram utilizados como opção em outro grupo ou já está selecionado no próprio grupo\n            for (let i=0; i<this.listaGrupoRecipiente.length; i++) {\n                for (let j=0; j<this.listaGrupoRecipiente[i].recipientes.length; j++){\n                    if (this.listaGrupoRecipiente[i].recipientes[j] === item.id) {\n                        return this.listaGrupoRecipiente[i].id == this.itemSelecionadoCenario.id;\n                    }\n                }        \n            }\n            return true;\n        },\n        verificaGrupoRecipienteSelecionado(objetoRecipienteId) {\n            // Verifica se o recipiente de objeto está na lista de opções de recipiente selecionadas do grupo\n            for (let i=0; i<this.itemSelecionadoCenario.recipientes.length; i++) {\n                if (this.itemSelecionadoCenario.recipientes[i] === objetoRecipienteId) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        alterarRecipienteGrupo(e) {\n            // Adiciona ou remove um recipiente da lista de opções de recipiente selecionadas do grupo\n            if (e.target.checked) {\n                this.itemSelecionadoCenario.recipientes.push(e.target.value);\n            }\n            else {\n                for (let i=0; i<this.itemSelecionadoCenario.recipientes.length; i++) {\n                    if (this.itemSelecionadoCenario.recipientes[i] === e.target.value) {\n                        this.itemSelecionadoCenario.recipientes.splice(i, 1);\n                        break;\n                    }\n                }\n            }\n        },\n        adicionarCenarioFilho() {\n            // Adiciona um cenário filho no cenário\n            const cenarioFilhoId = this.id + \".item\" + (++this.idUnicoItem);\n            this.listaCenarioFilho.push({\n                id: cenarioFilhoId,\n                tipo: this.tipoItem.CENARIO_FILHO,\n                nome: \"\",\n                imagemFoco: \"\",\n                largura: this.itemTamanhoPadrao,\n                altura: this.itemTamanhoPadrao,\n                posicaoX: 0,\n                posicaoY: 0\n            })\n            this.$emit(\"itemAdicionado\", { id: cenarioFilhoId, tipo: this.tipoItem.CENARIO_FILHO, cenarioId: this.id, nomeCenario: this.nomeCenario ? this.nomeCenario : this.id, nomeItem: cenarioFilhoId, cenarioIdDestino: \"\" })\n            this.itemSelecionadoCenario = this.listaCenarioFilho[this.listaCenarioFilho.length-1];\n        },\n        removerCenarioFilho(cenarioFilhoId) {\n            if (confirm(\"Confirma a exclusão do cenário filho?\")) {\n                // Remove um cenário filho do cenário\n                for (let i=0; i<this.listaCenarioFilho.length; i++) {\n                    if (this.listaCenarioFilho[i].id === cenarioFilhoId) {\n                        this.listaCenarioFilho.splice(i, 1);\n                        this.$emit(\"itemRemovido\", { id: cenarioFilhoId, tipo: this.tipoItem.CENARIO_FILHO })\n                        break;\n                    }\n                }\n                this.itemSelecionadoCenario = { id: \"\", tipo: \"\" };\n            }\n        },       \n        imagemFocoCenarioFilhoAlterada(e) {\n            // Atualiza a visualização da imagem do cenário filho\n            const imagem = e.target.files[0];\n            const reader = new FileReader();\n            reader.readAsDataURL(imagem);\n            reader.onload = e => {\n                this.itemSelecionadoCenario.imagemFoco = e.target.result;\n            };\n            e.target.value = \"\";\n        },\n        retornarSalvar() {\n            return {\n                id: this.id,\n                inicial: this.inicial,\n                listaItemOrigem: this.listaItemOrigem,\n                final: this.final,\n                nome: this.nomeCenario,\n                imagem: this.imagemCenario,\n                listaCadeado: this.listaCadeado,\n                listaObjeto: this.listaObjeto,\n                listaObjetoRecipiente: this.listaObjetoRecipiente,\n                listaGrupoRecipiente: this.listaGrupoRecipiente,\n                listaCenarioFilho: this.listaCenarioFilho\n            }\n        },\n        carregarDadosSalvos(dados) {\n            this.id = dados.id;\n            this.inicial = dados.inicial;\n            this.listaItemOrigem = dados.listaItemOrigem;\n            this.final = dados.final;\n            this.nomeCenario = dados.nome;\n            this.imagemCenario = dados.imagem;\n            this.listaCadeado = dados.listaCadeado;\n            this.listaObjeto = dados.listaObjeto;\n            this.listaObjetoRecipiente = dados.listaObjetoRecipiente;\n            this.listaGrupoRecipiente = dados.listaGrupoRecipiente;\n            this.listaCenarioFilho = dados.listaCenarioFilho;\n            let idItem = 0;\n            if (this.listaCadeado.length) {\n                idItem = parseInt(this.listaCadeado[this.listaCadeado.length - 1].id.split('.')[1].replace(/item/g, ''));\n                if (idItem > this.idUnicoItem) {\n                    this.idUnicoItem = idItem;\n                }\n            }\n            if (this.listaObjeto.length) {\n                idItem = parseInt(this.listaObjeto[this.listaObjeto.length - 1].id.split('.')[1].replace(/item/g, ''));\n                if (idItem > this.idUnicoItem) {\n                    this.idUnicoItem = idItem;\n                }\n            }\n            if (this.listaObjetoRecipiente.length) {\n                idItem = parseInt(this.listaObjetoRecipiente[this.listaObjetoRecipiente.length - 1].id.split('.')[1].replace(/item/g, ''));\n                if (idItem > this.idUnicoItem) {\n                    this.idUnicoItem = idItem;\n                }\n            }\n            if (this.listaGrupoRecipiente.length) {\n                idItem = parseInt(this.listaGrupoRecipiente[this.listaGrupoRecipiente.length - 1].id.split('.')[1].replace(/item/g, ''));\n                if (idItem > this.idUnicoItem) {\n                    this.idUnicoItem = idItem;\n                }\n            }\n            if (this.listaCenarioFilho.length) {\n                idItem = parseInt(this.listaCenarioFilho[this.listaCenarioFilho.length - 1].id.split('.')[1].replace(/item/g, ''));\n                if (idItem > this.idUnicoItem) {\n                    this.idUnicoItem = idItem;\n                }\n            }\n        }\n    }\n}\n</script>\n\n<style scoped>\n    .cenario-area {\n        width: 100%;\n        height: 600px;\n        overflow: scroll;\n        border: 1px solid #bbb;\n        position: relative;\n    }\n    .area-items, .area-marca-tamanho {\n        position: absolute;\n    }\n    .area-fundo {\n        width: 100%;\n        height: 100%;\n    }\n    .marca-tamanho {\n        z-index: 2;\n        width: 8px;\n        height: 8px;\n        position: absolute;\n        cursor: pointer;\n        background: #ddd;\n        border: 1px solid #555;\n    }\n    .imagem-preview {\n        max-width: 100px;\n        max-height: 100px;\n    }\n    .cadeado, .cenario-filho {\n        width: 50px; \n        height: 50px; \n        border-radius: 50%;\n        border: 3px solid #666;\n        background-color: rgba(255 ,255 ,250, .3);\n        box-shadow: 2px 2px 2px white;\n        position: absolute;\n        cursor: pointer;\n    }\n    .cadeado.selecionado, .objeto.selecionado, .cenario-filho.selecionado {\n        border: 3px solid orange;\n        background-color: rgba(255 ,255 ,0, .3);\n        box-shadow: 2px 2px 2px #666;\n    }\n    .select-customizado {\n        width: 150px;\n        display: inline-grid;\n        vertical-align: top;\n    }\n    .select-customizado .selecionado {\n        border: 2px solid;\n    }\n    .select-customizado li {\n        cursor: pointer;\n    }\n    .objeto {\n        width: 50px; \n        height: 50px; \n        border: 3px solid #666;\n        background-color: rgba(255 ,255 ,250, .3);\n        box-shadow: 2px 2px 2px white;\n        position: absolute;\n        cursor: pointer;\n    }\n    .objeto img {\n        width: 100%;\n        height: 100%;\n    }\n    .objeto > div {\n        width: 100%;\n        height: 100%;\n        position: absolute;\n    }\n    .objeto-recipiente {\n        width: 50px; \n        height: 50px; \n        border: 3px solid #aaa;\n        background-color: rgba(0 ,0 ,0, .1);\n        box-shadow: 2px 2px 2px white;\n        position: absolute;\n        cursor: pointer;\n    }\n    .objeto-recipiente.selecionado {\n        border: 3px solid red;\n        background-color: rgba(255 ,255 ,0, .3);\n        box-shadow: 2px 2px 2px #666;\n    }\n    .objeto-recipiente img {\n        width: 100%;\n        height: 100%;\n    }\n    .objeto-recipiente > div {\n        width: 100%;\n        height: 100%;\n        position: absolute;\n    }\n    .itens-cenario .selecionado {\n        background-color: yellow;\n    }\n</style> "]}]}